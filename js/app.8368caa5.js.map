{"version":3,"file":"js/app.8368caa5.js","mappings":"qFACOA,GAAG,O,yEAARC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,EADJC,EAAAA,EAAAA,IAAcC,I,wBCDXC,MAAM,yB,EADb,Q,GAISA,MAAM,gB,GAEJA,MAAM,mB,GACJA,MAAM,sB,GACJA,MAAM,c,GAoCVA,MAAM,gB,GA5CjBC,IAAA,EAmDkED,MAAM,c,GAnDxEC,IAAA,EAwDaD,MAAM,wB,GACJA,MAAM,uB,EAzDrB,a,GAiEkBA,MAAM,e,EAjExB,a,yLACEJ,EAAAA,EAAAA,IA6FM,MA7FNC,EA6FM,EA5FNK,EAAAA,EAAAA,IAAsF,OAAhFC,IAAKC,EAAQ,KAA4BC,IAAI,WAAWL,MAAM,iB,OAFtEM,IAIIJ,EAAAA,EAAAA,IAwEM,MAxENK,EAwEM,EAtEJL,EAAAA,EAAAA,IAyBM,MAzBNM,EAyBM,EAxBJN,EAAAA,EAAAA,IAmBM,MAnBNO,EAmBM,EAlBJP,EAAAA,EAAAA,IAWM,MAXNQ,EAWM,WAVJR,EAAAA,EAAAA,IAME,SAfd,sBAAAS,EAAA,KAAAA,EAAA,GAAAC,GAUuBC,EAAAC,MAAKF,GACbG,QAAKJ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAC,iBAAAD,EAAAC,mBAAAF,IACPG,QAAKR,EAAA,KAAAA,EAAA,IAZpBS,EAAAA,EAAAA,KAAA,IAAAJ,IAY4BC,EAAAI,cAAAJ,EAAAI,gBAAAL,IAAY,YAC1BM,YAAY,kBACZtB,MAAM,gB,iBAJGa,EAAAC,UAMXZ,EAAAA,EAAAA,IAES,UAFAqB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAI,cAAAJ,EAAAI,gBAAAL,IAAchB,MAAM,iB,gBAClCE,EAAAA,EAAAA,IAA6B,KAA1BF,MAAM,iBAAe,UAjBtCwB,EAAAA,EAAAA,IAiB2C,iBAKzBX,EAAAY,SAASC,OAAS,IAAH,WADvBC,EAAAA,EAAAA,IAIEC,EAAA,CAzBZ3B,IAAA,EAuBawB,QAASZ,EAAAY,QACTI,aAAaZ,EAAAa,iB,qCAxB1BC,EAAAA,EAAAA,IAAA,UA4BQ7B,EAAAA,EAAAA,IAES,UAFAqB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAmB,iBAAkB,GAAMhC,MAAM,iB,gBAC5CE,EAAAA,EAAAA,IAA6B,KAA1BF,MAAM,iBAAe,UA7BlCwB,EAAAA,EAAAA,IA6BuC,2BAMzBX,EAAAmB,kBAAe,WADvBL,EAAAA,EAAAA,IAOEM,EAAA,CAzCRhC,IAAA,EAoCSiC,OAAQrB,EAAAmB,gBACRG,QAAStB,EAAAsB,QACTC,eAAgBvB,EAAAwB,cAChBC,aAAW3B,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAmB,iBAAkB,GAC/BO,eAAetB,EAAAuB,oB,iEAxCxBT,EAAAA,EAAAA,IAAA,QA4CM7B,EAAAA,EAAAA,IA+BM,MA/BNuC,EA+BM,CA7BI5B,EAAA6B,OAAS7B,EAAA6B,MAAMhB,OAAS,IAAH,WAD7BC,EAAAA,EAAAA,IAKEgB,EAAA,CAlDV1C,IAAA,EA+CWyC,MAAO7B,EAAA6B,MACPb,aAAaZ,EAAAa,gBACbc,YAAa3B,EAAA4B,e,iDAjDxBd,EAAAA,EAAAA,IAAA,QAmDmBlB,EAAAiC,aAAiBjC,EAAA6B,OAA0B,IAAjB7B,EAAA6B,MAAMhB,QAnDnDK,EAAAA,EAAAA,IAAA,SAmDyD,WAAjDnC,EAAAA,EAAAA,IAEM,MAFNmD,EAA6E,6CAKpClC,EAAAmC,SAAWnC,EAAAoC,KAAO,IAAMpC,EAAA6B,MAAMhB,SAAM,WAA7E9B,EAAAA,EAAAA,IAkBM,MAlBNsD,EAkBM,EAjBJhD,EAAAA,EAAAA,IAgBM,MAhBNiD,EAgBM,EAfJjD,EAAAA,EAAAA,IAMS,UALNqB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAAmC,WAAWvC,EAAAoC,KAAO,IACzBI,SAAmB,IAATxC,EAAAoC,KACXjD,MAAM,qBACP,eAED,EAhEZsD,IAiEYpD,EAAAA,EAAAA,IAAgD,OAAhDqD,EAA0B,SAAKC,EAAAA,EAAAA,IAAG3C,EAAAoC,MAAI,IACtC/C,EAAAA,EAAAA,IAMS,UALNqB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAAmC,WAAWvC,EAAAoC,KAAO,IACzBI,UAAWxC,EAAAmC,QACZhD,MAAM,qBACP,WAED,EAxEZyD,SAAA1B,EAAAA,EAAAA,IAAA,YA+EIjC,EAAAA,EAAAA,IAME4D,EAAA,CALAC,IAAI,cACHC,aAAc/C,EAAA+C,aACdC,oBAAmBlD,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAA+C,aAAe,MACpCE,WAAW7C,EAAAa,gBACXiC,YAAY9C,EAAA8C,a,oDAKPlD,EAAA+C,eAAY,WADpBjC,EAAAA,EAAAA,IAKEqC,EAAA,CA7FN/D,IAAA,EA0FOgE,KAAMpD,EAAA+C,aACNM,QAAKvD,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAA+C,aAAe,MACtBhB,YAAa3B,EAAA4B,e,iCA5FpBd,EAAAA,EAAAA,IAAA,Q,yCCAA,Y,GAIa/B,MAAM,e,GACHA,MAAM,a,EALtB,c,+BAC2CmE,EAAA1C,SAASC,OAAS,IAAH,WAAxD9B,EAAAA,EAAAA,IASM,OAVRK,IAAA,EACOD,MAAM,wBAAoDuB,QAAKZ,EAAA,KAAAA,EAAA,IADtEyD,EAAAA,EAAAA,KACgE,QAAW,Y,EACvElE,EAAAA,EAAAA,IAOK,0BANHN,EAAAA,EAAAA,IAKKyE,EAAAA,GAAA,MARXC,EAAAA,EAAAA,IAGyBH,EAAA1C,SAARwC,K,WAAXrE,EAAAA,EAAAA,IAKK,MALwBK,IAAKgE,EAAKtE,GAAK4B,QAAKX,GAAE2D,EAAAC,MAAM,cAAeP,I,EACtE/D,EAAAA,EAAAA,IAGM,MAHNI,EAGM,EAFJJ,EAAAA,EAAAA,IAA8C,OAA9CK,GAA8CiD,EAAAA,EAAAA,IAAnBS,EAAKQ,MAAI,GACDR,EAAKS,YAAS,WAAjD9E,EAAAA,EAAAA,IAAkG,QAN5GK,IAAA,EAMgBD,MAAM,iBAAuC2E,UAAQ1D,EAAA2D,eAAeX,EAAKS,Y,OANzFlE,KAAAuB,EAAAA,EAAAA,IAAA,YAAAlC,M,YAAAkC,EAAAA,EAAAA,IAAA,M,CAcA,OACE0C,KAAM,mBACNI,MAAO,CACLpD,QAASqD,OAEXC,QAAS,CACPC,aAAAA,GACEC,KAAKT,MAAM,cAAe,KAC5B,EACAI,cAAAA,CAAeM,GACb,OAAKA,EACEA,EAASC,QAAQ,gBAAgB,CAACC,EAAOC,KAE9C,IAAIC,EAAWD,EAAOE,cAMtB,MAJiB,MAAbD,GAAiC,QAAbA,IAAoBA,EAAW,OACtC,MAAbA,GAAiC,UAAbA,IAAsBA,EAAW,SACrDA,EAASE,SAAS,OAAMF,EAAWA,EAASH,QAAQ,IAAK,KAEtD,sBAAsBG,YAAmB,IAT5B,EAWxB,GAEFG,OAAAA,GACEC,SAASC,iBAAiB,QAASV,KAAKD,cAC1C,EACAY,aAAAA,GACEF,SAASG,oBAAoB,QAASZ,KAAKD,cAC7C,G,UClCF,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCTO9F,MAAM,a,GAEFA,MAAM,a,EAHjB,wB,GAUaA,MAAM,c,EAVnB,Y,0CACEJ,EAAAA,EAAAA,IAmBM,MAnBNC,EAmBM,gBAlBJD,EAAAA,EAAAA,IAiBMyE,EAAAA,GAAA,MAnBVC,EAAAA,EAAAA,IAEwBH,EAAAzB,OAARuB,K,WAAZrE,EAAAA,EAAAA,IAiBM,OAjBsBK,IAAKgE,EAAKtE,GAAIK,MAAM,kB,EAC9CE,EAAAA,EAAAA,IAeM,MAfNI,EAeM,EAdJJ,EAAAA,EAAAA,IAKC,OAJEC,IAAKc,EAAA8E,gBAAgB9B,GACrB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACLuB,QAAKX,GAAEK,EAAA+E,iBAAiB/B,I,OARnC1D,IAUQL,EAAAA,EAAAA,IAA6C,MAA7CM,GAA6CgD,EAAAA,EAAAA,IAAlBS,EAAKQ,MAAI,IACpCvE,EAAAA,EAAAA,IAMS,UALPF,MAAM,kBACLuB,SAbX6C,EAAAA,EAAAA,KAAAxD,GAauBK,EAAAgF,gBAAgBhC,IAAI,UACjCiC,MAAM,e,cAENhG,EAAAA,EAAAA,IAAgC,QAA1BF,MAAM,aAAY,KAAC,OAhBnCS,U,QAwBA,OACEoE,MAAO,CACLnC,MAAO,CACLyD,KAAMrB,MACNsB,UAAU,IAGdrB,QAAS,CACPgB,eAAAA,CAAgB9B,GAEd,OAAIA,EAAKoC,YAAcpC,EAAKoC,WAAW3E,OAAS,GAAKuC,EAAKoC,WAAW,GAAGC,WAC/DrC,EAAKoC,WAAW,GAAGC,WAAWC,OAG9BtC,EAAKqC,YAAcrC,EAAKqC,WAAWC,OACnCtC,EAAKqC,WAAWC,OAGlB,uBACT,EACAN,eAAAA,CAAgBhC,GACduC,QAAQC,IAAI,0BAA2BxC,EAAKQ,MAC5CQ,KAAKT,MAAM,cAAeP,EAC5B,EACA+B,gBAAAA,CAAiB/B,GACfgB,KAAKT,MAAM,cAAeP,EAC5B,IC3CJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCPSjE,MAAM,iB,GAEJA,MAAM,c,GAEJA,MAAM,wB,GACJA,MAAM,c,GAPrBC,IAAA,EASqCD,MAAM,a,GAU9BA,MAAM,a,GACLA,MAAM,c,GAELA,MAAM,a,GACJA,MAAM,Y,EAvBvB,c,GA4BiBA,MAAM,Y,IAEHA,MAAM,c,IA9B1BC,IAAA,EAiCiBD,MAAM,Y,IAEHA,MAAM,c,IAGTA,MAAM,Y,IAEHA,MAAM,c,IAxC1BC,IAAA,EA2CiBD,MAAM,Y,IAEHA,MAAM,c,IAIXA,MAAM,e,GAjDrB,c,wEACEJ,EAAAA,EAAAA,IAuDM,OAvDDI,MAAM,gBAAiBuB,QAAKZ,EAAA,KAAAA,EAAA,IADnCyD,EAAAA,EAAAA,KAAA,IAAApD,IAC0CC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,IAAK,Y,EAC3Cd,EAAAA,EAAAA,IAqDM,MArDNL,EAqDM,EApDJK,EAAAA,EAAAA,IAAqF,UAA7EF,MAAM,eAAgBuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,IAAO,aAAW,eAAc,MACrEd,EAAAA,EAAAA,IAkDM,MAlDNI,EAkDM,EAhDJJ,EAAAA,EAAAA,IAUM,MAVNK,EAUM,EATJL,EAAAA,EAAAA,IAGM,MAHNM,EAGM,EAFJV,EAAAA,EAAAA,IAAyB6G,EAAA,CAAd1C,KAAME,EAAAF,MAAI,iBACVhD,EAAA2F,eAAY,WAAvBhH,EAAAA,EAAAA,IAA8D,MAA9Da,EAA2C,mBATvDsB,EAAAA,EAAAA,IAAA,UAaU7B,EAAAA,EAAAA,IAES,UAFDF,MAAM,kBAAmBuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA4F,mBAAA5F,EAAA4F,qBAAA7F,KAAmB,oBAM7Dd,EAAAA,EAAAA,IAkCM,MAlCNQ,EAkCM,EAjCJR,EAAAA,EAAAA,IAA2C,KAA3CuC,GAA2Ce,EAAAA,EAAAA,IAAjBW,EAAAF,KAAKQ,MAAI,IAEnCvE,EAAAA,EAAAA,IAyBM,MAzBN6C,EAyBM,EAxBJ7C,EAAAA,EAAAA,IAGM,MAHNgD,EAGM,cAFJhD,EAAAA,EAAAA,IAA0C,QAApCF,MAAM,cAAa,cAAU,KACnCE,EAAAA,EAAAA,IAAsF,QAAhFF,MAAM,0BAA0B2E,UAAQ1D,EAAA2D,eAAe3D,EAAA6F,kB,OAzB3E3D,MA4BYjD,EAAAA,EAAAA,IAGM,MAHNoD,EAGM,cAFJpD,EAAAA,EAAAA,IAA+C,QAAzCF,MAAM,cAAa,mBAAe,KACxCE,EAAAA,EAAAA,IAAsE,OAAtEqD,IAAsEC,EAAAA,EAAAA,IAA1CvC,EAAA8F,oBAAoB5C,EAAAF,KAAK+C,SAAM,KAGjC7C,EAAAF,KAAKgD,OAAS9C,EAAAF,KAAKiD,YAAS,WAAxDtH,EAAAA,EAAAA,IAGM,MAHN6D,GAGM,cAFJvD,EAAAA,EAAAA,IAAgD,QAA1CF,MAAM,cAAa,oBAAgB,KACzCE,EAAAA,EAAAA,IAA8G,OAA9GiH,IAA8G3D,EAAAA,EAAAA,IAAlFW,EAAAF,KAAKgD,OAAS9C,EAAAF,KAAKiD,UAAY,GAAG/C,EAAAF,KAAKgD,SAAS9C,EAAAF,KAAKiD,YAAc,OAAL,OAnCxGnF,EAAAA,EAAAA,IAAA,QAsCY7B,EAAAA,EAAAA,IAGM,MAHNkH,GAGM,cAFJlH,EAAAA,EAAAA,IAAqC,QAA/BF,MAAM,cAAa,SAAK,KAC9BE,EAAAA,EAAAA,IAAoD,OAApDmH,IAAoD7D,EAAAA,EAAAA,IAAxBW,EAAAF,KAAKqD,WAAS,KAGhBnD,EAAAF,KAAKsD,WAAQ,WAAzC3H,EAAAA,EAAAA,IAGM,MAHN4H,GAGM,cAFJtH,EAAAA,EAAAA,IAAoC,QAA9BF,MAAM,cAAa,QAAI,KAC7BE,EAAAA,EAAAA,IAAmD,OAAnDuH,IAAmDjE,EAAAA,EAAAA,IAAvBW,EAAAF,KAAKsD,UAAQ,OA7CvDxF,EAAAA,EAAAA,IAAA,UAiDU7B,EAAAA,EAAAA,IAGM,MAHNwH,GAGM,cAFJxH,EAAAA,EAAAA,IAAoB,UAAhB,eAAW,KACfA,EAAAA,EAAAA,IAAkD,KAA/CyE,UAAQ1D,EAAA2D,eAAe3D,EAAA0G,oB,OAnDtCC,a,mCCIiB5H,MAAM,mB,GAJvB,c,IAWiBA,MAAM,kB,GAXvB,c,2CACIJ,EAAAA,EAAAA,IAiBM,OAjBDI,MAAM,sBAAuBuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA4G,UAAA5G,EAAA4G,YAAA7G,K,EACrCd,EAAAA,EAAAA,IAeM,OAfDF,OAFb8H,EAAAA,EAAAA,IAAA,CAEmB,YAAW,CAAAC,QAAoBlH,EAAAmH,c,EAEtC9H,EAAAA,EAAAA,IAKM,MALNL,GAKM,EAJFK,EAAAA,EAAAA,IAGE,OAFGC,IAAKc,EAAAgH,YAAc,mBACnB5H,IAAK8D,EAAAF,KAAKQ,M,OAP/BnE,OAWYJ,EAAAA,EAAAA,IAKM,MALNK,GAKM,EAJFL,EAAAA,EAAAA,IAGE,OAFGC,IAAKc,EAAAiH,WAAa,mBAClB7H,IAAK8D,EAAAF,KAAKQ,M,OAd/BjE,OAAA,I,CAsBA,QACIqE,MAAO,CACHZ,KAAMkE,QAEVC,IAAAA,GACI,MAAO,CACHJ,WAAW,EAEnB,EACAK,SAAU,CACNJ,UAAAA,GACI,OAAOhD,KAAKhB,MAAMoC,aAAa,IAAIC,YAAYC,QAAUtB,KAAKhB,MAAMqC,YAAYC,MACpF,EACA2B,SAAAA,GACI,OAAOjD,KAAKhB,MAAMoC,aAAa,IAAIC,YAAYC,QAAU,IAC7D,GAEJxB,QAAS,CACL8C,QAAAA,GACQ5C,KAAKiD,YACLjD,KAAK+C,WAAa/C,KAAK+C,UAE/B,ICrCR,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UFoDA,IACEnD,MAAO,CACLZ,KAAMkE,QAERG,WAAY,CACVC,SAAQA,IAEV9C,OAAAA,GACA,EACA4C,SAAU,CACRzB,YAAAA,GAEE,OAAO4B,QAAQvD,KAAKhB,MAAMoC,aAAa,IAAIC,YAAYC,OACzD,EACAO,eAAAA,GACA,GAAI7B,KAAKhB,KAAKoC,YAAY3E,OAAQ,CAChC,MAAO+G,EAAOC,GAASzD,KAAKhB,KAAKoC,WAC3BsC,EAAQF,EAAM/D,WAAa,GAC3BkE,EAAQF,GAAOhE,WAAa,GAClC,OAAOiE,GAASC,EAAQ,GAAGD,QAAYC,IAAUD,GAASC,GAAS,KACrE,CACA,OAAO3D,KAAKhB,KAAKS,WAAa,KAChC,EACAiD,iBAAAA,GACE,OAAI1C,KAAKhB,KAAKoC,YAAY3E,OACjBuD,KAAKhB,KAAKoC,WACdwC,KAAIC,GAAQA,EAAKC,aAAe,KAChCC,OAAOR,SACPS,KAAK,gCAEHhE,KAAKhB,KAAK8E,aAAe,KAClC,GAEAhE,QAAS,CACP2B,KAAAA,GACEzB,KAAKT,MAAM,QACb,EACAqC,iBAAAA,GACEL,QAAQC,IAAI,4BAA6BxB,KAAKhB,KAAKQ,MACnDQ,KAAKT,MAAM,cAAeS,KAAKhB,MAC/BgB,KAAKyB,OACP,EACA9B,cAAAA,CAAesE,GACb,OAAKA,EAGEA,EAAK/D,QAAQ,gBAAgB,CAACC,EAAOC,KAE1C,IAAIC,EAAWD,EAAOE,cAmBtB,MAhBiB,MAAbD,GAAiC,QAAbA,EACtBA,EAAW,IAGS,MAAbA,GAAiC,UAAbA,EAC3BA,EAAW,IAGJA,EAASE,SAAS,KACzBF,EAAWA,EAASH,QAAQ,IAAK,IAG1B,QAAQgE,KAAK7D,KACpBA,EAAWD,GAGN,6BAA6BC,YAAmB,IAxBvC,KA0BpB,EACAyB,mBAAAA,CAAoBC,GAClB,IAAKA,GAA4B,IAAlBA,EAAOtF,OAAc,MAAO,YAE3C,MAAM0H,EAAW,CACf,EAAK,QACL,EAAK,OACL,EAAK,QACL,EAAK,MACL,EAAK,SAGP,OAAOpC,EAAO6B,KAAIQ,GAASD,EAASC,IAAUA,IAAOJ,KAAK,KAC5D,IGvIJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCRSjJ,MAAM,gB,IACJA,MAAM,gB,IAKNA,MAAM,iB,IAEJA,MAAM,kB,IAEJA,MAAM,gB,IAQJA,MAAM,Y,GApBvB,U,IA4BsBA,MAAM,Y,IACNA,MAAM,Y,IAOdA,MAAM,kB,IAELA,MAAM,iB,GAtCrB,oB,IAqDaA,MAAM,kB,IAEJA,MAAM,kB,GAvDrB,oB,GAAA,c,IAqEaA,MAAM,kB,IAEJA,MAAM,gB,GAvErB,Y,IAoFaA,MAAM,kB,IAEJA,MAAM,qB,GAtFrB,Y,IA8GaA,MAAM,kB,IAEVA,MAAM,qB,IACJA,MAAM,oB,IAUNA,MAAM,oB,IAcJA,MAAM,c,IACJA,MAAM,kB,IAEJA,MAAM,gB,IAgBRA,MAAM,kB,IAEJA,MAAM,gB,IAkBZA,MAAM,gB,gCA/KJmE,EAAAjC,SAAM,WAAjBtC,EAAAA,EAAAA,IAwLM,OAzLRK,IAAA,EACqBD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,KADjDyD,EAAAA,EAAAA,KAAA,IAAApD,IACwDC,EAAAqI,YAAArI,EAAAqI,cAAAtI,IAAU,Y,EAC9Dd,EAAAA,EAAAA,IAsLM,MAtLNL,GAsLM,EArLJK,EAAAA,EAAAA,IAGM,MAHNI,GAGM,gBAFJJ,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,KAChBA,EAAAA,EAAAA,IAAwD,UAAhDF,MAAM,YAAauB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAqI,YAAArI,EAAAqI,cAAAtI,KAAY,QAGhDd,EAAAA,EAAAA,IAsKM,MAtKNK,GAsKM,EApKJL,EAAAA,EAAAA,IAuBM,MAvBNM,GAuBM,gBAtBJN,EAAAA,EAAAA,IAAY,UAAR,OAAG,KACPA,EAAAA,EAAAA,IAoBM,MApBNO,GAoBM,WAnBJP,EAAAA,EAAAA,IAME,SALAiG,KAAK,OAdnB,sBAAAxF,EAAA,KAAAA,EAAA,GAAAC,GAeuBC,EAAA0I,eAAc3I,GACvBU,YAAY,iBACXP,QAAKJ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAuI,YAAAvI,EAAAuI,cAAAxI,IACRhB,MAAM,gB,iBAHGa,EAAA0I,mBAKXrJ,EAAAA,EAAAA,IAWM,MAXNQ,GAWM,gBAVJd,EAAAA,EAAAA,IASQyE,EAAAA,GAAA,MA9BtBC,EAAAA,EAAAA,IAqBmCzD,EAAA4I,cAAPC,K,WAAd9J,EAAAA,EAAAA,IASQ,SAT4BK,IAAKyJ,EAAIC,KAAM3J,MAAM,Y,WACvDE,EAAAA,EAAAA,IAKE,SAJAiG,KAAK,WACJyD,MAAOF,EAAIC,KAxB9B,sBAAAhJ,EAAA,KAAAA,EAAA,GAAAC,GAyB2BC,EAAAgJ,QAAQC,KAAIlJ,GACrBZ,MAAM,gB,OA1BxByC,IAAA,OAyB2B5B,EAAAgJ,QAAQC,SAGnB5J,EAAAA,EAAAA,IAA4C,OAA5C6C,IAA4CS,EAAAA,EAAAA,IAAlBkG,EAAIjF,MAAI,IAClCvE,EAAAA,EAAAA,IAA0D,OAA1DgD,IAA0DM,EAAAA,EAAAA,IAAhCkG,EAAIC,KAAKI,eAAW,Q,aAOrD7J,EAAAA,EAAAA,IAcK,MAdLiD,GAcK,gBAbJjD,EAAAA,EAAAA,IAAc,UAAV,SAAK,KACTA,EAAAA,EAAAA,IAWM,MAXNoD,GAWM,gBAVJ1D,EAAAA,EAAAA,IASSyE,EAAAA,GAAA,MAhDrBC,EAAAA,EAAAA,IAwC8BzD,EAAAmJ,cAATX,K,WADTzJ,EAAAA,EAAAA,IASS,UAPNK,IAAKoJ,EAAMM,KACX3J,OA1Cf8H,EAAAA,EAAAA,IAAA,cAAAmC,SA0CgDpJ,EAAAgJ,QAAQ7C,OAAOxB,SAAS6D,EAAMM,SAC/DO,OA3CfC,EAAAA,EAAAA,IAAA,CAAAC,gBA2CyCf,EAAMgB,aAChC9I,QAAKX,GAAEK,EAAAqJ,YAAYjB,EAAMM,MACzBzD,MAAOmD,EAAM5E,M,EAEdvE,EAAAA,EAAAA,IAAwE,QAAlEF,OA/CpB8H,EAAAA,EAAAA,IAAA,CA+C0B,aAAY,IAAauB,EAAMM,KAAKpE,mB,YA/C9DhC,O,WAqDQrD,EAAAA,EAAAA,IAaM,MAbNuD,GAaM,gBAZJvD,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAUM,MAVNiH,GAUM,gBATJvH,EAAAA,EAAAA,IAQSyE,EAAAA,GAAA,MAhErBC,EAAAA,EAAAA,IAyD+BzD,EAAA0J,eAAVC,K,WADT5K,EAAAA,EAAAA,IAQS,UANNK,IAAKuK,EAAOb,KACZ3J,OA3Df8H,EAAAA,EAAAA,IAAA,cA2DqC0C,EAAOb,KAAM,CAAFM,SAAcpJ,EAAAgJ,QAAQY,SAASjF,SAASgF,EAAOb,SAChFpI,QAAKX,GAAEK,EAAAyJ,aAAaF,EAAOb,MAC3BzD,MAAOsE,EAAO/F,M,EAEfvE,EAAAA,EAAAA,IAAgE,OAA1DC,IAAKqK,EAAOG,MAAQtK,IAAKmK,EAAO/F,KAAMzE,MAAM,e,OA/DhEqH,KAAA,GAAAD,O,WAqEQlH,EAAAA,EAAAA,IAYM,MAZNsH,GAYM,gBAXJtH,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IASM,MATNuH,GASM,gBARJ7H,EAAAA,EAAAA,IAOSyE,EAAAA,GAAA,MA/ErBC,EAAAA,EAAAA,IAyE6BzD,EAAA+J,aAARzE,K,WADTvG,EAAAA,EAAAA,IAOS,UALNK,IAAKkG,EACLnG,OA3Ef8H,EAAAA,EAAAA,IAAA,aAAAmC,SA2E+CpJ,EAAAgJ,QAAQgB,MAAMrF,SAASW,MACvD5E,QAAKX,GAAEK,EAAA6J,WAAW3E,K,QAEhBA,GAAI,GA9ErBuB,O,WAoFQxH,EAAAA,EAAAA,IAYM,MAZN0H,GAYM,gBAXJ1H,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IASM,MATN6K,GASM,gBARJnL,EAAAA,EAAAA,IAOSyE,EAAAA,GAAA,MA9FrBC,EAAAA,EAAAA,IAwFkCzD,EAAAmK,kBAAbC,K,WADTrL,EAAAA,EAAAA,IAOS,UALNK,IAAKgL,EACLjL,OA1Ff8H,EAAAA,EAAAA,IAAA,kBAAAmC,SA0FoDpJ,EAAAgJ,QAAQqB,WAAW1F,SAASyF,MACjE1J,QAAKX,GAAEK,EAAAkK,gBAAgBF,K,QAErBA,GAAS,GA7F1BG,O,WA8GQlL,EAAAA,EAAAA,IAwBA,MAxBAmL,GAwBA,gBAvBJnL,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IAqBM,MArBNoL,GAqBM,EApBJpL,EAAAA,EAAAA,IASM,MATNqL,GASM,gBARJrL,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,cACfA,EAAAA,EAAAA,IAME,SALAiG,KAAK,SApHf,sBAAAxF,EAAA,KAAAA,EAAA,GAAAC,GAqH0BC,EAAAgJ,QAAQ3E,SAASsG,IAAG5K,GACpC4K,IAAI,IACJC,IAAI,KACJzL,MAAM,c,iBAHUa,EAAAgJ,QAAQ3E,SAASsG,SAAG,GAA5BE,QAAR,SAMJxL,EAAAA,EAAAA,IASM,MATNyL,GASM,gBARJzL,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,cACfA,EAAAA,EAAAA,IAME,SALAiG,KAAK,SA9Hf,sBAAAxF,EAAA,KAAAA,EAAA,GAAAC,GA+H0BC,EAAAgJ,QAAQ3E,SAASuG,IAAG7K,GACpC4K,IAAI,IACJC,IAAI,KACJzL,MAAM,c,iBAHUa,EAAAgJ,QAAQ3E,SAASuG,SAAG,GAA5BC,QAAR,aAUFxL,EAAAA,EAAAA,IAoCM,MApCN0L,GAoCM,EAnCJ1L,EAAAA,EAAAA,IAgBM,MAhBN2L,GAgBM,gBAfJ3L,EAAAA,EAAAA,IAAc,UAAV,SAAK,KACTA,EAAAA,EAAAA,IAaM,MAbN4L,GAaM,WAZJ5L,EAAAA,EAAAA,IAIS,UAjJvB,sBAAAS,EAAA,KAAAA,EAAA,GAAAC,GA6I+BC,EAAAgJ,QAAQ5C,MAAM8E,SAAQnL,GAAEZ,MAAM,mB,gBAC7CE,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,IACnB1J,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,IACnB1J,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,iBAHJ/I,EAAAgJ,QAAQ5C,MAAM8E,aAAQ,SAKvC7L,EAAAA,EAAAA,IAME,SALAiG,KAAK,SAnJrB,sBAAAxF,EAAA,KAAAA,EAAA,GAAAC,GAoJgCC,EAAAgJ,QAAQ5C,MAAM2C,MAAKhJ,GACnC4K,IAAI,IACJxL,MAAM,cACNsB,YAAY,K,iBAHIT,EAAAgJ,QAAQ5C,MAAM2C,WAAK,GAA3B8B,QAAR,WAQNxL,EAAAA,EAAAA,IAgBM,MAhBN8L,GAgBM,gBAfJ9L,EAAAA,EAAAA,IAAkB,UAAd,aAAS,KACbA,EAAAA,EAAAA,IAaM,MAbN+L,GAaM,WAZJ/L,EAAAA,EAAAA,IAIS,UAnKvB,sBAAAS,EAAA,KAAAA,EAAA,GAAAC,GA+J+BC,EAAAgJ,QAAQ3C,UAAU6E,SAAQnL,GAAEZ,MAAM,mB,gBACjDE,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,IACnB1J,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,IACnB1J,EAAAA,EAAAA,IAA4B,UAApB0J,MAAM,KAAI,KAAC,iBAHJ/I,EAAAgJ,QAAQ3C,UAAU6E,aAAQ,SAK3C7L,EAAAA,EAAAA,IAME,SALAiG,KAAK,SArKrB,sBAAAxF,EAAA,KAAAA,EAAA,GAAAC,GAsKgCC,EAAAgJ,QAAQ3C,UAAU0C,MAAKhJ,GACvC4K,IAAI,IACJxL,MAAM,cACNsB,YAAY,K,iBAHIT,EAAAgJ,QAAQ3C,UAAU0C,WAAK,GAA/B8B,QAAR,eAUVxL,EAAAA,EAAAA,IAOM,MAPNgM,GAOM,EANJhM,EAAAA,EAAAA,IAES,UAFDF,MAAM,YAAauB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAkL,cAAAlL,EAAAkL,gBAAAnL,K,gBAChCd,EAAAA,EAAAA,IAAgC,KAA7BF,MAAM,oBAAkB,UAlLrCwB,EAAAA,EAAAA,IAkL0C,mBAElCtB,EAAAA,EAAAA,IAES,UAFDF,MAAM,YAAauB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAmL,cAAAnL,EAAAmL,gBAAApL,K,gBAChCd,EAAAA,EAAAA,IAA4B,KAAzBF,MAAM,gBAAc,UArLjCwB,EAAAA,EAAAA,IAqLsC,8BArLtCO,EAAAA,EAAAA,IAAA,M,aA6LA,IACE0C,KAAM,cACNI,MAAO,CACL1C,QAAS,CACPgE,KAAMrB,MACNuH,QAASA,IAAM,IAEjBnK,OAAQ,CACNiE,KAAMqC,QACN6D,SAAS,GAEXjK,eAAgB,CACd+D,KAAMgC,OACNkE,QAASA,KAAA,CACPvC,KAAM,GACNW,SAAU,GACVI,MAAO,GACPK,WAAY,GACZlE,OAAQ,GAER9B,SAAU,CAAEsG,IAAK,EAAGC,IAAK,IACzBxE,MAAO,CAAE8E,SAAU,IAAKnC,MAAO,MAC/B1C,UAAW,CAAE6E,SAAU,IAAKnC,MAAO,UAIzCxB,IAAAA,GACE,MAAO,CACLyB,QAASyC,KAAKC,MAAMD,KAAKE,UAAUvH,KAAK7C,iBACxCmH,eAAgB,GAChBE,aAAcxE,KAAK9C,QACnB+C,SAAUD,KAAK7C,eAAe8C,UAAY,CAAEsG,IAAK,EAAGC,IAAK,IACzDlB,cAAe,CACb,CAAEZ,KAAM,SAAUlF,KAAM,SAAUkG,MAAOvK,EAAQ,OACjD,CAAEuJ,KAAM,WAAYlF,KAAM,WAAYkG,MAAOvK,EAAQ,OACrD,CAAEuJ,KAAM,OAAQlF,KAAM,OAAQkG,MAAOvK,EAAQ,OAC7C,CAAEuJ,KAAM,SAAUlF,KAAM,cAAekG,MAAOvK,EAAQ,OACtD,CAAEuJ,KAAM,UAAWlF,KAAM,cAAekG,MAAOvK,EAAQ,MACvD,CAAEuJ,KAAM,QAASlF,KAAM,cAAekG,MAAOvK,EAAQ,QAEvDwK,YAAa,CACX,WAAY,WAAY,cACxB,UAAW,OAAQ,eACnB,UAAW,UAEbI,iBAAkB,CAChB,QAAS,YAAa,OAAQ,SAEhChB,aAAc,CACZ,CAAEL,KAAM,IAAKlF,KAAM,QAAS4F,WAAY,WACxC,CAAEV,KAAM,IAAKlF,KAAM,OAAQ4F,WAAY,WACvC,CAAEV,KAAM,IAAKlF,KAAM,QAAS4F,WAAY,WACxC,CAAEV,KAAM,IAAKlF,KAAM,MAAO4F,WAAY,WACtC,CAAEV,KAAM,IAAKlF,KAAM,QAAS4F,WAAY,WACxC,CAAEV,KAAM,IAAKlF,KAAM,YAAa4F,WAAY,YAGlD,EACAoC,MAAO,CACLtK,QAAS,CACPuK,OAAAA,CAAQC,GACN1H,KAAKwE,aAAekD,CACtB,EACAC,WAAW,GAEbxK,eAAgB,CACdsK,OAAAA,CAAQG,GACN5H,KAAK4E,QAAUyC,KAAKC,MAAMD,KAAKE,UAAUK,GAC3C,EACAC,MAAM,IAIV/H,QAAS,CACPyE,UAAAA,GACE,GAAKvE,KAAKsE,eAAewD,OAElB,CACL,MAAMjM,EAAQmE,KAAKsE,eAAehE,cAClCN,KAAKwE,aAAexE,KAAK9C,QAAQ6G,QAAOU,GACtCA,EAAIjF,KAAKc,cAAcC,SAAS1E,IAChC4I,EAAIC,KAAKpE,cAAcC,SAAS1E,IAEpC,MAPEmE,KAAKwE,aAAexE,KAAK9C,OAQ7B,EACAuI,YAAAA,CAAaF,GACX,MAAMwC,EAAQ/H,KAAK4E,QAAQY,SAASwC,QAAQzC,IAC7B,IAAXwC,EACF/H,KAAK4E,QAAQY,SAASyC,KAAK1C,GAE3BvF,KAAK4E,QAAQY,SAAS0C,OAAOH,EAAO,EAExC,EACA1C,WAAAA,CAAYjB,GACV,MAAM2D,EAAQ/H,KAAK4E,QAAQ7C,OAAOiG,QAAQ5D,IAC3B,IAAX2D,EACF/H,KAAK4E,QAAQ7C,OAAOkG,KAAK7D,GAEzBpE,KAAK4E,QAAQ7C,OAAOmG,OAAOH,EAAO,EAEtC,EACAlC,UAAAA,CAAW3E,GACT,MAAM6G,EAAQ/H,KAAK4E,QAAQgB,MAAMoC,QAAQ9G,IAC1B,IAAX6G,EACF/H,KAAK4E,QAAQgB,MAAMqC,KAAK/G,GAExBlB,KAAK4E,QAAQgB,MAAMsC,OAAOH,EAAO,EAErC,EACA7B,eAAAA,CAAgBF,GACd,MAAM+B,EAAQ/H,KAAK4E,QAAQqB,WAAW+B,QAAQhC,IAC/B,IAAX+B,EACF/H,KAAK4E,QAAQqB,WAAWgC,KAAKjC,GAE7BhG,KAAK4E,QAAQqB,WAAWiC,OAAOH,EAAO,EAE1C,EACAZ,YAAAA,GAEEnH,KAAKT,MAAM,gBAAiB8H,KAAKC,MAAMD,KAAKE,UAAUvH,KAAK4E,WAC3D5E,KAAKqE,YACP,EACC6C,YAAAA,GACClH,KAAK4E,QAAU,CACbC,KAAM,GACNW,SAAU,GACVI,MAAO,GACPK,WAAY,GACZlE,OAAQ,GAER9B,SAAU,CAAEsG,IAAK,EAAGC,IAAK,IACzBxE,MAAO,CAAE8E,SAAU,IAAKnC,MAAO,MAC/B1C,UAAW,CAAE6E,SAAU,IAAKnC,MAAO,OAErC3E,KAAKsE,eAAiB,GACtBtE,KAAKwE,aAAexE,KAAK9C,QACzB8C,KAAKT,MAAM,gBACb,EACA8E,UAAAA,GACErE,KAAKT,MAAM,cACb,ICjUJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCTOxE,MAAM,gB,IADbC,IAAA,EAKgCD,MAAM,a,IALtCC,IAAA,EAQ4BD,MAAM,a,IACvBA,MAAM,kB,IAONA,MAAM,wB,GAhBjB,Y,IAkBgBA,MAAM,a,GAlBtB,c,IAAAC,IAAA,EAoBoDD,MAAM,gB,GApB1D,Y,IAmCWA,MAAM,0B,IAnCjBC,IAAA,EA8CgBD,MAAM,e,IACXA,MAAM,e,IACJA,MAAM,mB,IASNA,MAAM,sB,IACZA,MAAM,iB,IACJA,MAAM,mB,IA3DfC,IAAA,EA4DUD,MAAM,c,IA5DhBC,IAAA,EA6DkBD,MAAM,wB,IAYbA,MAAM,iB,IASRA,MAAM,iB,IACJA,MAAM,a,GAnFjB,c,IAwFaA,MAAM,uB,IAxFnBC,IAAA,EAoGuCD,MAAM,qB,GApG7C,c,IAwGgBA,MAAM,kB,IAIXA,MAAM,c,GA5GjB,kC,IA6HeA,MAAM,a,IACJA,MAAM,e,IACHA,MAAM,a,IAQXA,MAAM,gB,GAvIrB,Y,GAAA,Y,IAyJWA,MAAM,gB,IAQNA,MAAM,iB,IAEJA,MAAM,c,IAINA,MAAM,c,IAvKnBC,IAAA,EA0KsCD,MAAM,sB,IAE7BA,MAAM,qB,GA5KrB,c,IA8KkBA,MAAM,sB,IAGXA,MAAM,iB,GAjLnB,a,IAyLWA,MAAM,kC,IAEJA,MAAM,c,IAGNA,MAAM,qB,GA9LnB,Y,GAAA,c,IAiMkBA,MAAM,sB,IAGXA,MAAM,iB,IAORA,MAAM,iB,IAGJA,MAAM,iB,0JA7MjBJ,EAAAA,EAAAA,IA4OM,MA5ONC,GA4OM,EA3OJK,EAAAA,EAAAA,IAIM,OAJDF,OAFT8H,EAAAA,EAAAA,IAAA,CAEe,oBAA4BjH,EAAAuM,kB,gBACrClN,EAAAA,EAAAA,IAAiC,QAA3BF,MAAM,eAAa,WAH/BwB,EAAAA,EAAAA,IAGuC,KACjCgC,EAAAA,EAAAA,IAAGvC,EAAAoM,eAAgB,IACnB,GAAYxM,EAAAyM,eAAY,WAAxB1N,EAAAA,EAAAA,IAAmF,OAAnFU,GAA4C,KAACkD,EAAAA,EAAAA,IAAGvC,EAAAsM,WAAW1M,EAAAyM,eAAgB,IAAC,KALlFvL,EAAAA,EAAAA,IAAA,WAQgBlB,EAAA2M,aAiCR,WAKJ5N,EAAAA,EAAAA,IAgHM,MAhHN2D,GAgHM,EA/GJrD,EAAAA,EAAAA,IAmDQ,MAnDRuD,GAmDQ,EAlDNvD,EAAAA,EAAAA,IAOM,MAPNiH,GAOM,EANJjH,EAAAA,EAAAA,IAES,UAFDF,MAAM,WAAYuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAwM,aAAAxM,EAAAwM,eAAAzM,K,gBAC/Bd,EAAAA,EAAAA,IAAgC,QAA1BF,MAAM,aAAY,KAAC,IAlDrCwB,EAAAA,EAAAA,IAkD4C,uBAElCtB,EAAAA,EAAAA,IAEW,UAFHF,MAAM,kBAAmBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAAyM,iBAAiB7M,EAAA2M,cAAa,mBAKxEtN,EAAAA,EAAAA,IAwCF,MAxCEkH,GAwCF,EAvCJlH,EAAAA,EAAAA,IAsCM,MAtCNmH,GAsCM,EArCJnH,EAAAA,EAAAA,IAsBM,MAtBNsH,GAsBM,CArB0B3G,EAAA8M,aAA8B,WAC5D/N,EAAAA,EAAAA,IAWM,MAXN8H,GAWM,WAVJxH,EAAAA,EAAAA,IAOE,SANAyD,IAAI,cA/Dd,sBAAAhD,EAAA,KAAAA,EAAA,GAAAC,GAgEmBC,EAAA+M,aAAYhN,GACpBO,QAAK,cAjEhBC,EAAAA,EAAAA,KAAA,IAAAJ,IAiEwBC,EAAA4M,iBAAA5M,EAAA4M,mBAAA7M,IAAe,yBAjEvCI,EAAAA,EAAAA,KAAA,IAAAJ,IAkEsBC,EAAA6M,gBAAA7M,EAAA6M,kBAAA9M,IAAc,WACzB+M,OAAIpN,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA6M,gBAAA7M,EAAA6M,kBAAA9M,IACPhB,MAAM,gB,iBAJGa,EAAA+M,iBAMX1N,EAAAA,EAAAA,IAAsE,UAA9DF,MAAM,qBAAsBuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA4M,iBAAA5M,EAAA4M,mBAAA7M,KAAiB,MAC5Dd,EAAAA,EAAAA,IAAoE,UAA5DF,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA6M,gBAAA7M,EAAA6M,kBAAA9M,KAAgB,UAXpB,WAAxCpB,EAAAA,EAAAA,IAAoE,KAApE6H,IAAoEjE,EAAAA,EAAAA,IAAvB3C,EAAA2M,WAAW/I,MAAI,KAa5DvE,EAAAA,EAAAA,IAOM,MAPN0H,GAOM,CANW/G,EAAA8M,YA1EvB5L,EAAAA,EAAAA,IAAA,SA0EiC,WAAzBnC,EAAAA,EAAAA,IAES,UA5EjBK,IAAA,EA0EmCD,MAAM,aAAcuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA+M,eAAA/M,EAAA+M,iBAAAhN,IAAekF,MAAM,eAAc,UAGzFhG,EAAAA,EAAAA,IAES,UAFDF,MAAM,aAAcuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAoN,iBAAkB,GAAM/H,MAAM,eAAc,aAKnFhG,EAAAA,EAAAA,IAaM,MAbN6K,GAaM,EAZJ7K,EAAAA,EAAAA,IAWM,MAXNkL,GAWM,EAVJlL,EAAAA,EAAAA,IAAyE,OAApEF,MAAM,cAAc2E,UAAQ1D,EAAAiN,aAAarN,EAAA2M,WAAWxG,S,OApFjEqE,KAqFQnL,EAAAA,EAAAA,IAEO,QAFAF,OArFf8H,EAAAA,EAAAA,IAAA,4BAqFoD7G,EAAAkN,WAAa,S,QACpDlN,EAAAkN,YAAa,QAClB,IACAjO,EAAAA,EAAAA,IAKM,MALNoL,GAKM,EAJJpL,EAAAA,EAAAA,IAES,UAFDF,MAAM,YAAauB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAmN,eAAAnN,EAAAmN,iBAAApN,K,gBAChCd,EAAAA,EAAAA,IAAkC,QAA5BF,MAAM,cAAa,MAAE,IA1FvCwB,EAAAA,EAAAA,IA0F8C,cAElBX,EAAAwN,iBAAc,WAAhC1M,EAAAA,EAAAA,IAA8D2M,EAAA,CA5FxErO,IAAA,EA4F6CiE,QAAOjD,EAAAsN,kB,sBA5FpDxM,EAAAA,EAAAA,IAAA,mBAoGiBlB,EAAA2M,WAAWgB,YAAS,WAA/B5O,EAAAA,EAAAA,IAMM,MANN2L,GAMM,gBALJrL,EAAAA,EAAAA,IAAwC,MAApCF,MAAM,iBAAgB,aAAS,KACnCE,EAAAA,EAAAA,IAGM,OAHDF,MAAM,iBAAkBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAwN,gBAAgB5N,EAAA2M,WAAWgB,a,EAC7DtO,EAAAA,EAAAA,IAA+I,OAAzIC,IAAKU,EAAA2M,WAAWgB,UAAUlI,YAAYoI,OAAS7N,EAAA2M,WAAWgB,UAAUnI,aAAa,IAAIC,YAAYoI,MAAQrO,IAAKQ,EAAA2M,WAAWgB,UAAU/J,M,OAvGnJkH,KAwGUzL,EAAAA,EAAAA,IAAmE,OAAnE0L,IAAmEpI,EAAAA,EAAAA,IAAnC3C,EAAA2M,WAAWgB,UAAU/J,MAAI,SAxGnE1C,EAAAA,EAAAA,IAAA,QA4GM7B,EAAAA,EAAAA,IA2CM,MA3CN2L,GA2CM,gBA1CJ3L,EAAAA,EAAAA,IAAoC,MAAhCF,MAAM,iBAAgB,SAAK,mBAC/BJ,EAAAA,EAAAA,IAwCMyE,EAAAA,GAAA,MAtJdC,EAAAA,EAAAA,IA+GyBrD,EAAA0N,aAAR1K,K,WADTrE,EAAAA,EAAAA,IAwCM,OAtCHK,IAAKgE,EAAKtE,GACXK,OAjHV8H,EAAAA,EAAAA,IAAA,CAiHgB,YAAW,C,iBACyB7G,EAAA2N,qBAAqB3K,G,kBAAuChD,EAAA4N,mBAAmB5K,MAIxHiG,OAtHXC,EAAAA,EAAAA,IAsHkBlJ,EAAA6N,mBAAmB7K,IAC1B,sBAAoChD,EAAA2N,qBAAqB3K,GAAsDhD,EAAA4N,mBAAmB5K,GAAI,0BAAzE,6BAI7D1C,QAAKX,GAAE2D,EAAAC,MAAM,YAAaP,I,EAE3B/D,EAAAA,EAAAA,IASM,MATN8L,GASM,EARJ9L,EAAAA,EAAAA,IAOM,MAPN+L,GAOM,EANJ/L,EAAAA,EAAAA,IAEO,OAFPgM,IAEO1I,EAAAA,EAAAA,IADFS,EAAKQ,MAAI,IAEdvE,EAAAA,EAAAA,IAEO,QAFDF,OAlIpB8H,EAAAA,EAAAA,IAAA,CAkI0B,aAAY,iBAA2B7D,EAAK8K,MAAQ,MAAI,MACjEvL,EAAAA,EAAAA,IAAGS,EAAK8K,OAAS,GAAJ,QAIpB7O,EAAAA,EAAAA,IAcM,MAdN8O,GAcM,CAZI/N,EAAAgO,sBAAsBhL,KAAI,WADlCrE,EAAAA,EAAAA,IAMS,UA9IrBK,IAAA,EA0IcD,MAAM,UACLuB,SA3If6C,EAAAA,EAAAA,KAAAxD,GA2I2BK,EAAAiO,WAAWjL,EAAMrD,IAAM,WACrC,MAED,EA9IZuO,MAAApN,EAAAA,EAAAA,IAAA,QA+IY7B,EAAAA,EAAAA,IAKS,UAJPF,MAAM,aACLuB,SAjJf6C,EAAAA,EAAAA,KAAAxD,GAiJ2BK,EAAAmO,WAAWnL,IAAI,WAC7B,MAED,EApJZoL,OAAA,GAAAvD,O,SAyJM5L,EAAAA,EAAAA,IAIM,MAJNoP,GAIM,EAHJpP,EAAAA,EAAAA,IAES,UAFDF,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAsO,UAAAtO,EAAAsO,YAAAvO,KAAU,sBAlJ9B,WAAtBpB,EAAAA,EAAAA,IAmCM,MAnCNW,GAmCM,EAlCJL,EAAAA,EAAAA,IAKM,MALNM,GAKM,gBAJJN,EAAAA,EAAAA,IAAyC,MAArCF,MAAM,iBAAgB,cAAU,KACpCE,EAAAA,EAAAA,IAES,UAFDF,MAAM,eAAgBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAAuO,iBAAgB,oBAKvDtP,EAAAA,EAAAA,IASM,MATNO,GASM,gBARJb,EAAAA,EAAAA,IAOMyE,EAAAA,GAAA,MAxBdC,EAAAA,EAAAA,IAiB4BzD,EAAA4O,OAARC,K,WAAZ9P,EAAAA,EAAAA,IAOM,OAPsBK,IAAKyP,EAAK/P,GAAIK,MAAM,YAAauB,QAAKX,GAAEK,EAAA0O,SAASD,I,EAC3ExP,EAAAA,EAAAA,IAA8C,OAA9CuC,IAA8Ce,EAAAA,EAAAA,IAAnBkM,EAAKjL,MAAI,IACpCvE,EAAAA,EAAAA,IAAoE,QAA9DF,MAAM,cAAc2E,UAAQ1D,EAAAiN,aAAawB,EAAK1I,S,OAnB9DjE,IAoBsB9B,EAAA2O,iBAAiBF,GAAQ,MAAJ,WAAjC9P,EAAAA,EAAAA,IAAuE,OAAvEsD,GAA+D,OApBzEnB,EAAAA,EAAAA,IAAA,QAqBU7B,EAAAA,EAAAA,IAES,UAFDF,MAAM,kBAAmBuB,SArB3C6C,EAAAA,EAAAA,KAAAxD,GAqBuDK,EAAAyM,iBAAiBgC,IAAI,WAAG,QAErE,EAvBVvM,KAAA,EAAAzC,O,uBA2BMR,EAAAA,EAAAA,IAOM,OAPDF,MAAM,iBAAe,EACtBE,EAAAA,EAAAA,IAAW,QACXA,EAAAA,EAAAA,IAAW,QACXA,EAAAA,EAAAA,IAAW,QACXA,EAAAA,EAAAA,IAAW,QACXA,EAAAA,EAAAA,IAAW,QACXA,EAAAA,EAAAA,IAAW,cAEfA,EAAAA,EAAAA,IAOM,MAPNoD,GAOM,EANJpD,EAAAA,EAAAA,IAES,UAFDF,MAAM,kBAAmBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAgP,qBAAsB,I,gBAC5D3P,EAAAA,EAAAA,IAA+B,QAAzBF,MAAM,YAAW,KAAC,IArClCwB,EAAAA,EAAAA,IAqCyC,uBAEjCtB,EAAAA,EAAAA,IAES,UAFDF,MAAM,kBAAmBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAiP,iBAAkB,I,gBACxD5P,EAAAA,EAAAA,IAAgC,QAA1BF,MAAM,YAAW,MAAE,IAxCnCwB,EAAAA,EAAAA,IAwC0C,yBAwH3BX,EAAAgP,sBAAmB,WAA9BjQ,EAAAA,EAAAA,IAsBM,OAtLVK,IAAA,EAgKoCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,KAhKhEyD,EAAAA,EAAAA,KAAAxD,GAgKuEC,EAAAgP,qBAAsB,GAAH,Y,EACpF3P,EAAAA,EAAAA,IAoBM,MApBN6P,GAoBM,gBAnBJ7P,EAAAA,EAAAA,IAA4C,MAAxCF,MAAM,eAAc,mBAAe,KACvCE,EAAAA,EAAAA,IAGM,MAHN8P,GAGM,gBAFJ9P,EAAAA,EAAAA,IAAwC,SAAjC+P,IAAI,YAAW,cAAU,cAChC/P,EAAAA,EAAAA,IAAyE,SAAlEP,GAAG,WArKpB,sBAAAgB,EAAA,MAAAA,EAAA,IAAAC,GAqKwCC,EAAAqP,YAAWtP,GAAEU,YAAY,mB,iBAAzBT,EAAAqP,kBAEhChQ,EAAAA,EAAAA,IAEM,MAFNiQ,GAEM,EADNjQ,EAAAA,EAAAA,IAAmE,UAA1DqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAmP,sBAAAnP,EAAAmP,wBAAApP,KAAsB,0BAE3BH,EAAAwP,oBAAiB,WAA5BzQ,EAAAA,EAAAA,IAMM,MANN0Q,GAMM,gBALJpQ,EAAAA,EAAAA,IAAmD,MAA/CF,MAAM,kBAAiB,uBAAmB,KAC9CE,EAAAA,EAAAA,IAGM,MAHNqQ,GAGM,EAFJrQ,EAAAA,EAAAA,IAAsI,OAAhIC,IAAKU,EAAAwP,kBAAkB/J,YAAYoI,OAAS7N,EAAAwP,kBAAkBhK,aAAa,IAAIC,YAAYoI,MAAQrO,IAAKQ,EAAAwP,kBAAkB5L,M,OA7K5I+L,KA8KYtQ,EAAAA,EAAAA,IAAoE,OAApEuQ,IAAoEjN,EAAAA,EAAAA,IAAhC3C,EAAAwP,kBAAkB5L,MAAI,SA9KtE1C,EAAAA,EAAAA,IAAA,QAiLQ7B,EAAAA,EAAAA,IAGM,MAHNwQ,GAGM,EAFJxQ,EAAAA,EAAAA,IAA+E,UAAvEF,MAAM,aAAcuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAgP,qBAAsB,IAAO,WAChE3P,EAAAA,EAAAA,IAA8G,UAAtGF,MAAM,cAAeqD,UAAWxC,EAAAqP,cAAgBrP,EAAAwP,kBAAoB9O,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA0P,YAAA1P,EAAA0P,cAAA3P,KAAY,SAAM,EAnL/G4P,YAAA7O,EAAAA,EAAAA,IAAA,OAwLelB,EAAAgQ,sBAAmB,WAA9BjR,EAAAA,EAAAA,IAgBM,OAxMVK,IAAA,EAwLoCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,KAxLhEyD,EAAAA,EAAAA,KAAAxD,GAwLuEC,EAAAgQ,qBAAsB,GAAH,Y,EACpF3Q,EAAAA,EAAAA,IAcM,MAdN4Q,GAcM,gBAbJ5Q,EAAAA,EAAAA,IAA6C,MAAzCF,MAAM,eAAc,oBAAgB,KACxCE,EAAAA,EAAAA,IAEM,MAFN6Q,GAEM,WADJ7Q,EAAAA,EAAAA,IAA8G,SA5LxH,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GA4L0BC,EAAAmQ,eAAcpQ,GAAGG,QAAKJ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAmP,sBAAAnP,EAAAmP,wBAAApP,IAAsBM,YAAY,qC,iBAA1DT,EAAAmQ,qBAElB9Q,EAAAA,EAAAA,IAKM,MALN+Q,GAKM,gBAJJrR,EAAAA,EAAAA,IAGMyE,EAAAA,GAAA,MAlMhBC,EAAAA,EAAAA,IA+L8BzD,EAAAqQ,kBAARjN,K,WAAZrE,EAAAA,EAAAA,IAGM,OAHiCK,IAAKgE,EAAKtE,GAAIK,MAAM,mBAAoBuB,QAAKX,GAAEK,EAAAkQ,gBAAgBlN,I,EACpG/D,EAAAA,EAAAA,IAA+F,OAAzFC,IAAK8D,EAAKqC,YAAYoI,OAASzK,EAAKoC,aAAa,IAAIC,YAAYoI,MAAQrO,IAAK4D,EAAKQ,M,OAhMrG2M,KAiMYlR,EAAAA,EAAAA,IAAuD,OAAvDmR,IAAuD7N,EAAAA,EAAAA,IAAnBS,EAAKQ,MAAI,MAjMzD6M,O,SAoMQpR,EAAAA,EAAAA,IAEM,MAFNqR,GAEM,EADJrR,EAAAA,EAAAA,IAA+E,UAAvEF,MAAM,aAAcuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAgQ,qBAAsB,IAAO,kBArM1E9O,EAAAA,EAAAA,IAAA,OA0MelB,EAAA2Q,yBAAsB,WAAjC5R,EAAAA,EAAAA,IASM,OAnNVK,IAAA,EA0MuCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,KA1MnEyD,EAAAA,EAAAA,KAAAxD,GA0M0EC,EAAA2Q,wBAAyB,GAAH,Y,EAC1FtR,EAAAA,EAAAA,IAOM,MAPNuR,GAOM,gBANJvR,EAAAA,EAAAA,IAAwC,MAApCF,MAAM,eAAc,eAAW,KACnCE,EAAAA,EAAAA,IAAgG,SAA7F,qCAAiCsD,EAAAA,EAAAA,IAAG3C,EAAA6Q,cAAcjN,MAAO,mCAAgC,IAC5FvE,EAAAA,EAAAA,IAGM,MAHNyR,GAGM,EAFJzR,EAAAA,EAAAA,IAAkF,UAA1EF,MAAM,aAAcuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAA2Q,wBAAyB,IAAO,WACnEtR,EAAAA,EAAAA,IAAiF,UAAzEF,MAAM,yBAA0BuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA2Q,mBAAA3Q,EAAA2Q,qBAAA5Q,KAAmB,kBAhN5Ee,EAAAA,EAAAA,IAAA,OAqNYlB,EAAAiP,kBAAe,WADvBnO,EAAAA,EAAAA,IAKEkQ,EAAA,CAzNN5R,IAAA,EAsNOiC,OAAQrB,EAAAiP,gBACR5L,QAAKvD,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAiP,iBAAkB,GACzBgC,SAAQ7Q,EAAA8Q,kB,gCAxNfhQ,EAAAA,EAAAA,IAAA,OA2NYlB,EAAAoN,kBAAe,WADvBtM,EAAAA,EAAAA,IAKEqQ,EAAA,CA/NN/R,IAAA,EA4NOiC,OAAQrB,EAAAoN,gBACRyB,KAAM7O,EAAA2M,WACNtJ,QAAKvD,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAoN,iBAAkB,I,4BA9NhClM,EAAAA,EAAAA,IAAA,OAiOUlB,EAAAoR,iBAAc,WADpBtQ,EAAAA,EAAAA,IAMA2M,EAAA,CAtOJrO,IAAA,EAkOKiC,OAAQrB,EAAAoR,eACRvC,KAAM7O,EAAA2M,WACNtJ,QAAKvD,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAoR,gBAAiB,GACxBnO,WAAW7C,EAAAwN,iB,yCArOhB1M,EAAAA,EAAAA,IAAA,OAwOQlB,EAAAqR,oBAAiB,WADvBvQ,EAAAA,EAAAA,IAKAwQ,EAAA,CA5OFlS,IAAA,EAyOE0D,IAAI,gBACH8L,MAAO5O,EAAA4O,MACPvL,QAAKvD,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAqR,mBAAoB,I,oBA3O9BnQ,EAAAA,EAAAA,IAAA,Q,2CCGA,MAAMqQ,GAAiB,CACrBC,OAAQC,0CACRC,WAAYD,yCACZE,UAAWF,yBACXG,cAAeH,qCACfI,kBAAmBJ,cACnBK,MAAOL,4CAGHM,IAAMC,EAAAA,GAAAA,IAAcT,IACbU,IAAKC,EAAAA,GAAAA,IAAaH,ICTxBI,eAAezD,GAASG,SACvBuD,EAAAA,GAAAA,KAAOC,EAAAA,GAAAA,IAAIJ,GAAI,QAASpD,EAAK/P,IAAK+P,EAC1C,CAEOsD,eAAeG,KACpB,MAAMC,QAAsBC,EAAAA,GAAAA,KAAQC,EAAAA,GAAAA,IAAWR,GAAI,UACnD,OAAOM,EAAcG,KAAK1K,KAAIqK,GAAOA,EAAI9K,QAC3C,CAEO4K,eAAeQ,GAAWC,SACzBC,EAAAA,GAAAA,KAAUR,EAAAA,GAAAA,IAAIJ,GAAI,QAASW,GACnC,C,UCVWzT,MAAM,c,IAUNA,MAAM,c,GAfjB,a,IAAAC,IAAA,EA0CwBD,MAAM,iB,IA1C9BC,IAAA,EA2C6BD,MAAM,sB,IA3CnCC,IAAA,EA8CsCD,MAAM,6B,IAG/BA,MAAM,+B,IACJA,MAAM,qB,GAlDrB,2B,IAAAC,IAAA,EA+DqDD,MAAM,gB,GA/D3D,Q,GAAA,Q,IAAAC,IAAA,EAgFwBD,MAAM,Y,IAKjBA,MAAM,iB,GArFnB,a,gCACamE,EAAAjC,SAAM,WAAjBtC,EAAAA,EAAAA,IAgGM,OAjGRK,IAAA,EACqBD,MAAM,gBAAiBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAE2D,EAAAC,MAAM,W,EACrDtE,EAAAA,EAAAA,IA8FM,OA9FDF,MAAM,gBAAiBuB,QAAKZ,EAAA,KAAAA,EAAA,IAFrCyD,EAAAA,EAAAA,KAE+B,QAAW,Y,gBACpClE,EAAAA,EAAAA,IAAwC,MAApCF,MAAM,eAAc,eAAW,KAEnCE,EAAAA,EAAAA,IAQM,MARNL,GAQM,cAPJK,EAAAA,EAAAA,IAAwC,SAAjC+P,IAAI,YAAW,cAAU,cAChC/P,EAAAA,EAAAA,IAKE,SAJAP,GAAG,WARb,sBAAAgB,EAAA,KAAAA,EAAA,GAAAC,GASmB+S,EAAAC,SAAQhT,GACjBuF,KAAK,OACL7E,YAAY,mB,iBAFHqS,EAAAC,eAMb1T,EAAAA,EAAAA,IAUM,MAVNI,GAUM,cATJJ,EAAAA,EAAAA,IAAmD,SAA5C+P,IAAI,YAAW,yBAAqB,KAC3C/P,EAAAA,EAAAA,IAOE,SANAyD,IAAI,eACJhE,GAAG,WACHwG,KAAK,OACL0N,OAAO,OACNC,SAAMnT,EAAA,KAAAA,EAAA,OAAAK,IAAE2S,EAAAI,kBAAAJ,EAAAI,oBAAA/S,IACRqC,SAAUsQ,EAAAK,aAAeL,EAAAC,SAAS7G,Q,QAvB7CxM,MAAA,eA2BML,EAAAA,EAAAA,IAaM,OAbDF,MAAM,uBAAqB,EAC9BE,EAAAA,EAAAA,IAA6B,UAAzB,yBACJA,EAAAA,EAAAA,IAIoB,OAJfF,MAAM,kBAAiB,8FAK5BE,EAAAA,EAAAA,IAKK,YAJHA,EAAAA,EAAAA,IAAoD,UAAhD,gDACJA,EAAAA,EAAAA,IAAsD,UAAlD,kDACJA,EAAAA,EAAAA,IAA2C,UAAvC,uCACJA,EAAAA,EAAAA,IAA+D,UAA3D,8DAAsD,IAInDyT,EAAAM,QAAK,WAAhBrU,EAAAA,EAAAA,IAAyD,MAAzDY,IAAyDgD,EAAAA,EAAAA,IAAdmQ,EAAAM,OAAK,KA1CtDlS,EAAAA,EAAAA,IAAA,OA2CiB4R,EAAAK,aAAU,WAArBpU,EAAAA,EAAAA,IAA+E,MAA/Ea,GAAkD,6BA3CxDsB,EAAAA,EAAAA,IAAA,OA8Cc4R,EAAAO,yBAAsB,WAAjCtU,EAAAA,EAAAA,IAiDS,MAjDTc,GAiDS,cAhDJR,EAAAA,EAAAA,IAA+B,UAA3B,0BAAsB,mBAC1BA,EAAAA,EAAAA,IAA0D,SAAvD,uDAAmD,KACtDA,EAAAA,EAAAA,IAmCM,MAnCNuC,GAmCM,EAlCJvC,EAAAA,EAAAA,IAYM,MAZN6C,GAYM,gBAXJnD,EAAAA,EAAAA,IAUMyE,EAAAA,GAAA,MA7DlBC,EAAAA,EAAAA,IAoDsCqP,EAAAQ,qBApDtC,CAoDsBlQ,EAAM+I,M,WADhBpN,EAAAA,EAAAA,IAUM,OARHK,IAAK+M,EACNhN,OAtDd8H,EAAAA,EAAAA,IAAA,CAsDoB,mBAAkB,CAAAmC,SACJ0J,EAAAS,yBAA2BpH,KAC9CzL,QAAKX,GAAE+S,EAAAS,uBAAyBpH,EAChCqH,aAAUzT,GAAE+S,EAAAW,sBAAwBtH,EACpCuH,aAAU5T,EAAA,KAAAA,EAAA,GAAAC,GAAE+S,EAAAW,sBAAwB,Q,QAElCrQ,EAAKQ,MAAI,GA5D1BvB,O,QA+D+C,OAA1ByQ,EAAAW,wBAAqB,WAAhC1U,EAAAA,EAAAA,IAoBM,MApBNuD,GAoBM,CAjBIwQ,EAAAQ,oBAAoBR,EAAAW,uBAAuBhO,YAAYC,SAAM,WADrE3G,EAAAA,EAAAA,IAIE,OArEdK,IAAA,EAmEeE,IAAKwT,EAAAQ,oBAAoBR,EAAAW,uBAAuBhO,WAAWC,OAC5DlG,IAAI,gB,OApElBiD,KAyEyBqQ,EAAAQ,oBAAoBR,EAAAW,uBAAuBjO,YAAsCsN,EAAAQ,oBAAoBR,EAAAW,uBAAuBjO,WAAU,IAAKC,YAAYC,SAAM,WAD1K3G,EAAAA,EAAAA,IAKE,OA7EdK,IAAA,EA2EeE,IAAKwT,EAAAQ,oBAAoBR,EAAAW,uBAAuBjO,WAAW,GAAGC,WAAWC,OAC1ElG,IAAI,mB,OA5ElBkD,OAAA,WAgFY3D,EAAAA,EAAAA,IAEM,MAFN6D,GAA6B,6BAhFzC1B,EAAAA,EAAAA,IAAA,UAqFQ7B,EAAAA,EAAAA,IASM,MATNiH,GASM,EARJjH,EAAAA,EAAAA,IAA4E,UAApEF,MAAM,aAAcuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAE2S,EAAAa,0BAAAb,EAAAa,4BAAAxT,KAA0B,WAC7Dd,EAAAA,EAAAA,IAMS,UALPF,MAAM,cACLuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAE2S,EAAAc,2BAAAd,EAAAc,6BAAAzT,IACPqC,SAAqC,OAA3BsQ,EAAAS,wBACZ,YAED,EA7FVhN,UAAArF,EAAAA,EAAAA,IAAA,aAAAA,EAAAA,EAAAA,IAAA,M,uFAwGA,IACA0C,KAAM,cACNI,MAAO,CACL3C,OAAQ,CACNiE,KAAMqC,QACNpC,UAAU,IAGdsO,MAAO,CAAC,QAAS,UACjBC,KAAAA,CAAM9P,GAAO,KAAE+P,IACb,MAAMhB,GAAWjQ,EAAAA,GAAAA,IAAI,IACfsQ,GAAQtQ,EAAAA,GAAAA,IAAI,MACZqQ,GAAarQ,EAAAA,GAAAA,KAAI,GACjBkR,GAAelR,EAAAA,GAAAA,IAAI,IACnBmR,GAAenR,EAAAA,GAAAA,IAAI,MACnBuQ,GAAyBvQ,EAAAA,GAAAA,KAAI,GAC7BwQ,GAAsBxQ,EAAAA,GAAAA,IAAI,IAC1ByQ,GAAyBzQ,EAAAA,GAAAA,IAAI,MAC7BoR,GAAkBpR,EAAAA,GAAAA,IAAI,MAEtBqR,EAAiBC,IACrB,MAAMC,EAAcD,EAAKlI,OACzB,IAAKmI,GAA6C,cAA9BA,EAAY3P,cAA+B,OAAO,KAGtE,MAAM4P,EAAQ,8EACR/P,EAAQ8P,EAAY9P,MAAM+P,GAEhC,OAAK/P,GAAUA,EAAMgQ,OAAO3Q,KAAKsI,OAE1B,CACLtI,KAAMW,EAAMgQ,OAAO3Q,KAAKsI,OACxBgC,MAAO3J,EAAMgQ,OAAOC,SAAWC,SAASlQ,EAAMgQ,OAAOC,UAAY,EACjEE,QAASnQ,EAAMgQ,OAAO1L,IAAMtE,EAAMgQ,OAAO1L,IAAIqD,YAASyI,GALR,IAM/C,EAGGC,EAAwBC,IAC5B,IAAKA,EAASpO,UAAW,OAAO,EAChC,MAAMqO,EAAWD,EAASpO,UAAU/B,cAG9BqQ,EAAcD,EAASnQ,SAAS,aAChCqQ,EAAaF,EAASnQ,SAAS,aAAemQ,EAASnQ,SAAS,OAChEsQ,EAAiBH,EAASnQ,SAAS,gBAGnCuQ,EAAiBJ,EAASnQ,SAAS,yBAEzC,OAAQoQ,IAAgBC,GAAcC,IAAoBC,CAAc,EAGpEC,EAA0BhD,UAC9B,MAAMiD,EAAa,GAEnB,IAAK,MAAMhS,KAAQvB,EACjB,IACE,MAAMwT,QAAiBC,EAAAA,EAAMC,IAAI,wCAAyC,CACxEC,OAAQ,CACNC,EAAG,KAAKrS,EAAKQ,KAAKU,QAAQ,KAAM,OAChCoR,OAAQ,WAIZ,GAAIL,EAAS9N,KAAKA,KAAK1G,OAAS,EAAG,CACjC,MAAMgU,EAAWQ,EAAS9N,KAAKA,KAAK,GAChCqN,EAAqBC,IACvBO,EAAW/I,KAAK,IACXwI,EACH3G,MAAO9K,EAAK8K,MACZyH,aAAcvS,EAAKQ,MAGzB,CACF,CAAE,MAAOwP,GACPzN,QAAQyN,MAAM,wBAAwBhQ,EAAKQ,OAAQwP,EACrD,CAGF,OAAOgC,CAAU,EAGbQ,EAAeA,CAACC,EAAcC,KAClC,MAAMC,EAAgBF,EAAaG,MAAM,MACtC7N,QAAOiM,IACN,MAAM6B,EAAU7B,EAAKlI,OACrB,OAAO+J,GAAqC,cAA1BA,EAAQvR,aAA6B,IAGrDwR,EAAe,GAEfC,EAAoB,GAY1B,OAXAJ,EAAcK,SAAQhC,IACpB,MAAMS,EAAWV,EAAcC,GAC/B,GAAIS,EAAU,CACZ,MAAMjR,EAAOiR,EAASjR,KAAKc,cAC3ByR,EAAkB9J,KAAKzI,GAClBkS,EAAcO,MAAKC,GAAKA,EAAE1S,KAAKc,gBAAkBd,KACpDsS,EAAa7J,KAAK+H,EAAKlI,OAE3B,KAGK,CAAEgK,eAAc,EAGnBK,EAAkBpE,UACtB,MAAMqE,EAAQnO,EAAK2N,MAAM,MAAM7N,QAAOiM,GAAQA,EAAKlI,SACnD,IAAIyB,EAAY,KAChB,MAAM9L,EAAQ,GACR4U,EAAU,GAGVC,EAAwD,cAAnCF,EAAM,IAAItK,OAAOxH,cAC5C,GAAIgS,GAAsBF,EAAM3V,OAAS,EAAG,CAC1C,MAAM8V,EAAgBH,EAAM,GACtBI,EAAgBzC,EAAcwC,GACpC,GAAIC,EACF,IACE,MAAMvB,QAAiBC,EAAAA,EAAMC,IAAI,wCAAyC,CACxEC,OAAQ,CACNC,EAAG,KAAKmB,EAAchT,KAAKU,QAAQ,KAAM,OACzCoR,OAAQ,WAIZ,KAAIL,EAAS9N,KAAKA,KAAK1G,OAAS,GAK9B,MAAM,IAAIgW,MAAM,wBAAwBD,EAAchT,QAJtD+J,EAAY0H,EAAS9N,KAAKA,KAAK,GAC/BoG,EAAUO,MAAQ,EAClBP,EAAUmJ,aAAc,CAI5B,CAAE,MAAO1D,GACPzN,QAAQyN,MAAM,wBAAwBwD,EAAchT,OAAQwP,EAC9D,CAEFoD,EAAMlK,OAAO,EAAG,EAClB,CAGA,IAAK,MAAM8H,KAAQoC,EAAO,CACxB,MAAM3B,EAAWV,EAAcC,GAC3BS,GACFhT,EAAMwK,KAAKwI,EAEf,CAGA,MAAMkC,EAAiB,GACjBC,EAAqB,IAAIC,IAG/B,IAAK,MAAM7T,KAAQvB,EACjB,IAEE,GAAI8L,GAAavK,EAAKQ,KAAKc,gBAAkBiJ,EAAU/J,KAAKc,cAC1D,eAGI,IAAIwS,SAAQC,GAAWC,WAAWD,EAAS,OACjD,MAAM9B,QAAiBC,EAAAA,EAAMC,IAAI,wCAAyC,CACxEC,OAAQ,CACNC,EAAG,KAAKrS,EAAKQ,KAAKU,QAAQ,KAAM,OAChCoR,OAAQ,WAIZ,GAAIL,EAAS9N,KAAKA,KAAK1G,OAAS,EAAG,CACjC,MAAMgU,EAAWQ,EAAS9N,KAAKA,KAAK,GACpCsN,EAAS3G,MAAQ9K,EAAK8K,MAEjB8I,EAAmBK,IAAIxC,EAASjR,QACnCmT,EAAe1K,KAAKwI,GACpBmC,EAAmBM,IAAIzC,EAASjR,MAEpC,KAAO,CAEL,MAAM2T,QAAyBjC,EAAAA,EAAMC,IAAI,wCAAyC,CAChFC,OAAQ,CACNC,EAAGrS,EAAKQ,KACR8R,OAAQ,WAIZ,KAAI6B,EAAiBhQ,KAAKA,KAAK1G,OAAS,GAStC,MAAM,IAAIgW,MAAM,mBAAmBzT,EAAKQ,QATC,CACzC,MAAMiR,EAAW0C,EAAiBhQ,KAAKA,KAAK,GAC5CsN,EAAS3G,MAAQ9K,EAAK8K,MAEjB8I,EAAmBK,IAAIxC,EAASjR,QACnCmT,EAAe1K,KAAKwI,GACpBmC,EAAmBM,IAAIzC,EAASjR,MAEpC,CAGF,CACF,CAAE,MAAOwP,GAEF4D,EAAmBK,IAAIjU,EAAKQ,OAC/B6S,EAAQpK,KAAK,GAAGjJ,EAAKQ,OAEzB,CAGF,MAAO,CACL+J,YACA9L,MAAOkV,EACPN,UACD,EAGGvD,EAAmBf,UACvB,MAAMqF,EAAOC,EAAMC,OAAOC,MAAM,GAChC,GAAKH,EACL,GAAKzE,EAAShK,MAAMmD,OAApB,CAKAiH,EAAWpK,OAAQ,EACnBqK,EAAMrK,MAAQ,KACdiL,EAAajL,MAAQ,GAErB,IACE,MAAMV,QAAamP,EAAKnP,OAClBuP,QAAiBrB,EAAgBlO,GAGvC,IAAKuP,EAASjK,UAAW,CACvB,MAAMyH,QAAmBD,EAAwByC,EAAS/V,OAC1D,GAAIuT,EAAWvU,OAAS,EAKtB,OAJAyS,EAAoBvK,MAAQqM,EAC5BlB,EAAgBnL,MAAQ6O,EACxBvE,EAAuBtK,OAAQ,OAC/BoK,EAAWpK,OAAQ,GAGnB,MAAM,IAAI8N,MAAM,6CAEpB,CAEAgB,EAAeD,EAAUvP,EAC3B,CAAE,MAAOyP,GACP1E,EAAMrK,MAAQ+O,aAAejB,MAAQiB,EAAIC,QAAU,8BACnDpS,QAAQyN,MAAM,gBAAiB0E,EACjC,CAAE,QACKzE,EAAuBtK,QAC1BoK,EAAWpK,OAAQ,EACfkL,EAAalL,QACfkL,EAAalL,MAAMA,MAAQ,IAGjC,CAnCA,MAFEqK,EAAMrK,MAAQ,gCAqChB,EAGI8O,EAAiBA,CAACD,EAAU/B,KAChC,MAAM,aAAEK,GAAiBN,EAAaC,EAAc+B,EAAS/V,OAE7D,GAAIqU,EAAarV,OAAS,EAAG,CAC3B,IAAIkX,EAAU,kBAAkB7B,EAAarV,aAAaqV,EAAa8B,MAAM,EAAG,GAAG5P,KAAK,QACpF8N,EAAarV,OAAS,IAAGkX,GAAW,YAAY7B,EAAarV,OAAS,UAC1EoX,MAAM,gCAAgCF,IACxC,CAEIH,EAASnB,QAAQ5V,OAAS,GAC5BoX,MAAM,+DAA+DL,EAASnB,QAAQuB,MAAM,EAAG,IAAI5P,KAAK,QAAQwP,EAASnB,QAAQ5V,OAAS,GAAK,YAAY+W,EAASnB,QAAQ5V,OAAS,UAAY,MAGnMkT,EAAK,SAAU,CACbnQ,KAAMmP,EAAShK,MACf4E,UAAWiK,EAASjK,UACpB9L,MAAO+V,EAAS/V,MAChBsE,OAAQyR,EAASjK,WAAWuK,gBAAkB,GAC9CC,SAAS,IAAIC,MAAOC,cACpBnC,iBAGFnC,EAAK,QAAQ,EAGTN,GAAwB3Q,EAAAA,GAAAA,IAAI,MAE5B8Q,EAA4BA,KAChC,GAAqC,OAAjCL,EAAuBxK,OAAkBmL,EAAgBnL,MAAO,CAClE,MAAMyG,EAAoB8D,EAAoBvK,MAAMwK,EAAuBxK,OAC3EyG,EAAkBsH,aAAc,EAChCtH,EAAkBtB,MAAQ,EAG1B,MAAMoK,EAAwBpE,EAAgBnL,MAAMlH,MAAMsG,QACxD/E,GAAQA,EAAKQ,KAAKc,gBAAkB8K,EAAkB5L,KAAKc,gBAG7DmT,EAAe,CACblK,UAAW6B,EACX3N,MAAO,CAAC2N,KAAsB8I,GAC9B7B,QAASvC,EAAgBnL,MAAM0N,SAC9B,GACL,CAEA8B,GAAyB,EAGrB5E,EAA2BA,KAC/B4E,IACItE,EAAalL,QACfkL,EAAalL,MAAMA,MAAQ,GAC7B,EAGIwP,EAA0BA,KAC9BlF,EAAuBtK,OAAQ,EAC/BuK,EAAoBvK,MAAQ,GAC5BwK,EAAuBxK,MAAQ,KAC/BmL,EAAgBnL,MAAQ,KACxBoK,EAAWpK,OAAQ,CAAK,EAG1B,MAAO,CACLgK,WACAK,QACAD,aACAa,eACAC,eACAf,mBACAG,yBACAI,wBACAH,sBACAC,yBACAK,4BACAD,2BAEJ,GC9aA,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCPWxU,MAAM,8B,IAGJA,MAAM,a,IAEJA,MAAM,a,GAPrB,c,IASkBA,MAAM,c,IAIXA,MAAM,iB,IAEJA,MAAM,kB,IAKRA,MAAM,iB,GApBnB,a,gCACqCmE,EAAAjC,SAAM,WAAvCtC,EAAAA,EAAAA,IA0BM,OA3BVK,IAAA,EACSD,MAAM,gBAA+BuB,QAAKZ,EAAA,KAAAA,EAAA,IADnDyD,EAAAA,EAAAA,KAAA,IAAApD,IAC0DC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,IAAK,Y,EACzDd,EAAAA,EAAAA,IAwBM,MAxBNL,GAwBM,cAvBJK,EAAAA,EAAAA,IAAwC,MAApCF,MAAM,eAAc,eAAW,KAEnCE,EAAAA,EAAAA,IAMM,MANNI,GAMM,EALJJ,EAAAA,EAAAA,IAA4C,WAAAsD,EAAAA,EAAAA,IAArCW,EAAAuL,MAAMjL,MAAQ,iBAAJ,IACjBvE,EAAAA,EAAAA,IAGM,MAHNK,GAGM,EAFJL,EAAAA,EAAAA,IAAyE,OAApEF,MAAM,cAAc2E,UAAQ1D,EAAAiN,aAAa/J,EAAAuL,MAAM1I,QAAU,K,OAR1ExG,KASYN,EAAAA,EAAAA,IAA0D,OAA1DO,IAA0D+C,EAAAA,EAAAA,IAA9BvC,EAAAkN,YAAa,aAAU,QAIvDjO,EAAAA,EAAAA,IAKM,MALNQ,GAKM,cAJJR,EAAAA,EAAAA,IAAuB,UAAnB,kBAAc,KAClBA,EAAAA,EAAAA,IAEM,MAFNuC,GAEM,EADJvC,EAAAA,EAAAA,IAAkC,YAAAsD,EAAAA,EAAAA,IAA1BvC,EAAAoY,mBAAiB,QAI7BnZ,EAAAA,EAAAA,IAKM,MALN6C,GAKM,EAJJ7C,EAAAA,EAAAA,IAAyD,UAAjDF,MAAM,aAAcuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,KAAO,WAC1Cd,EAAAA,EAAAA,IAES,UAFDF,MAAM,aAAcuB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAqY,gBAAArY,EAAAqY,kBAAAtY,IAAiBqC,UAAWc,EAAAuL,MAAMhN,OAAOhB,QAAQ,oBAEpF,EAxBVwB,YAAAnB,EAAAA,EAAAA,IAAA,M,6BA8BE,IACE0C,KAAM,cACNI,MAAO,CACL3C,OAAQsG,QACRkH,KAAM,CACJvJ,KAAMgC,OACNkE,QAASA,KAAA,CACP5H,KAAM,GACNuC,OAAQ,GACRtE,MAAO,GACP8L,UAAW,SAIjBnG,SAAU,CACR8F,UAAAA,GACE,OAAKlJ,KAAKyK,MAAMhN,MACTuC,KAAKyK,KAAKhN,MAAM6W,QAAO,CAACC,EAAOvV,IAASuV,GAASvV,EAAK8K,OAAS,IAAI,GAD5C,CAEhC,EACAsK,iBAAAA,GACE,IAAKpU,KAAKyK,MAAMhN,MAAO,MAAO,GAE9B,MAAM+W,EAAa,CAAC,EACpBxU,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAMhE,EAAM,GAAGgE,EAAKQ,SAASR,EAAKyF,KAAKK,eAAiB,aACxD0P,EAAWxZ,IAAQwZ,EAAWxZ,IAAQ,IAAMgE,EAAK8K,OAAS,EAAE,IAG9D,MAAMJ,EAAcxG,OAAOuR,KAAKD,GAC7BE,MAAK,CAACC,EAAGC,IAAMD,EAAEE,cAAcD,KAC/BhR,KAAIpE,GAAQ,GAAGgV,EAAWhV,OAAUA,MAEvC,IAAIsV,EAAW,GAOf,OANI9U,KAAKyK,KAAKlB,YACZuL,EAAS7M,KAAK,iBAAiBjI,KAAKyK,KAAKlB,UAAU/J,SAASQ,KAAKyK,KAAKlB,UAAU9E,KAAKK,eAAiB,cACtGgQ,EAAS7M,KAAK,KAGhB6M,EAAWA,EAASC,OAAOrL,GACpBoL,EAAS9Q,KAAK,KACvB,GAEFlE,QAAS,CACP2B,KAAAA,GACEzB,KAAKT,MAAM,QACb,EACA0J,YAAAA,CAAalH,GACX,OAAKA,GAA4B,IAAlBA,EAAOtF,OACfsF,EACJ6B,KAAIQ,GAAS,4BAA4BA,EAAM9D,2BAC/C0D,KAAK,KAHmC,EAI7C,EACAqQ,cAAAA,GACE,MAAMW,EAAO,IAAIC,KAAK,CAACjV,KAAKoU,mBAAoB,CAAElT,KAAM,eAClDgU,EAAMC,IAAIC,gBAAgBJ,GAE1BL,EAAIlU,SAAS4U,cAAc,KACjCV,EAAEW,KAAOJ,EACTP,EAAEY,SAAW,GAAGvV,KAAKyK,KAAKjL,KAAKU,QAAQ,cAAe,KAAKI,6BAC3DG,SAAS+U,KAAKC,YAAYd,GAC1BA,EAAEe,QAEF1C,YAAW,KACTvS,SAAS+U,KAAKG,YAAYhB,GAC1BQ,IAAIS,gBAAgBV,EAAI,GACvB,KAEHlV,KAAKyB,OACP,IC3FN,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCPW1G,MAAM,uB,IAKAA,MAAM,iB,IAERA,MAAM,mB,IACJA,MAAM,a,IAEHA,MAAM,c,IAZ1BC,IAAA,EAciBD,MAAM,4B,GAdvB,c,IAyBiBA,MAAM,iB,IAENA,MAAM,kBAAkBkK,MAAA,kB,IAMxBlK,MAAM,iB,IACFA,MAAM,U,IACNA,MAAM,gB,IAGNA,MAAM,U,IACNA,MAAM,gB,IAOVA,MAAM,iB,IAERA,MAAM,mB,IAUJA,MAAM,iB,IAERA,MAAM,kB,IACJA,MAAM,c,IACJA,MAAM,gB,IAENA,MAAM,kB,IACJA,MAAM,e,IAEHA,MAAM,oB,IAETA,MAAM,kB,IAEHA,MAAM,oB,IAIbA,MAAM,c,IAGDA,MAAM,e,IACNA,MAAM,c,IAOXA,MAAM,iB,IAERA,MAAM,mB,IAUJA,MAAM,iB,IAERA,MAAM,a,IACJA,MAAM,e,IACJA,MAAM,gB,IAGRA,MAAM,e,IACJA,MAAM,gB,IAGRA,MAAM,kB,IAG4BA,MAAM,c,IAGxCA,MAAM,mB,IAWNA,MAAM,iB,IAERA,MAAM,iB,IACJA,MAAM,mB,IAONA,MAAM,mB,sFAvIRmE,EAAAjC,SAAM,WAAjBtC,EAAAA,EAAAA,IAiJM,OAlJVK,IAAA,EACuBD,MAAM,sBAAuBuB,QAAKZ,EAAA,KAAAA,EAAA,IADzDyD,EAAAA,EAAAA,KAAA,IAAApD,IACgEC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,IAAK,Y,EAC/Dd,EAAAA,EAAAA,IA+IM,MA/INL,GA+IM,EA9IJK,EAAAA,EAAAA,IAAmD,UAA3CF,MAAM,YAAauB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAyF,OAAAzF,EAAAyF,SAAA1F,KAAO,KAAC,eAC1Cd,EAAAA,EAAAA,IAAkD,MAA9CF,MAAM,qBAAoB,mBAAe,KAG7CE,EAAAA,EAAAA,IAeU,UAfVI,GAeU,cAdRJ,EAAAA,EAAAA,IAA4C,MAAxCF,MAAM,iBAAgB,iBAAa,KACvCE,EAAAA,EAAAA,IAYM,MAZNK,GAYM,EAXJL,EAAAA,EAAAA,IAGM,MAHNM,GAGM,cAFJN,EAAAA,EAAAA,IAA0C,QAApCF,MAAM,cAAa,cAAU,KACnCE,EAAAA,EAAAA,IAAmE,OAAnEO,IAAmE+C,EAAAA,EAAAA,IAAvCW,EAAAuL,MAAMjL,MAAQ,iBAAJ,KAEIN,EAAAuL,MAAMlB,YAAS,WAA3D5O,EAAAA,EAAAA,IAMM,MANNc,GAMM,cALJR,EAAAA,EAAAA,IAA0C,QAApCF,MAAM,cAAa,cAAU,KACnCE,EAAAA,EAAAA,IAGM,OAHDF,MAAM,oBAAqBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAA6Z,SAAS3W,EAAAuL,KAAKlB,a,EACnDtO,EAAAA,EAAAA,IAAsD,OAAhDC,IAAKc,EAAA8Z,eAAiB1a,IAAK8D,EAAAuL,KAAKlB,UAAU/J,M,OAjBhEhC,KAkBgBvC,EAAAA,EAAAA,IAAsC,aAAAsD,EAAAA,EAAAA,IAA7BW,EAAAuL,KAAKlB,UAAU/J,MAAI,SAlB5C1C,EAAAA,EAAAA,IAAA,YAyBQ7B,EAAAA,EAAAA,IAkBU,UAlBV6C,GAkBU,cAjBN7C,EAAAA,EAAAA,IAAoD,MAAhDF,MAAM,iBAAgB,yBAAqB,KAC/CE,EAAAA,EAAAA,IAKM,MALNgD,GAKM,EAJFpD,EAAAA,EAAAA,IAGEkb,EAAA,CAFD5S,KAAMnH,EAAAga,mBACNC,QAASra,EAAAsa,kB,8BAGdjb,EAAAA,EAAAA,IASM,MATNiD,GASM,EARFjD,EAAAA,EAAAA,IAGM,MAHNoD,GAGM,EAFNpD,EAAAA,EAAAA,IAA6D,MAA7DqD,IAA6DC,EAAAA,EAAAA,IAAhCvC,EAAAma,aAAaC,QAAQ,IAAD,gBACjDnb,EAAAA,EAAAA,IAA8C,OAAzCF,MAAM,gBAAe,kBAAc,OAExCE,EAAAA,EAAAA,IAGM,MAHNuD,GAGM,EAFNvD,EAAAA,EAAAA,IAAkD,MAAlDiH,IAAkD3D,EAAAA,EAAAA,IAArBvC,EAAAqa,cAAY,gBACzCpb,EAAAA,EAAAA,IAA4C,OAAvCF,MAAM,gBAAe,gBAAY,WAM9CE,EAAAA,EAAAA,IASU,UATVkH,GASU,gBARRlH,EAAAA,EAAAA,IAAuD,MAAnDF,MAAM,iBAAgB,4BAAwB,KAClDE,EAAAA,EAAAA,IAMM,MANNmH,GAMM,EALJvH,EAAAA,EAAAA,IAIEyb,EAAA,CAHCnT,KAAMnH,EAAAua,kBACNN,QAASra,EAAA4a,gBACTC,OAAQ,K,gCAMfxb,EAAAA,EAAAA,IAyBU,UAzBVsH,GAyBU,gBAxBRtH,EAAAA,EAAAA,IAA2C,MAAvCF,MAAM,iBAAgB,gBAAY,KACtCE,EAAAA,EAAAA,IAsBM,MAtBNuH,GAsBM,EArBJvH,EAAAA,EAAAA,IAaM,MAbNwH,GAaM,EAZJxH,EAAAA,EAAAA,IAA+C,MAA/C0H,IAA+CpE,EAAAA,EAAAA,IAAlBvC,EAAA0a,WAAS,kBACtCzb,EAAAA,EAAAA,IAA2C,OAAtCF,MAAM,gBAAe,eAAW,KACrCE,EAAAA,EAAAA,IASM,MATN6K,GASM,EARJ7K,EAAAA,EAAAA,IAGM,MAHNkL,GAGM,gBAFJlL,EAAAA,EAAAA,IAAqC,QAA/BF,MAAM,aAAY,UAAM,KAC9BE,EAAAA,EAAAA,IAA0D,OAA1DmL,IAA0D7H,EAAAA,EAAAA,IAAxBvC,EAAA2a,gBAAc,MAElD1b,EAAAA,EAAAA,IAGM,MAHNoL,GAGM,gBAFJpL,EAAAA,EAAAA,IAAwC,QAAlCF,MAAM,aAAY,aAAS,KACjCE,EAAAA,EAAAA,IAA6D,OAA7DqL,IAA6D/H,EAAAA,EAAAA,IAA3BvC,EAAA4a,mBAAiB,UAIzD3b,EAAAA,EAAAA,IAMM,MANNyL,GAMM,gBALJ/L,EAAAA,EAAAA,IAIMyE,EAAAA,GAAA,MAhFpBC,EAAAA,EAAAA,IA4EqDrD,EAAA6a,YAATzS,K,WAA9BzJ,EAAAA,EAAAA,IAIM,OAJDI,MAAM,YAAyCC,IAAKoJ,EAAM0S,U,EAC7D7b,EAAAA,EAAAA,IAAsE,QAAhEF,OA7EtB8H,EAAAA,EAAAA,IAAA,CA6E4B,OAAM,IAAauB,EAAM0S,SAASxW,mB,SAC9CrF,EAAAA,EAAAA,IAAkD,OAAlD0L,IAAkDpI,EAAAA,EAAAA,IAArB6F,EAAM0F,OAAK,IACxC7O,EAAAA,EAAAA,IAAkE,OAAlE2L,IAAkErI,EAAAA,EAAAA,IAAtCvC,EAAA+a,aAAa3S,EAAM0S,WAAQ,Q,aAO/D7b,EAAAA,EAAAA,IASU,UATV4L,GASU,gBARR5L,EAAAA,EAAAA,IAAgD,MAA5CF,MAAM,iBAAgB,qBAAiB,KAC3CE,EAAAA,EAAAA,IAMM,MANN8L,GAMM,EALJlM,EAAAA,EAAAA,IAIEyb,EAAA,CAHCnT,KAAMnH,EAAAgb,uBACNf,QAASra,EAAA4a,gBACTC,OAAQ,K,gCAMfxb,EAAAA,EAAAA,IAyBU,UAzBV+L,GAyBU,gBAxBR/L,EAAAA,EAAAA,IAA8C,MAA1CF,MAAM,iBAAgB,mBAAe,KACzCE,EAAAA,EAAAA,IAsBM,MAtBNgM,GAsBM,EArBJhM,EAAAA,EAAAA,IAGM,MAHN8O,GAGM,EAFJ9O,EAAAA,EAAAA,IAAgE,MAAhEiP,GAA0B,KAAC3L,EAAAA,EAAAA,IAAGvC,EAAAib,eAAeb,QAAQ,IAAD,kBACpDnb,EAAAA,EAAAA,IAAgD,OAA3CF,MAAM,gBAAe,oBAAgB,OAE5CE,EAAAA,EAAAA,IAGM,MAHNmP,GAGM,EAFJnP,EAAAA,EAAAA,IAA8D,MAA9DoP,GAA0B,KAAC9L,EAAAA,EAAAA,IAAGvC,EAAAkb,aAAad,QAAQ,IAAD,kBAClDnb,EAAAA,EAAAA,IAA8C,OAAzCF,MAAM,gBAAe,kBAAc,OAE1CE,EAAAA,EAAAA,IAKM,MALN6P,GAKM,gBAJJ7P,EAAAA,EAAAA,IAA+C,OAA1CF,MAAM,gBAAe,mBAAe,KACzCE,EAAAA,EAAAA,IAEM,OAFDF,MAAM,iBAAkBuB,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAA6Z,SAAS7Z,EAAAmb,qB,EA/G3D5a,EAAAA,EAAAA,KAAAgC,EAAAA,EAAAA,IAgHmBvC,EAAAmb,kBAAkB3X,MAAO,IAAC,IAAAvE,EAAAA,EAAAA,IAA0E,OAA1E8P,GAAyB,MAAExM,EAAAA,EAAAA,IAAGvC,EAAAob,uBAAuBhB,QAAQ,IAAK,IAAC,QAGpGnb,EAAAA,EAAAA,IAMM,MANNiQ,GAMM,EALJrQ,EAAAA,EAAAA,IAIEkb,EAAA,CAHC5S,KAAMnH,EAAAqb,gBACNpB,QAASra,EAAA0b,mBACTb,OAAQ,K,kCAOjBxb,EAAAA,EAAAA,IAkBU,UAlBVoQ,GAkBU,gBAjBRpQ,EAAAA,EAAAA,IAAkD,MAA9CF,MAAM,iBAAgB,uBAAmB,KAC7CE,EAAAA,EAAAA,IAeM,MAfNqQ,GAeM,EAdJrQ,EAAAA,EAAAA,IAMM,MANNsQ,GAMM,EALJ1Q,EAAAA,EAAAA,IAIEyb,EAAA,CAHCnT,KAAMnH,EAAAub,sBACNtB,QAASra,EAAA4a,gBACTC,OAAQ,K,8BAGbxb,EAAAA,EAAAA,IAMM,MANNuQ,GAMM,EALJ3Q,EAAAA,EAAAA,IAIEkb,EAAA,CAHC5S,KAAMnH,EAAAwb,iBACNvB,QAASra,EAAA6b,oBACThB,OAAQ,K,uCA5IzB3Z,EAAAA,EAAAA,IAAA,M,2BAkKE4a,GAAAA,GAAQC,SACNC,GAAAA,GACAC,GAAAA,GACAC,GAAAA,GACAC,GAAAA,GACAC,GAAAA,GACAC,GAAAA,GACAC,GAAAA,IAGF,QACE1Y,KAAM,aACN6D,WAAY,CACV8U,SAAUC,GAAAA,GACVC,SAAUC,GAAAA,IAEZ1Y,MAAO,CACL3C,OAAQsG,QACRkH,KAAM,CACJvJ,KAAMgC,OACNkE,QAAS,OAGbjE,IAAAA,GACE,MAAO,CACLoV,WAAY,CACV,SAAY,UACZ,QAAW,UACX,QAAW,UACX,SAAY,UACZ,YAAe,UACf,aAAgB,UAChB,KAAQ,UACR,MAAS,WAEXC,aAAc,CACZ,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAE9ChC,gBAAiB,CACfiC,YAAY,EACZC,qBAAqB,EACrBC,QAAS,CACPC,OAAQ,CACNC,SAAU,SAEZC,QAAS,CACPC,UAAW,CACTC,MAAQC,IACN,MAAMD,EAAQC,EAAQD,OAAS,GACzBrU,EAAQsU,EAAQC,KAAO,EACvB3E,EAAQ0E,EAAQE,QAAQhW,KAAKmR,QAAO,CAACK,EAAGC,IAAMD,EAAIC,GAAG,GACrDwE,EAAaC,KAAKC,MAAO3U,EAAQ4P,EAAS,KAChD,MAAO,GAAGyE,MAAUrU,MAAUyU,KAAa,MAMrDlD,iBAAkB,CACduC,YAAY,EACZC,qBAAqB,EACrBa,OAAQ,CACJC,EAAG,CACHC,aAAa,EACbC,MAAO,CACHC,SAAU,EACVC,UAAW,GAEfC,KAAM,CACFC,SAAS,IAGbC,EAAG,CACHF,KAAM,CACFC,SAAS,KAIjBnB,QAAS,CACLC,OAAQ,CACRkB,SAAS,IAGbE,cAAe,GACfC,mBAAoB,IAExBxC,oBAAqB,CACnBgB,YAAY,EACZC,qBAAqB,EACrBC,QAAS,CACPC,OAAQ,CACNkB,SAAS,IAGbI,UAAW,IACXX,OAAQ,CACNQ,EAAG,CACDN,aAAa,EACbC,MAAO,CACLE,UAAW,EACXD,SAAU,MAKlBrC,mBAAoB,CAClBmB,YAAY,EACZC,qBAAqB,EACrBC,QAAS,CACPC,OAAQ,CACNkB,SAAS,IAGbP,OAAQ,CACNC,EAAG,CACDM,SAAS,KAKnB,EACA1W,SAAU,CACR0S,cAAAA,GACE,OAAK9V,KAAKyK,MAAMlB,YACTvJ,KAAKyK,KAAKlB,UAAUlI,YAAYoI,OAChCzJ,KAAKyK,KAAKlB,UAAUnI,aAAa,IAAIC,YAAYoI,QAFtB,EAGpC,EACAP,UAAAA,GACE,OAAKlJ,KAAKyK,MAAMhN,MACTuC,KAAKyK,KAAKhN,MAAM6W,QAAO,CAACC,EAAOvV,IAASuV,GAASvV,EAAK8K,OAAS,IAAI,GAD5C,CAEhC,EACAqM,YAAAA,GACE,IAAKnW,KAAKyK,MAAMhN,MAAO,OAAO,EAC9B,IAAI0c,EAAU,EACVjR,EAAa,EAWjB,OATAlJ,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IAEpB,IAAKA,EAAKqD,WAAa,IAAI9B,SAAS,QAAS,OAE7C,MAAMuJ,EAAQ9K,EAAK8K,OAAS,EAC5BqQ,IAAYnb,EAAKob,KAAO,GAAKtQ,EAC7BZ,GAAcY,CAAI,IAGfZ,EAAa,EAAIiR,EAAUjR,EAAa,CACjD,EAEAmN,YAAAA,GACJ,IAAKrW,KAAKyK,MAAMhN,MAAO,OAAO,EAE5B,MAAM4c,EAAQra,KAAKgW,mBAAmBsE,SAAS,GAAGnX,KAC5CoX,EAASva,KAAKgW,mBAAmBuE,OAEjCC,EAAYD,EAAOvS,QAAQ,KAC3ByS,EAAWF,EAAOvS,QAAQ,KAC1B0S,EAAWH,EAAOvS,QAAQ,KAEhC,OAAQwS,GAAa,EAAIH,EAAMG,GAAa,IACnCC,GAAY,EAAIJ,EAAMI,GAAY,IAClCC,GAAY,EAAIL,EAAMK,GAAY,EAC/C,EACI1E,kBAAAA,GACF,MAAMqE,EAAQ,CAAE,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,KAAM,GAoB9E,OAlBIra,KAAKyK,MAAMhN,OACbuC,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAMob,EAAMpb,EAAKob,KAAO,EAClBtQ,EAAQ9K,EAAK8K,OAAS,GAGvB9K,EAAKqD,WAAa,IAAI9B,SAAS,UAIhC6Z,GAAO,EACTC,EAAMD,EAAIO,aAAe7Q,EAEzBuQ,EAAM,OAASvQ,EACjB,IAIG,CACLyQ,OAAQrX,OAAOuR,KAAK4F,GACpBC,SAAU,CAAC,CACTtB,MAAO,QACP7T,gBAAiB,UACjBhC,KAAMD,OAAO0X,OAAOP,KAG1B,EACM9D,iBAAAA,GACE,MAAM3Q,EAAQ,CACZ,SAAY,EACZ,QAAW,EACX,QAAW,EACX,SAAY,EACZ,YAAe,EACf,aAAgB,EAChB,KAAQ,EACR,MAAS,GAGP5F,KAAKyK,MAAMhN,OACbuC,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAM8K,EAAQ9K,EAAK8K,OAAS,EACtB4G,EAAW1R,EAAKqD,WAAa,GAE/BqO,EAASnQ,SAAS,YAAaqF,EAAM,aAAekE,EAC/C4G,EAASnQ,SAAS,WAAYqF,EAAM,YAAckE,EAClD4G,EAASnQ,SAAS,WAAYqF,EAAM,YAAckE,EAClD4G,EAASnQ,SAAS,YAAaqF,EAAM,aAAekE,EACpD4G,EAASnQ,SAAS,eAAgBqF,EAAM,gBAAkBkE,EAC1D4G,EAASnQ,SAAS,gBAAiBqF,EAAM,iBAAmBkE,EAC5D4G,EAASnQ,SAAS,QAASqF,EAAM,SAAWkE,EAChDlE,EAAM,UAAYkE,CAAI,IAI/B,MAAM+Q,EAAgB3X,OAAO4X,QAAQlV,GAClC7B,QAAO,EAAE,CAAE+F,KAAWA,EAAQ,IAC9BlG,KAAI,EAAEpE,EAAMsK,MAAW,CAAGtK,OAAMsK,YAEnC,MAAO,CACLyQ,OAAQM,EAAcjX,KAAImX,GAAKA,EAAEvb,OACjC8a,SAAU,CAAC,CACTnV,gBAAiB0V,EAAcjX,KAAImX,GAAK/a,KAAKuY,WAAWwC,EAAEvb,OAAS,YACnE2D,KAAM0X,EAAcjX,KAAImX,GAAKA,EAAEjR,UAGrC,EACA4M,SAAAA,GACE,OAAK1W,KAAKyK,MAAMhN,MACTuC,KAAKyK,KAAKhN,MAAM6W,QAAO,CAACC,EAAOvV,KACpC,MAAMgc,GAAUhc,EAAKqD,WAAa,IAAI9B,SAAS,QAC/C,OAAOgU,GAASyG,EAAUhc,EAAK8K,OAAS,EAAK,EAAE,GAC9C,GAJ2B,CAKhC,EACA6M,cAAAA,GACE,OAAK3W,KAAKyK,MAAMhN,MACTuC,KAAKyK,KAAKhN,MAAM6W,QAAO,CAACC,EAAOvV,KACpC,MAAMic,GAAejc,EAAKqD,WAAa,IAAI9B,SAAS,cACpD,OAAOgU,GAAS0G,EAAejc,EAAK8K,OAAS,EAAK,EAAE,GACnD,GAJ2B,CAKhC,EACA8M,iBAAAA,GACE,OAAO5W,KAAK0W,UAAY1W,KAAK2W,cAC/B,EACAE,UAAAA,GACE,IAAK7W,KAAKyK,MAAMhN,QAAUuC,KAAKyK,MAAM1I,OAAQ,MAAO,GAEpD,MAAMA,EAAS,CAAC,EAmBhB,OAjBA/B,KAAKyK,KAAK1I,OAAOiQ,SAAQ5N,IACvBrC,EAAOqC,GAAS,CAAE0S,SAAU1S,EAAO0F,MAAO,EAAG,IAG/C9J,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,IAAKA,EAAKqD,WAAa,IAAI9B,SAAS,QAAS,CAC3C,MAAMuJ,EAAQ9K,EAAK8K,OAAS,EACtBoR,EAAWlb,KAAKmb,cAAcnc,GAEpCkc,EAASlJ,SAAQ5N,IACXrC,EAAOqC,KACTrC,EAAOqC,GAAO0F,OAASA,EACzB,GAEJ,KAGK5G,OAAO0X,OAAO7Y,GAAQ2S,MAAK,CAACC,EAAGC,IAAMA,EAAE9K,MAAQ6K,EAAE7K,OAC1D,EACAkN,sBAAAA,GACE,IAAKhX,KAAKyK,MAAM1I,OAAQ,MAAO,CAAEwY,OAAQ,GAAID,SAAU,IAEvD,MAAMc,EAAc,CAAC,EAErBpb,KAAKyK,KAAK1I,OAAOiQ,SAAQ5N,IACvBgX,EAAYhX,GAAS,CAAC,IAGpBpE,KAAKyK,KAAKhN,OACZuC,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAM8K,EAAQ9K,EAAK8K,OAAS,EACtB/H,EAAS/C,EAAK8U,gBAAkB,GAEtC/R,EAAOiQ,SAAQ5N,SACcmM,IAAvB6K,EAAYhX,KACdgX,EAAYhX,IAAU0F,EACxB,GACA,IAIN,MAAMuR,EAAiBnY,OAAO4X,QAAQM,GACnCrX,QAAO,EAAE,CAAE+F,KAAWA,EAAQ,IAC9BlG,KAAI,EAAEQ,EAAO0F,MAAW,CACvB1F,QACA0F,QACAtK,KAAMQ,KAAK+W,aAAa3S,OAG5B,MAAO,CACLmW,OAAQc,EAAezX,KAAIsO,GAAKA,EAAE1S,OAClC8a,SAAU,CAAC,CACTnV,gBAAiBkW,EAAezX,KAAIsO,GAAKlS,KAAKsb,YAAYpJ,EAAE9N,SAC5DjB,KAAMkY,EAAezX,KAAIsO,GAAKA,EAAEpI,UAGtC,EACAyN,qBAAAA,GACE,MAAM3R,EAAQ,CAAC,EAEX5F,KAAKyK,MAAMhN,OACbuC,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,IAAKA,EAAKqD,WAAa,IAAI9B,SAAS,YAAa,CAC/C,MAAMgb,GAAavc,EAAKqD,WAAa,IAAIuP,MAAM,KACzC4J,EAAoBD,EAAU9e,OAAS,EAAI8e,EAAU,GAAK,GAC1DE,EAAgBD,EAAkB1T,OAAO8J,MAAM,UAClD7N,QAAO7C,GAAQA,GAAiB,OAATA,IAAkBA,EAAKf,MAAM,gBAEjD2J,EAAQ9K,EAAK8K,OAAS,EAE5B2R,EAAczJ,SAAQ9Q,IACpB0E,EAAM1E,IAAS0E,EAAM1E,IAAS,GAAK4I,CAAI,GAE3C,KAIJ,MAAM4R,EAAWxY,OAAO4X,QAAQlV,GAC7BhC,KAAI,EAAEpE,EAAMsK,MAAW,CAAGtK,OAAMsK,YAChC4K,MAAK,CAACC,EAAGC,IAAMA,EAAE9K,MAAQ6K,EAAE7K,QAC3B8J,MAAM,EAAG,GAEZ,MAAO,CACL2G,OAAQmB,EAAS9X,KAAImX,GAAKA,EAAEvb,OAC5B8a,SAAU,CAAC,CACTnV,gBAAiBuW,EAAS9X,KAAI,CAAC+X,EAAGC,IAAM5b,KAAK6b,iBAAiBD,KAC9DzY,KAAMuY,EAAS9X,KAAImX,GAAKA,EAAEjR,UAGhC,EACA0N,gBAAAA,GACE,MAAMsE,EAAW,CAAC,EACZC,EAAc,CAClB,SAAU,UAAW,QAAS,YAAa,aAAc,WACzD,SAAU,WAAY,iBAAkB,eAAgB,gBACxD,QAAS,QAAS,WAAY,QAG5B/b,KAAKyK,MAAMhN,OACbuC,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAMgd,GAAchd,EAAK8E,aAAe,IAAIxD,cACtCwJ,EAAQ9K,EAAK8K,OAAS,EACtB4G,GAAY1R,EAAKqD,WAAa,IAAI/B,cAElCsQ,EAAaF,EAASnQ,SAAS,YAC/B0b,EAAYvL,EAASnQ,SAAS,WAC9B2b,EAAYxL,EAASnQ,SAAS,WAEpCwb,EAAY/J,SAAQmK,IAClB,MAAMC,EAAeD,EAAQ7b,cAC7B,GAAI0b,EAAWzb,SAAS6b,GAAe,CACrC,GACoB,WAAjBA,IAA8BxL,IAAeoL,EAAWzb,SAAS,qBACjE,CAAC,UAAW,QAAS,YAAa,aAAc,WAAY,SAC3D,eAAgB,gBAAiB,SAASA,SAAS6b,KAAkBxL,GACrD,UAAjBwL,IAA6BH,IAAcC,IAActL,EAE1D,OAGFkL,EAASK,IAAYL,EAASK,IAAY,GAAKrS,CACjD,IACA,IAIN,MAAMuS,EAAcnZ,OAAO4X,QAAQgB,GAChClY,KAAI,EAAEpE,EAAMsK,MAAW,CAAGtK,OAAMsK,YAChC4K,MAAK,CAACC,EAAGC,IAAMA,EAAE9K,MAAQ6K,EAAE7K,QAC3B8J,MAAM,EAAG,GAEZ,MAAO,CACL2G,OAAQ8B,EAAYzY,KAAI0Y,GAAKA,EAAE9c,OAC/B8a,SAAU,CAAC,CACTnV,gBAAiB,UACjBhC,KAAMkZ,EAAYzY,KAAI0Y,GAAKA,EAAExS,UAGnC,EACAmN,cAAAA,GACE,OAAKjX,KAAKyK,MAAMhN,MACTuC,KAAKyK,KAAKhN,MAAM6W,QAAO,CAACC,EAAOvV,KACpC,MAAMud,EAAQC,WAAWxd,EAAKyd,QAAQC,KAAO,MAAQ,EACrD,OAAOnI,EAASgI,GAASvd,EAAK8K,OAAS,EAAE,GACxC,GAJ2B,CAKhC,EACAoN,YAAAA,GACE,OAAwB,IAApBlX,KAAKkJ,WAAyB,EAC3BlJ,KAAKiX,eAAiBjX,KAAKkJ,UACpC,EACAiO,iBAAAA,GACE,IAAKnX,KAAKyK,MAAMhN,MAAO,MAAO,CAAE+B,KAAM,OAEtC,IAAImd,EAAW,EACXC,EAAgB,KAUpB,OARA5c,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAMud,EAAQC,WAAWxd,EAAKyd,QAAQC,KAAO,MAAQ,EACjDH,EAAQI,IACVA,EAAWJ,EACXK,EAAgB5d,EAClB,IAGK4d,GAAiB,CAAEpd,KAAM,MAClC,EACA4X,sBAAAA,GACE,OAAOoF,WAAWxc,KAAKmX,kBAAkBsF,QAAQC,KAAO,MAAQ,CAClE,EACArF,eAAAA,GACE,IAAKrX,KAAKyK,MAAMhN,MAAO,MAAO,CAC5B8c,OAAQ,GACRD,SAAU,IAGZ,IAAIuC,EAAS,EACTC,EAAY,EACZC,EAAW,EAWf,OATA/c,KAAKyK,KAAKhN,MAAMuU,SAAQhT,IACtB,MAAMud,EAAQC,WAAWxd,EAAKyd,QAAQC,KAAO,MAAQ,EAC/C5S,EAAQ9K,EAAK8K,OAAS,EAExByS,EAAQ,EAAGM,GAAU/S,EAChByS,GAAS,EAAGO,GAAahT,EAC7BiT,GAAYjT,CAAI,IAGhB,CACLyQ,OAAQ,CAAC,WAAY,QAAS,WAC9BD,SAAU,CAAC,CACTnV,gBAAiB,CAAC,UAAW,UAAW,WACxChC,KAAM,CAAC0Z,EAAQC,EAAWC,KAGhC,GAEFjd,QAAS,CACP2B,KAAAA,GACEzB,KAAKT,MAAM,QACb,EACAsW,QAAAA,CAAS7W,GACPgB,KAAKT,MAAM,YAAaP,EAC1B,EACAmc,aAAAA,CAAcnc,GACZ,OAAOA,EAAK8U,gBAAkB,EAChC,EACAiD,YAAAA,CAAa3S,GACX,MAAM4Y,EAAQ,CACZ,EAAK,QACL,EAAK,OACL,EAAK,QACL,EAAK,MACL,EAAK,SAEP,OAAOA,EAAM5Y,IAAUA,CACzB,EACAkX,WAAAA,CAAYlX,GACV,MAAMrC,EAAS,CACb,EAAK,UACL,EAAK,UACL,EAAK,UACL,EAAK,UACL,EAAK,WAEP,OAAOA,EAAOqC,IAAU,SAC1B,EACAyX,gBAAAA,CAAiB9T,GACf,OAAO/H,KAAKwY,aAAazQ,EAAQ/H,KAAKwY,aAAa/b,OACrD,IC/nBN,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCRO1B,MAAM,kB,IADbC,IAAA,EAE8BD,MAAM,oB,IACzBA,MAAM,gB,IAHjBC,IAAA,EAQqCD,MAAM,kB,IAR3CC,IAAA,EAUiDD,MAAM,oB,IAVvDC,IAAA,G,IAAAA,IAAA,G,GAAA,Y,IAAAA,IAAA,EAqB0CD,MAAM,gB,IAEnCA,MAAM,+B,GAvBnB,Y,GAAA,c,IAqCaA,MAAM,kB,IArCnBC,IAAA,EA2CuCD,MAAM,sB,IAChCA,MAAM,W,IAEFA,MAAM,e,IA9CvBC,IAAA,EAgD+DD,MAAM,yB,IAhDrEC,IAAA,EAqDgDD,MAAM,gB,IArDtDC,IAAA,G,GAAA,4C,IAAAA,IAAA,EAgE0BD,MAAM,sB,IAhEhCC,IAAA,EAqE+CD,MAAM,kC,IAClCA,MAAM,kB,GAtEzB,4C,IAAAC,IAAA,EA+EqDD,MAAM,sB,IA/E3DC,IAAA,EA0FkDD,MAAM,gB,GA1FxD,4C,IAAAC,IAAA,EAkG+CD,MAAM,wB,IAlGrDC,IAAA,EAqGiDD,MAAM,sB,IArGvDC,IAAA,EAyGiDD,MAAM,oC,IACpCA,MAAM,kB,GA1GzB,4C,IAAAC,IAAA,EAmHoDD,MAAM,sB,IAnH1DC,IAAA,EA6H+CD,MAAM,gB,GA7HrD,4C,IAAAC,IAAA,EAqIgDD,MAAM,wB,IArItDC,IAAA,EAwIkDD,MAAM,sB,IAxIxDC,IAAA,EA4I8CD,MAAM,gC,IAChCA,MAAM,kB,GA7I1B,4C,IAAAC,IAAA,EAsJqDD,MAAM,sB,IAW5CA,MAAM,qB,GAjKrB,gB,GAAA,4C,IAAAC,IAAA,EAiL4CD,MAAM,iB,IAjLlDC,IAAA,EAoLmFD,MAAM,gB,IAQ5EA,MAAM,c,GA5LnB,Q,IAwMiBA,MAAM,c,GAxMvB,4C,IAAAC,IAAA,EA+MgDD,MAAM,kB,IA/MtDC,IAAA,EAmN6CD,MAAM,sB,IA+BlCA,MAAM,c,IAIJA,MAAM,qC,IAWRA,MAAM,W,IAGJA,MAAM,kC,IAgBRA,MAAM,kB,GApRvB,Y,GAAA,c,IAAAC,IAAA,EA6RmFD,MAAM,sB,IA7RzFC,IAAA,EAgS0GD,MAAM,sB,IAhShHC,IAAA,EAmSgDD,MAAM,sB,IAIrCA,MAAM,wC,IAvSvBC,IAAA,EAgTgBD,MAAM,W,2CA/SpBJ,EAAAA,EAAAA,IAkTM,MAlTNC,GAkTM,CAjTOgB,EAAAqhB,gBAAa,WAAxBtiB,EAAAA,EAAAA,IA4SM,MA5SNU,GA4SM,EA3SJJ,EAAAA,EAAAA,IAGM,MAHNK,GAGM,gBAFJL,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAAwD,UAAhDF,MAAM,YAAauB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAAqI,YAAArI,EAAAqI,cAAAtI,KAAY,OAG3B,WAAVH,EAAAshB,QAAK,WAAhBviB,EAAAA,EAAAA,IAWM,MAXNY,GAWM,gBAVJN,EAAAA,EAAAA,IAAkC,UAA9B,6BAAyB,IACjBiE,EAAAsL,OAA0B,IAAjBtL,EAAAsL,MAAM/N,SAVnC,WAcQ9B,EAAAA,EAAAA,IAIM,MAlBd6C,GAAA,gBAeU7C,EAAAA,EAAAA,IAEMyE,EAAAA,GAAA,MAjBhBC,EAAAA,EAAAA,IAe8BH,EAAAsL,OAARC,K,WAAZ9P,EAAAA,EAAAA,IAEM,OAFsBK,IAAKyP,EAAK/P,GAAIK,MAAM,cAAeuB,QAAKX,GAAEK,EAAAmhB,kBAAkB1S,EAAK/P,M,QACxF+P,EAAKjL,MAAI,EAhBxB1B,O,WAUyC,WAAjCnD,EAAAA,EAAAA,IAGM,MAHNa,GAGM,gBAFJP,EAAAA,EAAAA,IAAsD,SAAnD,mDAA+C,IACzCW,EAAAwhB,UAAO,WAAhBziB,EAAAA,EAAAA,IAAsC,IAZhDc,GAY4B,sBAZ5BqB,EAAAA,EAAAA,IAAA,cAAAA,EAAAA,EAAAA,IAAA,OAqB2B,gBAAVlB,EAAAshB,QAAK,WAAhBviB,EAAAA,EAAAA,IAoBM,MApBNsD,GAoBM,gBAnBJhD,EAAAA,EAAAA,IAA0B,UAAtB,qBAAiB,KACrBA,EAAAA,EAAAA,IAaM,MAbNiD,GAaM,gBAZJvD,EAAAA,EAAAA,IAWMyE,EAAAA,GAAA,MAnChBC,EAAAA,EAAAA,IAyBoCzD,EAAAyhB,aAzBpC,CAyBoBre,EAAM+I,M,WADhBpN,EAAAA,EAAAA,IAWM,OATHK,IAAK+M,EACNhN,OA3BZ8H,EAAAA,EAAAA,IAAA,CA2BkB,eAAc,UAEEjH,EAAA0hB,cAAc/c,SAASwH,MAD5CzL,QAAKX,GAAEK,EAAAuhB,iBAAiBxV,I,EAGzB9M,EAAAA,EAAAA,IAGuB,OAHjBC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACN0iB,UAAU,S,OAlC3Bnf,KAAA,GAAAD,O,SAqCQpD,EAAAA,EAAAA,IAG2E,MAH3EuD,GAG2E,EAFzEvD,EAAAA,EAAAA,IAAkE,UAAzDqB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA0hB,UAAA1hB,EAAA0hB,YAAA3hB,IAAUhB,MAAM,sBAAqB,SACrDE,EAAAA,EAAAA,IAA0E,UAAjEqB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA2hB,UAAA3hB,EAAA2hB,YAAA5hB,IAAUhB,MAAM,0BAAyB,aACzDE,EAAAA,EAAAA,IAAkE,UAAzDqB,QAAKZ,EAAA,KAAAA,EAAA,OAAAK,IAAEC,EAAA4hB,UAAA5hB,EAAA4hB,YAAA7hB,IAAUhB,MAAM,sBAAqB,cAxC/D+B,EAAAA,EAAAA,IAAA,OA2C2B,aAAVlB,EAAAshB,QAAK,WAAhBviB,EAAAA,EAAAA,IAkQM,MAlQNuH,GAkQM,EAjQJjH,EAAAA,EAAAA,IAiHM,MAjHNkH,GAiHM,EAhHJlH,EAAAA,EAAAA,IAwCM,OAxCDF,MAAM,eAAgB8iB,OAAIniB,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,YAAaoiB,WAAQriB,EAAA,KAAAA,EAAA,IA7CjFyD,EAAAA,EAAAA,KA6CwE,QAAiB,cAAE7C,QAAKZ,EAAA,KAAAA,EAAA,GAAAC,IAAGC,EAAAoiB,eAAeC,SAAWjiB,EAAAkiB,oBAAoB,a,EACrIjjB,EAAAA,EAAAA,IAKM,MALNmH,GAKM,gBAJJnH,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,IACLW,EAAAuiB,YAAYlM,MAAKC,GAAKA,EAAEQ,gBAAW,WAA9C/X,EAAAA,EAAAA,IAEM,MAFN4H,GAA+E,oBAC9DhE,EAAAA,EAAAA,IAAG3C,EAAAwiB,cAAY,KAjD9CthB,EAAAA,EAAAA,IAAA,SAqDwBlB,EAAAoiB,eAAeC,SArDvCnhB,EAAAA,EAAAA,IAAA,SAqD8C,WAAlCnC,EAAAA,EAAAA,IAcM,MAdN6H,GAcM,CAbO5G,EAAAuiB,YAAY1hB,OAAS,IAAH,WAA7B9B,EAAAA,EAAAA,IASM,MA/DpB8H,GAAA,gBAuDgB9H,EAAAA,EAAAA,IAOQyE,EAAAA,GAAA,MA9DxBC,EAAAA,EAAAA,IAuD6CzD,EAAAuiB,aAvD7C,CAuD6Bnf,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAOQ,OAPmCK,IAAG,mBAAuB+M,EAAOhN,MAAM,gB,EAChFE,EAAAA,EAAAA,IAKwE,OALlEC,IAAKc,EAAAwhB,aAAaxe,GACnB5D,IAAK4D,EAAKQ,KACXzE,MAAM,mBACN0iB,UAAU,OACTY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,UAAW+I,GAC9CwW,eA7DvBpf,EAAAA,EAAAA,KAAAxD,GA6D4CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,UAAW+I,IAAK,c,QA7DvFpF,S,sBAgEchI,EAAAA,EAAAA,IAEM,MAFNmL,GAAuC,sBAK9BlK,EAAAoiB,eAAeC,UAAO,WAAjCtjB,EAAAA,EAAAA,IAeM,MAfNwL,GAeM,EAdJlL,EAAAA,EAAAA,IAYM,MAZNmL,GAYM,gBAXJzL,EAAAA,EAAAA,IAOQyE,EAAAA,GAAA,MA9ExBC,EAAAA,EAAAA,IAuE6CzD,EAAAuiB,aAvE7C,CAuE6Bnf,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAOQ,OAPmCK,IAAG,oBAAwB+M,EAAOhN,MAAM,gB,EACjFE,EAAAA,EAAAA,IAKwE,OALlEC,IAAKc,EAAAwhB,aAAaxe,GACnB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACN0iB,UAAU,OACTY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,UAAW+I,GAC9CwW,eA7EvBpf,EAAAA,EAAAA,KAAAxD,GA6E4CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,UAAW+I,IAAK,c,QA7EvF1B,S,MA+EkD,IAAvBzK,EAAAuiB,YAAY1hB,SAAM,WAA7B9B,EAAAA,EAAAA,IAEM,MAFN2L,GAAgE,8BA/EhFxJ,EAAAA,EAAAA,IAAA,UAmFc7B,EAAAA,EAAAA,IAA8F,UAArFqB,QAAKZ,EAAA,KAAAA,EAAA,IAnF5ByD,EAAAA,EAAAA,KAAAxD,GAmFmCK,EAAAkiB,oBAAoB,YAAD,WAAanjB,MAAM,mBAAkB,gBAnF3F+B,EAAAA,EAAAA,IAAA,aAwFU7B,EAAAA,EAAAA,IAiCM,OAjCDF,MAAM,YAAa8iB,OAAIniB,EAAA,KAAAA,EAAA,GAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,cAAeoiB,WAAQriB,EAAA,MAAAA,EAAA,KAxFhFyD,EAAAA,EAAAA,KAwFuE,QAAiB,cAAE7C,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,IAAGC,EAAAoiB,eAAeS,WAAaziB,EAAAkiB,oBAAoB,e,EACtIjjB,EAAAA,EAAAA,IAA2C,UAAvC,eAAWsD,EAAAA,EAAAA,IAAG3C,EAAA6iB,UAAUhiB,QAAS,IAAC,GAC1Bb,EAAAoiB,eAAeS,WA1FvC3hB,EAAAA,EAAAA,IAAA,SA0FgD,WAApCnC,EAAAA,EAAAA,IAcM,MAdN+L,GAcM,gBAbJ/L,EAAAA,EAAAA,IAMMyE,EAAAA,GAAA,MAjGpBC,EAAAA,EAAAA,IA2F2CzD,EAAA6iB,UAAU7K,MAAM,EAAG,IA3F9D,CA2F2B5U,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAMM,OAN+CK,IAAG,qBAAyB+M,EAAOhN,MAAM,gB,EAC5FE,EAAAA,EAAAA,IAI2E,OAJrEC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,mBAAmB0iB,UAAU,OAClCY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,YAAa+I,GAChDwW,eAhGtBpf,EAAAA,EAAAA,KAAAxD,GAgG2CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,YAAa+I,IAAK,c,QAhGxFpB,S,MAkGyB/K,EAAA6iB,UAAUhiB,OAAS,IAAH,WAA3B9B,EAAAA,EAAAA,IAEM,MAFNiM,GAA8D,MAC3DrI,EAAAA,EAAAA,IAAG3C,EAAA6iB,UAAUhiB,OAAS,GAAI,SAC7B,KApGdK,EAAAA,EAAAA,IAAA,OAqG8C,IAArBlB,EAAA6iB,UAAUhiB,SAAM,WAA3B9B,EAAAA,EAAAA,IAEM,MAFNkM,GAA8D,2BArG5E/J,EAAAA,EAAAA,IAAA,UAyGuBlB,EAAAoiB,eAAeS,YAAS,WAAnC9jB,EAAAA,EAAAA,IAeM,MAfNoM,GAeM,EAdJ9L,EAAAA,EAAAA,IAYM,MAZN+L,GAYM,gBAXJrM,EAAAA,EAAAA,IAOMyE,EAAAA,GAAA,MAlHtBC,EAAAA,EAAAA,IA2G6CzD,EAAA6iB,WA3G7C,CA2G6Bzf,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAOM,OAPmCK,IAAG,sBAA0B+M,EAAOhN,MAAM,gB,EACjFE,EAAAA,EAAAA,IAK2E,OALrEC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACN0iB,UAAU,OACTY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,YAAa+I,GAChDwW,eAjHxBpf,EAAAA,EAAAA,KAAAxD,GAiH6CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,YAAa+I,IAAK,c,QAjH1Fd,S,MAmHiD,IAArBrL,EAAA6iB,UAAUhiB,SAAM,WAA3B9B,EAAAA,EAAAA,IAEK,MAFLoP,GAA8D,2BAnH/EjN,EAAAA,EAAAA,IAAA,UAuHc7B,EAAAA,EAAAA,IAAgG,UAAvFqB,QAAKZ,EAAA,KAAAA,EAAA,IAvH5ByD,EAAAA,EAAAA,KAAAxD,GAuHmCK,EAAAkiB,oBAAoB,cAAD,WAAenjB,MAAM,mBAAkB,gBAvH7F+B,EAAAA,EAAAA,IAAA,aA2HU7B,EAAAA,EAAAA,IAiCO,OAjCFF,MAAM,aAAc8iB,OAAIniB,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,UAAWoiB,WAAQriB,EAAA,MAAAA,EAAA,KA3H7EyD,EAAAA,EAAAA,KA2HoE,QAAiB,cAAE7C,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,IAAGC,EAAAoiB,eAAeU,OAAS1iB,EAAAkiB,oBAAoB,W,EAC9HjjB,EAAAA,EAAAA,IAAuC,UAAnC,WAAOsD,EAAAA,EAAAA,IAAG3C,EAAA+iB,UAAUliB,QAAS,IAAC,GACtBb,EAAAoiB,eAAeU,OA7HxC5hB,EAAAA,EAAAA,IAAA,SA6H6C,WAAhCnC,EAAAA,EAAAA,IAcM,MAdNuP,GAcM,gBAbJvP,EAAAA,EAAAA,IAMMyE,EAAAA,GAAA,MApIrBC,EAAAA,EAAAA,IA8H4CzD,EAAA+iB,UAAU/K,MAAM,EAAG,IA9H/D,CA8H4B5U,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAMM,OAN+CK,IAAG,iBAAqB+M,EAAOhN,MAAM,gB,EACxFE,EAAAA,EAAAA,IAIuE,OAJjEC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,mBAAmB0iB,UAAU,OAClCY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,QAAS+I,GAC5CwW,eAnIvBpf,EAAAA,EAAAA,KAAAxD,GAmI4CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,QAAS+I,IAAK,c,QAnIrFqC,S,MAqI0BxO,EAAA+iB,UAAUliB,OAAS,IAAH,WAA3B9B,EAAAA,EAAAA,IAEM,MAFN0P,GAA8D,MAC3D9L,EAAAA,EAAAA,IAAG3C,EAAA+iB,UAAUliB,OAAS,GAAI,SAC7B,KAvIfK,EAAAA,EAAAA,IAAA,OAwI+C,IAArBlB,EAAA+iB,UAAUliB,SAAM,WAA3B9B,EAAAA,EAAAA,IAEM,MAFNmQ,GAA8D,uBAxI7EhO,EAAAA,EAAAA,IAAA,UA4IwBlB,EAAAoiB,eAAeU,QAAK,WAA/B/jB,EAAAA,EAAAA,IAeM,MAfNoQ,GAeM,EAdJ9P,EAAAA,EAAAA,IAYM,MAZNiQ,GAYM,gBAXJvQ,EAAAA,EAAAA,IAOMyE,EAAAA,GAAA,MArJvBC,EAAAA,EAAAA,IA8I8CzD,EAAA+iB,WA9I9C,CA8I8B3f,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAOM,OAPmCK,IAAG,kBAAsB+M,EAAOhN,MAAM,gB,EAC7EE,EAAAA,EAAAA,IAKuE,OALjEC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACN0iB,UAAU,OACTY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,QAAS+I,GAC5CwW,eApJzBpf,EAAAA,EAAAA,KAAAxD,GAoJ8CK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,QAAS+I,IAAK,c,QApJvFsD,S,MAsJkD,IAArBzP,EAAA+iB,UAAUliB,SAAM,WAA3B9B,EAAAA,EAAAA,IAEM,MAFN2Q,GAA8D,uBAtJhFxO,EAAAA,EAAAA,IAAA,UA0Je7B,EAAAA,EAAAA,IAA4F,UAAnFqB,QAAKZ,EAAA,MAAAA,EAAA,KA1J7ByD,EAAAA,EAAAA,KAAAxD,GA0JoCK,EAAAkiB,oBAAoB,UAAD,WAAWnjB,MAAM,mBAAkB,gBA1J1F+B,EAAAA,EAAAA,IAAA,eA+JQ7B,EAAAA,EAAAA,IA2BM,OA3BDF,MAAM,cAAe8iB,OAAIniB,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,gBAAiBoiB,WAAQriB,EAAA,MAAAA,EAAA,KA/JlFyD,EAAAA,EAAAA,KA+JyE,QAAiB,e,gBAChFlE,EAAAA,EAAAA,IAAoB,UAAhB,eAAW,KACfA,EAAAA,EAAAA,IAuBM,MAvBNsQ,GAuBM,gBAtBJ5Q,EAAAA,EAAAA,IAqBMyE,EAAAA,GAAA,MAvLlBC,EAAAA,EAAAA,IAkKyCzD,EAAAgjB,aAlKzC,CAkKyB5f,EAAM+I,M,WAAnBpN,EAAAA,EAAAA,IAqBM,OArBqCK,IAAG,gBAAoBgE,EAAK6f,QAAU9W,GAAQhN,MAAM,mBACzFkK,OAnKlBC,EAAAA,EAAAA,IAAA,C,UAmK0DlG,EAAK8f,OAAM,uB,KAA2E9f,EAAK6Z,UAAUkB,EAAC,K,IAAiE/a,EAAK6Z,UAAUW,EAAC,K,sBAM/NuF,YAASpjB,GAAEK,EAAAgjB,UAAUrjB,EAAQqD,EAAM+I,GACnCkX,UAAOvjB,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAkjB,UAAAljB,EAAAkjB,YAAAnjB,IACTojB,YAASzjB,EAAA,MAAAA,EAAA,IAAAC,GAAEC,EAAAwjB,oBAAoBzjB,K,EACnCV,EAAAA,EAAAA,IAI6E,OAJvEC,IAAKc,EAAAwhB,aAAaxe,GAClB5D,IAAK4D,EAAKQ,KACXzE,MAAM,aACN0iB,UAAU,OAAQY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQqD,EAAM,cAAe+I,GACnEwW,eAhLpBpf,EAAAA,EAAAA,KAAAxD,GAgLyCK,EAAAwiB,aAAa7iB,EAAQqD,EAAM,cAAe+I,IAAK,c,QAhLxF0D,IAiLyBzM,EAAKqgB,SAAW,IAAH,WAAxB1kB,EAAAA,EAAAA,IAEM,MAFNgR,IAEMpN,EAAAA,EAAAA,IADDS,EAAKqgB,UAAQ,KAlLhCviB,EAAAA,EAAAA,IAAA,YAoLwCyT,IAAfvR,EAAKgD,YAA0CuO,IAAnBvR,EAAKiD,YAAuB,WAAnEtH,EAAAA,EAAAA,IAEM,MAFNkR,IAEMtN,EAAAA,EAAAA,IADDS,EAAKgD,OAAS,KAAM,KAACzD,EAAAA,EAAAA,IAAGS,EAAKiD,WAAa,KAAJ,KArLzDnF,EAAAA,EAAAA,IAAA,WAAA0O,O,SAyLUvQ,EAAAA,EAAAA,IAAiE,UAAxDqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAsjB,UAAAtjB,EAAAsjB,YAAAvjB,IAAUhB,MAAM,gBAAe,cAAS,KAG1DE,EAAAA,EAAAA,IA4BM,MA5BN6Q,GA4BM,EA3BJ7Q,EAAAA,EAAAA,IAQM,OARDF,MAAM,UAAW8iB,OAAIniB,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,YAAaoiB,WAAQriB,EAAA,MAAAA,EAAA,KA7L5EyD,EAAAA,EAAAA,KA6LmE,QAAiB,e,EACxElE,EAAAA,EAAAA,IAAuC,UAAnC,aAASsD,EAAAA,EAAAA,IAAG3C,EAAA2jB,QAAQ9iB,QAAS,IAAC,IAClCxB,EAAAA,EAAAA,IAIuB,OAJjBC,IAAKU,EAAA4jB,gBACNpkB,IAAI,UACJL,MAAM,gBACLuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAyjB,eAAAzjB,EAAAyjB,iBAAA1jB,IACR0hB,UAAU,S,OAnM3BzR,KAoMY/Q,EAAAA,EAAAA,IAA2D,UAAlDqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA4hB,UAAA5hB,EAAA4hB,YAAA7hB,IAAUhB,MAAM,eAAc,SAAI,KAEpDE,EAAAA,EAAAA,IAiBM,OAjBDF,MAAM,YAAa8iB,OAAIniB,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAA8hB,SAASniB,EAAQ,SAAUoiB,WAAQriB,EAAA,MAAAA,EAAA,KAtM3EyD,EAAAA,EAAAA,KAsMkE,QAAiB,e,EACvElE,EAAAA,EAAAA,IAAiC,UAA7B,UAAMsD,EAAAA,EAAAA,IAAG3C,EAAA8jB,KAAKjjB,QAAS,IAAC,IAC5BxB,EAAAA,EAAAA,IAcM,MAdNoR,GAcM,gBAbJ1R,EAAAA,EAAAA,IASMyE,EAAAA,GAAA,MAlNpBC,EAAAA,EAAAA,IAyMgDrD,EAAA2jB,aAzMhD,CAyM2BC,EAAW7X,M,WAAxBpN,EAAAA,EAAAA,IASM,OAT0CK,IAAG,SAAa4kB,EAAU5gB,KAAK6f,QAAU9W,GAAQhN,MAAM,gB,EACrGE,EAAAA,EAAAA,IAI0M,OAJpMC,IAAKc,EAAAwhB,aAAaoC,EAAU5gB,MAC5B5D,IAAKwkB,EAAU5gB,KAAKQ,KACrBzE,MAAM,aACN0iB,UAAU,OACTY,YAAS1iB,GAAEK,EAAAsiB,UAAU3iB,EAAQikB,EAAU5gB,KAAM,OAAQhD,EAAA6jB,oBAAoBD,EAAU5gB,OAASuf,eA9MlHpf,EAAAA,EAAAA,KAAAxD,GA8MuIK,EAAAwiB,aAAa7iB,EAAQikB,EAAU5gB,KAAM,OAAQhD,EAAA6jB,oBAAoBD,EAAU5gB,QAAI,c,QA9MtNmN,IA+M2ByT,EAAU9V,MAAQ,IAAH,WAA1BnP,EAAAA,EAAAA,IAEM,MAFNyR,IAEM7N,EAAAA,EAAAA,IADDqhB,EAAU9V,OAAK,KAhNpChN,EAAAA,EAAAA,IAAA,Y,MAmN0C,IAAhBlB,EAAA8jB,KAAKjjB,SAAM,WAAtB9B,EAAAA,EAAAA,IAEM,MAFN2R,GAAyD,sBAnNxExP,EAAAA,EAAAA,IAAA,gBA0NmBlB,EAAAkkB,iBAAmBlkB,EAAAmkB,cAAW,WAAzCplB,EAAAA,EAAAA,IAmBM,OA7OdK,IAAA,EA2NaD,MAAM,eACLkK,OA5NdC,EAAAA,EAAAA,IAAA,CAAA8a,IA4N4BpkB,EAAAqkB,oBAAoBzG,EAAI,KAAH0G,KAAetkB,EAAAqkB,oBAAoBlG,EAAI,OAC1Ezd,QAAKZ,EAAA,MAAAA,EAAA,KA7NnByD,EAAAA,EAAAA,KA6Na,QAAW,Y,CACa,gBAAhBvD,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAAgI,OA9N1IK,IAAA,EA8NoDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAokB,WAAW,iBAAgB,yBA9NjHtjB,EAAAA,EAAAA,IAAA,OA+NqC,UAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAA8G,OA/NxHK,IAAA,EA+N8CD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAokB,WAAW,WAAU,mBA/NrGtjB,EAAAA,EAAAA,IAAA,OAgOqC,cAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAA0H,OAhOpIK,IAAA,EAgOkDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAokB,WAAW,eAAc,uBAhO7GtjB,EAAAA,EAAAA,IAAA,OAiOqC,YAAhBlB,EAAAukB,aAA8BvkB,EAAAmkB,aAAaM,SAjOhEvjB,EAAAA,EAAAA,IAAA,SAiOuE,WAA7DnC,EAAAA,EAAAA,IAAkJ,OAjO5JK,IAAA,EAiOyED,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAokB,WAAW,aAAY,yBAC7F,SAAhBxkB,EAAAukB,aAA2BvkB,EAAAmkB,aAAaM,SAlO7DvjB,EAAAA,EAAAA,IAAA,SAkOoE,WAA1DnC,EAAAA,EAAAA,IAAoI,OAlO9IK,IAAA,EAkOsED,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,IAAAC,GAAEK,EAAAokB,WAAW,UAAS,iBACvF,YAAhBxkB,EAAAukB,aAA8BvkB,EAAAmkB,aAAaM,SAnOhEvjB,EAAAA,EAAAA,IAAA,SAmOuE,WAA7DnC,EAAAA,EAAAA,IAAgJ,OAnO1JK,IAAA,EAmOyED,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAskB,oBAAAtkB,EAAAskB,sBAAAvkB,KAAoB,0BAC1F,YAAhBH,EAAAukB,aAA8BvkB,EAAAmkB,aAAaM,SApOhEvjB,EAAAA,EAAAA,IAAA,SAoOuE,WAA7DnC,EAAAA,EAAAA,IAAsJ,OApOhKK,IAAA,EAoOyED,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAukB,uBAAAvkB,EAAAukB,yBAAAxkB,KAAuB,6BAC7GH,EAAAmkB,aAAarN,cAAW,WAAnC/X,EAAAA,EAAAA,IAA8H,OArOxIK,IAAA,EAqO+CD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAwkB,sBAAAxkB,EAAAwkB,wBAAAzkB,KAAsB,iCArOvGe,EAAAA,EAAAA,IAAA,sBAsOU7B,EAAAA,EAAAA,IAAwC,OAAnCF,MAAM,wBAAsB,UACtBa,EAAAmkB,aAAa3e,YAAY3E,OAAS,IAAH,WAA1C9B,EAAAA,EAAAA,IAA2G,OAvOrHK,IAAA,EAuO0DD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA4G,UAAA5G,EAAA4G,YAAA7G,KAAU,eAvOtGe,EAAAA,EAAAA,IAAA,OAwOqC,gBAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAAqI,OAxO/IK,IAAA,EAwOoDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAykB,SAAAzkB,EAAAykB,WAAA1kB,M,QAAYH,EAAAmkB,YAAYjB,OAAS,QAAU,OAAb,KAxOpHhiB,EAAAA,EAAAA,IAAA,OAyOqC,gBAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAAyG,OAzOnHK,IAAA,GAyOoDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA0kB,YAAA1kB,EAAA0kB,cAAA3kB,KAAY,iBAzOlGe,EAAAA,EAAAA,IAAA,OA0OqC,gBAAhBlB,EAAAukB,aAAiCvkB,EAAAmkB,aAAaV,SAAW,IAAH,WAAjE1kB,EAAAA,EAAAA,IAA4I,OA1OtJK,IAAA,GA0OiFD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA2kB,eAAA3kB,EAAA2kB,iBAAA5kB,KAAe,oBA1OlIe,EAAAA,EAAAA,IAAA,OA2OqC,gBAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAAwH,OA3OlIK,IAAA,GA2OoDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA4kB,mBAAA5kB,EAAA4kB,qBAAA7kB,KAAmB,yBA3OzGe,EAAAA,EAAAA,IAAA,OA4OqC,gBAAhBlB,EAAAukB,cAAW,WAAtBxlB,EAAAA,EAAAA,IAAoH,OA5O9HK,IAAA,GA4OoDD,MAAM,oBAAqBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA6kB,iBAAA7kB,EAAA6kB,mBAAA9kB,KAAiB,uBA5OvGe,EAAAA,EAAAA,IAAA,aAAAA,EAAAA,EAAAA,IAAA,OA+OmBlB,EAAAklB,iBAAc,WAAzBnmB,EAAAA,EAAAA,IAaM,OA5PdK,IAAA,EA+OmCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA+kB,qBAAA/kB,EAAA+kB,uBAAAhlB,K,EACvDd,EAAAA,EAAAA,IAWM,OAXDF,MAAM,4BAA6BuB,QAAKZ,EAAA,MAAAA,EAAA,KAhPvDyD,EAAAA,EAAAA,KAgPiD,QAAW,Y,gBAChDlE,EAAAA,EAAAA,IAAqB,UAAjB,gBAAY,KAChBA,EAAAA,EAAAA,IAQM,MARNuR,GAQM,EAPJvR,EAAAA,EAAAA,IAAwG,6BAnPtHsB,EAAAA,EAAAA,IAmPqB,mBAAa,SAAAtB,EAAAA,EAAAA,IAA2E,SAnP7G,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GAmPkDC,EAAAolB,UAASrlB,GAAEuF,KAAK,OAAO7E,YAAY,yB,iBAAnCT,EAAAolB,gBACpC/lB,EAAAA,EAAAA,IAAiG,6BApP/GsB,EAAAA,EAAAA,IAoPqB,iBAAW,SAAAtB,EAAAA,EAAAA,IAAsE,SApPtG,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GAoPuDC,EAAAqlB,cAAatlB,GAAEuF,KAAK,SAASqF,IAAI,IAAIC,IAAI,O,iBAAzC5K,EAAAqlB,mBAAa,GAArBxa,QAAR,SACzBxL,EAAAA,EAAAA,IAAgH,6BArP9HsB,EAAAA,EAAAA,IAqPqB,6BAAuB,SAAAtB,EAAAA,EAAAA,IAAyE,SArPrH,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GAqP4DC,EAAAslB,cAAavlB,GAAEuF,KAAK,OAAO7E,YAAY,mB,iBAAvCT,EAAAslB,oBAC9CjmB,EAAAA,EAAAA,IAGM,MAHNyR,GAGM,EAFJzR,EAAAA,EAAAA,IAAmE,UAA1DqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAmlB,aAAAnlB,EAAAmlB,eAAAplB,IAAahB,MAAM,kBAAiB,WACpDE,EAAAA,EAAAA,IAA0E,UAAjEqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA+kB,qBAAA/kB,EAAA+kB,uBAAAhlB,IAAqBhB,MAAM,iBAAgB,oBAxP3E+B,EAAAA,EAAAA,IAAA,OA8PmBlB,EAAAwlB,cAAW,WAAtBzmB,EAAAA,EAAAA,IAYM,OA1QdK,IAAA,EA8PgCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAqlB,UAAArlB,EAAAqlB,YAAAtlB,K,EACpDd,EAAAA,EAAAA,IAUM,OAVDF,MAAM,yBAA0BuB,QAAKZ,EAAA,MAAAA,EAAA,KA/PpDyD,EAAAA,EAAAA,KA+P8C,QAAW,Y,EAC7ClE,EAAAA,EAAAA,IAAwD,UAApD,4BAAwBsD,EAAAA,EAAAA,IAAG3C,EAAAmkB,aAAavgB,MAAI,IAChDvE,EAAAA,EAAAA,IAOM,MAPNqmB,GAOM,EANJrmB,EAAAA,EAAAA,IAAuE,6BAlQrFsB,EAAAA,EAAAA,IAkQqB,cAAQ,SAAAtB,EAAAA,EAAAA,IAA+C,SAlQ5E,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GAkQoDC,EAAA2lB,SAAQ5lB,GAAEuF,KAAK,U,iBAAftF,EAAA2lB,cAAQ,GAAhB9a,QAAR,SACtBxL,EAAAA,EAAAA,IAA+E,6BAnQ7FsB,EAAAA,EAAAA,IAmQqB,kBAAY,SAAAtB,EAAAA,EAAAA,IAAmD,SAnQpF,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GAmQwDC,EAAA4lB,aAAY7lB,GAAEuF,KAAK,U,iBAAnBtF,EAAA4lB,kBAAY,GAApB/a,QAAR,SAC1BxL,EAAAA,EAAAA,IAGM,MAHNwmB,GAGM,EAFJxmB,EAAAA,EAAAA,IAA4D,UAAnDqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA0lB,QAAA1lB,EAAA0lB,UAAA3lB,IAAQhB,MAAM,kBAAiB,SAC/CE,EAAAA,EAAAA,IAA+D,UAAtDqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAqlB,UAAArlB,EAAAqlB,YAAAtlB,IAAUhB,MAAM,iBAAgB,oBAtQhE+B,EAAAA,EAAAA,IAAA,OA4QmBlB,EAAA+lB,oBAAiB,WAA5BhnB,EAAAA,EAAAA,IAgCM,OA5SdK,IAAA,EA4QsCD,MAAM,gBAAiBuB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA4lB,oBAAA5lB,EAAA4lB,sBAAA7lB,K,EAC1Dd,EAAAA,EAAAA,IA8BM,OA9BDF,MAAM,qCAAsCuB,QAAKZ,EAAA,MAAAA,EAAA,KA7QhEyD,EAAAA,EAAAA,KA6Q0D,QAAW,Y,EACzDlE,EAAAA,EAAAA,IAAoD,UAAhD,oBAAgBsD,EAAAA,EAAAA,IAAG3C,EAAA2jB,QAAQ9iB,QAAS,UAAO,aAC/CxB,EAAAA,EAAAA,IAIoC,SAnRhD,sBAAAS,EAAA,MAAAA,EAAA,IAAAC,GA+Q4BC,EAAAimB,mBAAkBlmB,GAC3BuF,KAAK,OACL7E,YAAY,uBACXP,QAAKJ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA8lB,oBAAA9lB,EAAA8lB,sBAAA/lB,IACRhB,MAAM,wB,iBAJGa,EAAAimB,uBAKhB5mB,EAAAA,EAAAA,IAkBM,MAlBN8mB,GAkBM,gBAjBJpnB,EAAAA,EAAAA,IAOMyE,EAAAA,GAAA,MA5RpBC,EAAAA,EAAAA,IAqRkCzD,EAAAomB,sBAARhjB,K,WAAZrE,EAAAA,EAAAA,IAOM,OANAK,IAAG,WAAegE,EAAK6f,QAAU7f,EAAKtE,IAAKK,MAAM,qBACjDuB,QAAKX,GAAEK,EAAAimB,uBAAuBjjB,I,EACjC/D,EAAAA,EAAAA,IAE8B,OAFxBC,IAAKc,EAAAwhB,aAAaxe,GACnB5D,IAAK4D,EAAKQ,KACXzE,MAAM,qB,OA1R3BmnB,KA2RiBjnB,EAAAA,EAAAA,IAA4B,aAAAsD,EAAAA,EAAAA,IAAnBS,EAAKQ,MAAI,MA3RnC2iB,O,MA6R0D,IAAhCvmB,EAAAomB,qBAAqBvlB,QAAgBb,EAAAimB,qBAAkB,WAAlElnB,EAAAA,EAAAA,IAEM,MAFNynB,GAA+F,gCA7R9GtlB,EAAAA,EAAAA,IAAA,OAgS0D,IAAhClB,EAAAomB,qBAAqBvlB,SAAiBb,EAAAimB,oBAAsBjmB,EAAA2jB,QAAQ9iB,OAAS,IAAH,WAArF9B,EAAAA,EAAAA,IAEM,MAFN0nB,GAAsH,sBACnG9jB,EAAAA,EAAAA,IAAG3C,EAAA2jB,QAAQ9iB,QAAS,8CACvC,KAlSfK,EAAAA,EAAAA,IAAA,OAmS6C,IAAnBlB,EAAA2jB,QAAQ9iB,SAAM,WAAzB9B,EAAAA,EAAAA,IAEM,MAFN2nB,GAA4D,yBAnS3ExlB,EAAAA,EAAAA,IAAA,UAuSY7B,EAAAA,EAAAA,IAGM,MAHNsnB,GAGM,EAFJtnB,EAAAA,EAAAA,IAAuF,UAA9EqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAAwmB,gBAAAxmB,EAAAwmB,kBAAAzmB,IAAgBhB,MAAM,0BAAyB,oBAC/DE,EAAAA,EAAAA,IAAwE,UAA/DqB,QAAKZ,EAAA,MAAAA,EAAA,QAAAK,IAAEC,EAAA4lB,oBAAA5lB,EAAA4lB,sBAAA7lB,IAAoBhB,MAAM,iBAAgB,iBAzSxE+B,EAAAA,EAAAA,IAAA,WAAAA,EAAAA,EAAAA,IAAA,uBAgTInC,EAAAA,EAAAA,IAEM,MAFN8nB,GAA4B,kB,SAQhC,SAASC,GAASC,EAAMC,GACtB,IAAIC,EACJ,OAAO,WACL,MAAM9mB,EAAO+mB,UACP7J,EAAUjZ,KACX6iB,IACHF,EAAKI,MAAM9J,EAASld,GACpB8mB,GAAa,EACb7P,YAAW,IAAM6P,GAAa,GAAOD,GAEzC,CACF,CAEA,QACEpjB,KAAM,gBACNI,MAAO,CAEL4K,MAAO,CACLtJ,KAAMrB,MACNuH,QAASA,IAAM,KAGnBjE,IAAAA,GACE,MAAO,CACL6f,eAAgB,KAChB9F,MAAO,SACPE,SAAS,EACTH,eAAe,EAGfsC,QAAS,GACTlC,YAAa,GACbqC,KAAM,GACNd,YAAa,GACbH,UAAW,GACXE,UAAW,GACXR,YAAa,GAEbb,cAAe,GACfU,eAAgB,CACdC,SAAS,EACTS,OAAO,EACPD,WAAW,GAIbwE,YAAa,KACbC,gBAAiB,KACjBC,iBAAkB,KAClBC,2BAA2B,EAC3BC,6BAA8B,EAC9BC,gBAAiB,CAAEvJ,EAAG,EAAGP,EAAG,GAC5B4F,oBAAqB,KAGrBU,iBAAiB,EACjBG,oBAAqB,CAAElG,EAAG,EAAGP,EAAG,GAChCuG,YAAa,KACbI,YAAa,KACboD,aAAc,KACdC,wBAAyB,KAGzB1C,gBAAgB,EAChBE,UAAW,GACXC,cAAe,EACfC,cAAe,GACfE,aAAa,EACbG,SAAU,EACVC,aAAc,EACdG,mBAAmB,EACnBE,mBAAoB,GACpBG,qBAAsB,GAGtB5D,aAAc,EACdqF,cAAe,EAGfjE,gBAAiB,IAAIrK,IAAI,aAAqDG,KAC9EoO,kBAAmB,IAAIvO,IAAI,aAAyDG,KAExF,EACAlS,SAAU,CAERuc,WAAAA,GACE,MAAMxP,EAAS,GACTwT,EAAU,IAAIC,IAcpB,OAbA5jB,KAAK0f,KAAK1N,SAAQhT,IAEhB,MAAMhE,EAAMgE,EAAK6f,QAAU7f,EAAKtE,IAAMsE,EAAKQ,KAC3C,GAAImkB,EAAQ1Q,IAAIjY,GAEd2oB,EAAQxS,IAAInW,GAAK8O,YACZ,CAEL,MAAM+Z,EAAQ,CAAE7kB,KAAMA,EAAM8K,MAAO,GACnC6Z,EAAQlf,IAAIzJ,EAAK6oB,GACjB1T,EAAOlI,KAAK4b,EACd,KAEK1T,CACT,GAEF4D,OAAAA,GAEE/T,KAAKof,oBAAsBsD,GAAS1iB,KAAK8jB,WAAY,GACvD,EACAtjB,OAAAA,GACEe,QAAQC,IAAI,yBAEZxB,KAAK+jB,WAAU,KACX/jB,KAAKid,eAAgB,EACrBjd,KAAKod,SAAU,CAAK,IAIxBpd,KAAKwjB,wBAA2BnQ,IAE1BrT,KAAK8f,kBAAoBzM,EAAMC,OAAO0Q,QAAQ,kBAChDhkB,KAAKikB,kBACP,EAEFxjB,SAASC,iBAAiB,QAASV,KAAKwjB,wBAC1C,EACA7iB,aAAAA,GACEY,QAAQC,IAAI,4BAEZf,SAASG,oBAAoB,QAASZ,KAAKwjB,yBAC3C/iB,SAASG,oBAAoB,YAAaZ,KAAKof,qBAC/C3e,SAASG,oBAAoB,UAAWZ,KAAKkf,UAE7Clf,KAAKkkB,SACP,EACApkB,QAAS,CAEPuE,UAAAA,GACErE,KAAKkkB,UACLlkB,KAAKT,MAAM,QACb,EAGA2kB,OAAAA,GACE3iB,QAAQC,IAAI,mCACZxB,KAAKuf,QAAU,GACfvf,KAAKqd,YAAc,GACnBrd,KAAK0f,KAAO,GACZ1f,KAAK4e,YAAc,GACnB5e,KAAKye,UAAY,GACjBze,KAAK2e,UAAY,GACjB3e,KAAKme,YAAc,GACnBne,KAAKsd,cAAgB,GACrBtd,KAAKgjB,eAAiB,KACtBhjB,KAAKkd,MAAQ,SACbld,KAAKoe,aAAe,EACpBpe,KAAKyjB,cAAgB,EACrBzjB,KAAKikB,mBAELjkB,KAAK8gB,gBAAiB,EACtB9gB,KAAKohB,aAAc,EACnBphB,KAAK2hB,mBAAoB,EAEzB3hB,KAAKge,eAAiB,CAAEC,SAAS,EAAOS,OAAO,EAAOD,WAAW,GAEjEze,KAAKojB,2BAA4B,EACjCpjB,KAAKqjB,6BAA+B,EACpCrjB,KAAKijB,YAAc,KACnBjjB,KAAKkjB,gBAAkB,KACvBljB,KAAKmjB,iBAAmB,IAC1B,EAGAhG,iBAAAA,CAAkB3O,GAChBxO,KAAKgjB,eAAiBxU,EACtBxO,KAAK0K,UACP,EAGAA,QAAAA,GACE,IACE,IAAK1K,KAAKgjB,eAAqD,YAAnCzhB,QAAQyN,MAAM,oBAE1C,MAAMvE,EAAOzK,KAAKwK,MAAM2Z,MAAKC,GAAKA,EAAE1pB,KAAOsF,KAAKgjB,iBAChD,IAAKvY,EAAwE,YAAhElJ,QAAQyN,MAAM,2BAA4BhP,KAAKgjB,gBAC5DzhB,QAAQC,IAAI,gBAAiBiJ,EAAKjL,MAClCQ,KAAKkkB,UACLlkB,KAAKkd,MAAQ,UAGb,MAAM1J,EAAWnM,KAAKC,MAAMD,KAAKE,UAAUkD,IACrC4Z,EAAe,GAGjB7Q,EAAS/V,OAASoC,MAAMykB,QAAQ9Q,EAAS/V,QAC3C+V,EAAS/V,MAAMuU,SAAQ,CAACvB,EAAU8T,KAEhC,GAAI/Q,EAASjK,WAAakH,EAAS/V,KAAO8Y,EAASjK,UAAU7O,GAAI,OAEjE,MAAMoP,EAAQ2G,EAAS3G,OAAS2G,EAASL,UAAY,EAErD,IAAK,IAAIwL,EAAI,EAAGA,EAAI9R,EAAO8R,IACzByI,EAAapc,KAAK,IACbwI,EAEHoO,OAAQ,QAAQpO,EAAS/V,MAAM6pB,KAAa3I,KAAK5H,KAAKwQ,QACtD1F,QAAQ,EACRhc,SAAS,EACTuc,SAAU,EACVxG,SAAU,KACV7W,MAAOyO,EAASzO,MAChBC,UAAWwO,EAASxO,WAExB,IAEFjC,KAAKuf,QAAU8E,EACf9iB,QAAQC,IAAI,4BAA4BxB,KAAKuf,QAAQ9iB,2BAA4BuD,KAAKuf,QAAQ3L,MAAM,EAAG,GAAGhQ,KAAIsO,GAAKA,EAAE1S,UAErH+B,QAAQkjB,KAAK,8CAA+CjR,GAC5DxT,KAAKuf,QAAU,IAIb/L,EAASjK,UACXvJ,KAAKme,YAAc,CAAC,IACf3K,EAASjK,UACZmJ,aAAa,EACbmM,OAAQ,aAAarL,EAASjK,UAAU7O,MAAMsZ,KAAKwQ,QACnD1F,QAAQ,EACRhc,SAAS,EACTuc,SAAU,EACVxG,SAAU,KACV7W,MAAOwR,EAASjK,UAAUvH,MAC1BC,UAAWuR,EAASjK,UAAUtH,YAGhCjC,KAAKme,YAAc,GAIrBne,KAAK0kB,cAEL1kB,KAAK2kB,kBAEL3kB,KAAKkd,MAAQ,cACb3b,QAAQC,IAAI,eAAgB,CAAE+d,QAASvf,KAAKuf,QAAQ9iB,OAAQijB,KAAM1f,KAAKqd,YAAY5gB,OAAQ8M,UAAWvJ,KAAKme,YAAY1hB,QAEzH,CAAE,MAAOuS,GACPzN,QAAQyN,MAAM,qBAAsBA,GACpChP,KAAKkd,MAAQ,QACf,CACF,EAGAyH,eAAAA,GACE3kB,KAAKqd,YAAc,GACnBrd,KAAKsd,cAAgB,GACrB,MAAMsH,EAAW,EACjB,IAAK,IAAIhJ,EAAI,EAAGA,EAAIgJ,EAAUhJ,IAAK,CACjC,KAAI5b,KAAKuf,QAAQ9iB,OAAS,GAGnB,CACL8E,QAAQkjB,KAAK,qCACb,KACF,CAJEzkB,KAAKqd,YAAYpV,KAAKjI,KAAKuf,QAAQsF,MAKvC,CACF,EAGAtH,gBAAAA,CAAiBxV,GACf,MAAM+c,EAAM9kB,KAAKsd,cAActV,QAAQD,IAC1B,IAAT+c,EAEF9kB,KAAKsd,cAAcrV,KAAKF,GAGxB/H,KAAKsd,cAAcpV,OAAO4c,EAAK,EAEnC,EAGApH,QAAAA,GACE1d,KAAK0f,KAAO,IAAI1f,KAAKqd,aACrBrd,KAAKqd,YAAc,GACnBrd,KAAKkd,MAAQ,UACf,EAGAS,QAAAA,GACI3d,KAAKyjB,gBACL,MAAMsB,EAAc,EAGpB/kB,KAAKuf,QAAQtX,QAAQjI,KAAKqd,aAC1Brd,KAAKqd,YAAc,GAGnBrd,KAAK0kB,cAGL,IAAK,IAAI9I,EAAI,EAAGA,EAAImJ,EAAanJ,IAAK,CAClC,KAAI5b,KAAKuf,QAAQ9iB,OAAS,GAEnB,CACH8E,QAAQkjB,KAAK,sCACb,KACJ,CAJIzkB,KAAKqd,YAAYpV,KAAKjI,KAAKuf,QAAQsF,MAK3C,CAGAhR,MAAM,YAAY7T,KAAKyjB,wBAAwBzjB,KAAKqd,YAAY5gB,uCAAuCuD,KAAKyjB,6FAE5GzjB,KAAKkd,MAAQ,cACbld,KAAKsd,cAAgB,EACzB,EAGAM,QAAAA,GACE,GAAI5d,KAAKuf,QAAQ9iB,OAAS,EAAG,CAC3B,MAAMuoB,EAAYhlB,KAAKuf,QAAQsF,MACZ,gBAAf7kB,KAAKkd,MAENld,KAAKqd,YAAYpV,KAAK+c,GACC,aAAfhlB,KAAKkd,OAEbld,KAAK0f,KAAKzX,KAAK+c,EAEpB,MACEzjB,QAAQkjB,KAAK,iCAEjB,EAGAC,WAAAA,GACEnjB,QAAQC,IAAI,gCAAiCxB,KAAKuf,QAAQ9iB,QACtDuD,KAAKuf,QAAQ9iB,OAAS,GAEtB8E,QAAQC,IAAI,wCAAyCxB,KAAKuf,QAAQ3L,OAAO,GAAGhQ,KAAIsO,GAAKA,EAAE1S,QAI3F,IAAK,IAAIoc,EAAI5b,KAAKuf,QAAQ9iB,OAAS,EAAGmf,EAAI,EAAGA,IAAK,CAChD,MAAMqJ,EAAI5L,KAAK6L,MAAM7L,KAAK8L,UAAYvJ,EAAI,KAEzC5b,KAAKuf,QAAQ3D,GAAI5b,KAAKuf,QAAQ0F,IAAM,CAACjlB,KAAKuf,QAAQ0F,GAAIjlB,KAAKuf,QAAQ3D,GACtE,CAEI5b,KAAKuf,QAAQ9iB,OAAS,GAEtB8E,QAAQC,IAAI,uCAAwCxB,KAAKuf,QAAQ3L,OAAO,GAAGhQ,KAAIsO,GAAKA,EAAE1S,QAE1F+B,QAAQC,IAAI,yBACd,EAGAghB,cAAAA,GACIjhB,QAAQC,IAAI,+CACZxB,KAAK0kB,cAED1kB,KAAK2hB,mBACL3hB,KAAK8hB,oBAEb,EAGAtB,oBAAAA,GACExgB,KAAKoe,cAAgB,EACrB7c,QAAQC,IAAI,8BAA8BxB,KAAKoe,gBAC/Cpe,KAAKikB,kBACP,EAGA/F,mBAAAA,CAAoBkH,GAElBliB,OAAOuR,KAAKzU,KAAKge,gBAAgBhM,SAAQhX,IACjCA,IAAQoqB,IACRplB,KAAKge,eAAehjB,IAAO,EAC/B,IAGJgF,KAAKge,eAAeoH,IAASplB,KAAKge,eAAeoH,GACjD7jB,QAAQC,IAAI,WAAW4jB,kBAAsBplB,KAAKge,eAAeoH,GACnE,EAGAC,kBAAAA,CAAmBC,EAAUvd,GACzB,MAAMwd,EAAYvlB,KAAKwlB,aAAaF,GACpC,OAAKC,GAAaxd,EAAQ,GAAKA,GAASwd,EAAU9oB,QAC9C8E,QAAQyN,MAAM,2BAA2BsW,sBAA6Bvd,KAC/D,MAGJwd,EAAUrd,OAAOH,EAAO,GAAG,EACtC,EAGAuW,SAAAA,CAAUjL,EAAOrU,EAAMomB,EAAMrd,GACzBxG,QAAQC,IAAI,eAAexC,EAAKQ,aAAa4lB,KAAQrd,MAErDsL,EAAMoS,aAAaC,QAAQ,aAAcre,KAAKE,UAAU,CAAEoe,OAAQ3mB,EAAK6f,QAAU7f,EAAKtE,GAAI0qB,OAAMrd,WAChGsL,EAAMoS,aAAaG,cAAgB,OAEnC5lB,KAAKijB,YAAcjkB,EACnBgB,KAAKkjB,gBAAkBkC,EACvBplB,KAAKmjB,iBAAmBpb,CAC5B,EAGA+V,QAAAA,CAASzK,EAAOwS,GACZxS,EAAMyS,iBACNvkB,QAAQC,IAAI,YAAYqkB,KACxB,IAEI,MAAM1iB,EAAOkE,KAAKC,MAAM+L,EAAMoS,aAAaM,QAAQ,gBAC7C,OAAEJ,EAAQP,KAAMY,GAAe7iB,EAGrC,IAAI8iB,EAFJ1kB,QAAQC,IAAI,oBAAoBmkB,UAAeK,QAAiBH,KAGhE,IAAIK,GAAqB,EAEzB,MAAMC,EAAcnmB,KAAKwlB,aAAaQ,GACtC,IAAKG,EAAkE,YAAnD5kB,QAAQyN,MAAM,uBAAwBgX,GAK1D,GAFAE,EAAoBC,EAAYC,WAAUlU,IAAMA,EAAE2M,QAAU3M,EAAExX,MAAQirB,KAE3C,IAAvBO,EAGA,YADA3kB,QAAQyN,MAAM,QAAQ2W,8BAAmCK,2BAM7D,GADAC,EAAaE,EAAYje,OAAOge,EAAmB,GAAG,IACjDD,EAAyE,YAA3D1kB,QAAQyN,MAAM,4CAGjC,GAAIiX,EAAW5F,SAA0B,gBAAf2F,IACH,SAAfH,GAAwC,YAAfA,GAA2C,cAAfA,GAA6C,UAAfA,GAGnF,OAFAtkB,QAAQC,IAAI,SAASykB,EAAWzmB,2CAA2CqmB,WAC3E7lB,KAAKijB,YAAc,MAM3B,MAAMoD,EAAcrmB,KAAKwlB,aAAaK,GACtC,IAAKQ,EAID,OAHA9kB,QAAQyN,MAAM,uBAAwB6W,QAEtCM,EAAYje,OAAOge,EAAmB,EAAGD,GAS7C,GAJAA,EAAWnH,QAAS,EACpBmH,EAAWpN,SAAW,KAGH,gBAAfgN,EAA8B,CAE9B,MAAMS,EAAkBjT,EAAMkT,cAAcC,wBAC5CP,EAAWpN,SAAW,CAClBkB,EAAG1G,EAAMoT,QAAUH,EAAgBpG,KACnC1G,EAAGnG,EAAMqT,QAAUJ,EAAgBtG,KAEvCqG,EAAYpe,KAAKge,EACrB,KAA0B,YAAfJ,GAENQ,EAAYpe,KAAKge,GACjB1kB,QAAQC,IAAI,SAASykB,EAAWzmB,oCAGjC6mB,EAAYpe,KAAKge,GAGrB1kB,QAAQC,IAAI,SAASykB,EAAWzmB,aAAawmB,QAAiBH,IAClE,CAAE,MAAOc,GACLplB,QAAQyN,MAAM,+BAAgC2X,EAClD,CAAE,QAEG3mB,KAAKijB,YAAc,KACnBjjB,KAAKkjB,gBAAkB,KACvBljB,KAAKmjB,iBAAmB,IAC7B,CACJ,EAKAnE,SAAAA,CAAU3L,EAAOrU,EAAM+I,GAEnB,GAAqB,IAAjBsL,EAAMuT,OAAc,OAExB,IAAKvT,EAAMC,OAAO0Q,QAAQ,qBAAsB,OAEhDziB,QAAQC,IAAI,2BAA2BxC,EAAKQ,QAC5CQ,KAAKojB,2BAA4B,EACjCpjB,KAAKqjB,4BAA8Btb,EAG9B/I,EAAK6Z,WACN7Z,EAAK6Z,SAAW,CAAEkB,EAAG,GAAIP,EAAG,KAIhC,MAAMqN,EAAWxT,EAAMC,OAAO0Q,QAAQ,qBAAqBwC,wBAC3DxmB,KAAKsjB,gBAAkB,CACnBvJ,EAAG1G,EAAMoT,QAAUI,EAAS3G,KAC5B1G,EAAGnG,EAAMqT,QAAUG,EAAS7G,KAIhCvf,SAASC,iBAAiB,YAAaV,KAAKof,qBAC5C3e,SAASC,iBAAiB,UAAWV,KAAKkf,UAC1C7L,EAAMyS,gBACV,EAGAhC,UAAAA,CAAWzQ,GAEP,IAAKrT,KAAKojB,2BAA6BpjB,KAAKqjB,4BAA8B,EAAG,OAC7E,MAAMrkB,EAAOgB,KAAK4e,YAAY5e,KAAKqjB,6BACnC,IAAKrkB,EAAM,OAGX,MAAM8nB,EAAuB9mB,KAAK+mB,IAAIC,cAAc,sBAAsBR,wBAGpES,EAAO5T,EAAMoT,QAAUK,EAAqB5G,KAAOlgB,KAAKsjB,gBAAgBvJ,EACxEmN,EAAO7T,EAAMqT,QAAUI,EAAqB9G,IAAMhgB,KAAKsjB,gBAAgB9J,EAG7Exa,EAAK6Z,SAAW,CAAEkB,EAAGkN,EAAMzN,EAAG0N,EAClC,EAGAhI,QAAAA,GACQlf,KAAKojB,4BACL7hB,QAAQC,IAAI,yBAAyBxB,KAAK4e,YAAY5e,KAAKqjB,8BAA8B7jB,QACzFQ,KAAKojB,2BAA4B,EACjCpjB,KAAKqjB,6BAA+B,EAEpC5iB,SAASG,oBAAoB,YAAaZ,KAAKof,qBAC/C3e,SAASG,oBAAoB,UAAWZ,KAAKkf,UAErD,EAKAV,YAAAA,CAAanL,EAAOrU,EAAMomB,EAAMrd,GAC9BsL,EAAMyS,iBACNzS,EAAM8T,kBAEN,IAAIC,EAAcrf,EAClB,MAAMwd,EAAYvlB,KAAKwlB,aAAaJ,GACpC,IAAKG,EAAqE,YAAxDhkB,QAAQyN,MAAM,gBAAgBoW,sBAahD,GAVa,SAATA,EACFgC,EAAcpnB,KAAK6f,oBAAoB7gB,IAIjC+I,GAASwd,EAAU9oB,SAAW8oB,EAAUxd,GAAO8W,QAAU0G,EAAUxd,GAAOrN,OAASsE,EAAK6f,QAAU7f,EAAKtE,OACvG0sB,EAAc7B,EAAUa,WAAUlU,IAAMA,EAAE2M,QAAU3M,EAAExX,OAASsE,EAAK6f,QAAU7f,EAAKtE,QAItE,IAAjB0sB,EACsE,YAAtE7lB,QAAQyN,MAAM,qBAAqBhQ,EAAKQ,qBAAqB4lB,KAIjEplB,KAAK+f,YAAc/gB,EACnBgB,KAAKmgB,YAAciF,EACnBplB,KAAKujB,aAAe6D,EAGpB,MAAMC,EAAShU,EAAMoT,QACfa,EAASjU,EAAMqT,QACfa,EAAiBC,OAAOC,YACxBC,EAAsB,IACtBC,EAAaJ,EAAiBD,EAC9BM,EAAU,EAEhB,IAAIC,EAGAF,EAAaD,GACbG,EAAOP,EAASI,EAAsBE,EAElCC,EAAOD,IACPC,EAAOD,IAIXC,EAAOP,EAASM,EAIpB,MAAME,EAAOT,EAASO,EAGtB5nB,KAAKigB,oBAAsB,CAAElG,EAAG+N,EAAMtO,EAAGqO,GAGzC7nB,KAAK8f,iBAAkB,EACvBve,QAAQC,IAAI,2BAA2BxC,EAAKQ,WAAW4lB,KAAQgC,UAAoBU,MAASD,KAC9F,EAGA5D,gBAAAA,GACEjkB,KAAK8f,iBAAkB,EACvB9f,KAAK+f,YAAc,KACnB/f,KAAKmgB,YAAc,KACnBngB,KAAKujB,aAAe,IACtB,EAGAwE,mBAAAA,CAAoBlC,EAAYmC,EAAkB,OAChD,MAAMhpB,EAAOgB,KAAKioB,qBAClB,IAAKjpB,EAGH,OAFAuC,QAAQyN,MAAM,mDACdhP,KAAKikB,mBAIP,MAAM+B,EAAahmB,KAAKmgB,YAClB+H,EAAcloB,KAAKujB,aAGzB,GAAIvkB,EAAKqhB,SAA0B,gBAAf2F,IACC,SAAfH,GAAwC,YAAfA,GAA2C,cAAfA,GAA6C,UAAfA,GAIrF,OAHAtkB,QAAQC,IAAI,SAASxC,EAAKQ,4BAA4BwmB,QAAiBH,MACvE7lB,KAAKqlB,mBAAmBW,EAAYkC,QACpCloB,KAAKikB,mBAMLjlB,EAAK0T,cAEY,cAAfmT,GAA6C,UAAfA,GAAyC,SAAfA,GAAwC,YAAfA,GACnFtkB,QAAQkjB,KAAK,aAAazlB,EAAKQ,iBAAiBqmB,iEAGhC,YAAfA,GAA2C,YAAfG,GAC7BhmB,KAAKwgB,wBAKT,MAAM2H,EAAcnoB,KAAKqlB,mBAAmBW,EAAYkC,GACxD,IAAKC,EAGH,OAFA5mB,QAAQyN,MAAM,oBAAoBhQ,EAAKQ,aAAawmB,UACpDhmB,KAAKikB,mBAKP,MAAMoC,EAAcrmB,KAAKwlB,aAAaK,GACtC,IAAKQ,EAKH,OAJA9kB,QAAQyN,MAAM,gCAAiC6W,GAE/C7lB,KAAKwlB,aAAaQ,IAAa9d,OAAOggB,EAAa,EAAGC,QACtDnoB,KAAKikB,mBAKPkE,EAAYrJ,QAAS,EACrBqJ,EAAYtP,SAAW,KAGJ,gBAAfgN,GACFsC,EAAYtP,SAAW,CAAEkB,EAAG,GAAIP,EAAG,IACnC6M,EAAYpe,KAAKkgB,IACO,YAAftC,EAEe,WAApBmC,GACD3B,EAAY+B,QAAQD,GACpB5mB,QAAQC,IAAI,SAAS2mB,EAAY3oB,+BAEjC6mB,EAAYpe,KAAKkgB,GACjB5mB,QAAQC,IAAI,SAAS2mB,EAAY3oB,2BAIpC6mB,EAAYpe,KAAKkgB,GAGnB5mB,QAAQC,IAAI,SAAS2mB,EAAY3oB,aAAawmB,QAAiBH,KAC/D7lB,KAAKikB,kBACP,EAGA7D,UAAAA,CAAWyF,GACT7lB,KAAK+nB,oBAAoBlC,EAC3B,EAGAvF,kBAAAA,GACEtgB,KAAK+nB,oBAAoB,UAAW,MACtC,EAGAxH,qBAAAA,GACEvgB,KAAK+nB,oBAAoB,UAAW,SACtC,EAGAnlB,QAAAA,GACE,MAAM5D,EAAOgB,KAAKioB,qBAEdjpB,GAAQA,EAAKoC,YAAY3E,OAAS,IACnCuC,EAAK8D,SAAW9D,EAAK8D,QACrBvB,QAAQC,IAAI,GAAGxC,EAAKQ,mBAAmBR,EAAK8D,QAAU,OAAS,YAElE9C,KAAKikB,kBACP,EAGAxD,OAAAA,GACE,MAAMzhB,EAAOgB,KAAKioB,qBAEdjpB,GAA6B,gBAArBgB,KAAKmgB,cACdnhB,EAAK8f,QAAU9f,EAAK8f,OACpBvd,QAAQC,IAAI,GAAGxC,EAAKQ,QAAQR,EAAK8f,OAAS,SAAW,eAExD9e,KAAKikB,kBACP,EAGAvD,UAAAA,GACE,MAAM1hB,EAAOgB,KAAKioB,qBACdjpB,GAA6B,gBAArBgB,KAAKmgB,mBAEQ5P,IAAlBvR,EAAKqgB,UAA4C,OAAlBrgB,EAAKqgB,WAAmBrgB,EAAKqgB,SAAW,GAC3ErgB,EAAKqgB,WACL9d,QAAQC,IAAI,oBAAoBxC,EAAKQ,SAASR,EAAKqgB,oBAEtDrf,KAAKikB,kBACP,EAGAtD,aAAAA,GACE,MAAM3hB,EAAOgB,KAAKioB,qBAEdjpB,GAA6B,gBAArBgB,KAAKmgB,aAAiCnhB,EAAKqgB,SAAW,IAC/DrgB,EAAKqgB,WACL9d,QAAQC,IAAI,wBAAwBxC,EAAKQ,SAASR,EAAKqgB,oBAE1Drf,KAAKikB,kBACP,EAGArD,iBAAAA,GACE,MAAM5hB,EAAOgB,KAAKioB,qBACdjpB,GAA6B,gBAArBgB,KAAKmgB,aAEfngB,KAAKuhB,SAAWviB,EAAKgD,OAAS,GAC9BhC,KAAKwhB,aAAexiB,EAAKiD,WAAa,GACtCjC,KAAKohB,aAAc,GAElBphB,KAAKikB,kBAEV,EAGApD,eAAAA,GACE,MAAM7hB,EAAOgB,KAAKioB,qBACdjpB,GAA6B,gBAArBgB,KAAKmgB,aACfngB,KAAKghB,UAAY,GAAGhiB,EAAKQ,aACzBQ,KAAKkhB,cAAgBlhB,KAAKwd,aAAaxe,GACvCgB,KAAKihB,cAAgB,EACrBjhB,KAAK8gB,gBAAiB,GAEpB9gB,KAAKikB,kBAEX,EAKA3E,QAAAA,GAEEtf,KAAKghB,UAAY,GACjBhhB,KAAKihB,cAAgB,EACrBjhB,KAAKkhB,cAAgB,GACrBlhB,KAAK8gB,gBAAiB,CACxB,EAGAK,WAAAA,GAEE,MAAM/Q,EAAWiJ,KAAK7S,IAAI,EAAG6hB,OAAOroB,KAAKihB,gBAAkB,GACrDzhB,EAAOQ,KAAKghB,UAAUlZ,QAAU,QAChCwgB,EAAWtoB,KAAKkhB,cAAcpZ,QAAU9H,KAAK0jB,kBAGnD,IAAK,IAAI9H,EAAI,EAAGA,EAAIxL,EAAUwL,IAAK,CACjC,MAAM2M,EAAW,CACf/oB,KAAMA,EACN6gB,SAAS,EAETxB,OAAQ,SAASrf,EAAKU,QAAQ,OAAQ,QAAQ8T,KAAKwQ,SAAS5I,IAE5Dva,WAAY,CAAEC,OAAQgnB,GAEtBxJ,QAAQ,EACRhc,SAAS,EACTuc,SAAU,EACVxG,SAAU,CAAEkB,EAAG,GAAS,GAAJ6B,EAAQpC,EAAG,GAAS,GAAJoC,GACpC5Z,WAAOuO,EACPtO,eAAWsO,GAEbvQ,KAAK4e,YAAY3W,KAAKsgB,EACxB,CACAhnB,QAAQC,IAAI,WAAW4O,MAAa5Q,eACpCQ,KAAK+gB,qBACP,EAGAA,mBAAAA,GACE/gB,KAAK8gB,gBAAiB,EACtB9gB,KAAKikB,kBACP,EAKAvC,MAAAA,GAEE,MAAM1iB,EAAOgB,KAAKioB,qBAClB,GAAIjpB,GAA6B,gBAArBgB,KAAKmgB,YAA+B,CAE5C,MAAMne,EAA0B,KAAlBhC,KAAKuhB,cAAkBhR,EAAY8X,OAAOroB,KAAKuhB,UACvDtf,EAAkC,KAAtBjC,KAAKwhB,kBAAsBjR,EAAY8X,OAAOroB,KAAKwhB,cAErExiB,EAAKgD,MAAQA,EACbhD,EAAKiD,UAAYA,EACjBV,QAAQC,IAAI,eAAexC,EAAKQ,WAAWwC,GAAS,OAAOC,GAAa,MAC5E,MACIV,QAAQkjB,KAAK,gDAEjBzkB,KAAKqhB,UACP,EAGAA,QAAAA,GACErhB,KAAKohB,aAAc,EACnBphB,KAAKikB,kBACP,EAKAxE,aAAAA,GACEzf,KAAK6hB,mBAAqB,GAG1B7hB,KAAKgiB,qBAAuB,IAAIhiB,KAAKuf,SAASiJ,UAC9CxoB,KAAK2hB,mBAAoB,CAC3B,EAGAG,kBAAAA,GACE,MAAMjmB,EAAQmE,KAAK6hB,mBAAmBvhB,cAAcwH,OAMlD9H,KAAKgiB,qBALFnmB,EAKyBmE,KAAKuf,QAC5Bxb,QAAO/E,GAAQA,EAAKQ,KAAKc,cAAcC,SAAS1E,KAChD2sB,UALuB,IAAIxoB,KAAKuf,SAASiJ,SAOlD,EAGAvG,sBAAAA,CAAuBjjB,GAGrB,MAAM+I,EAAQ/H,KAAKuf,QAAQ6G,WAAUlU,IAAMA,EAAE2M,QAAU3M,EAAExX,OAASsE,EAAK6f,QAAU7f,EAAKtE,MACtF,IAAe,IAAXqN,EAAc,CAEhB,MAAO0gB,GAAazoB,KAAKuf,QAAQrX,OAAOH,EAAO,GAE/C/H,KAAK0f,KAAKzX,KAAKwgB,GACflnB,QAAQC,IAAI,UAAUinB,EAAUjpB,+BAEhC+B,QAAQC,IAAI,qCACZxB,KAAK0kB,cACL1kB,KAAK4hB,oBACP,MAEErgB,QAAQyN,MAAM,SAAShQ,EAAKQ,iDAEhC,EAGAoiB,kBAAAA,GACE5hB,KAAK2hB,mBAAoB,EACzB3hB,KAAK6hB,mBAAqB,GAC1B7hB,KAAKgiB,qBAAuB,EAC9B,EAKAxE,YAAAA,CAAaxe,GACX,IAAKA,EAAM,OAAOgB,KAAKwf,gBAEvB,IAEI,GAAIxgB,EAAK8D,SAAW9D,EAAKoC,YAAcpC,EAAKoC,WAAW3E,OAAS,GAAKuC,EAAKoC,WAAW,GAAGC,WACpF,OAAOrC,EAAKoC,WAAW,GAAGC,WAAWC,QAAUtC,EAAKoC,WAAW,GAAGC,WAAWqnB,OAAS1oB,KAAKwf,gBAG/F,GAAIxgB,EAAKqC,WACL,OAAOrC,EAAKqC,WAAWC,QAAUtC,EAAKqC,WAAWqnB,OAAS1oB,KAAKwf,gBAGnE,GAAIxgB,EAAKoC,YAAcpC,EAAKoC,WAAW3E,OAAS,GAAKuC,EAAKoC,WAAW,GAAGC,WACpE,OAAOrC,EAAKoC,WAAW,GAAGC,WAAWC,QAAUtC,EAAKoC,WAAW,GAAGC,WAAWqnB,OAAS1oB,KAAKwf,gBAG/F,GAAIxgB,EAAKqhB,QACL,OAAOrhB,EAAKqC,YAAYC,QAAUtB,KAAK0jB,iBAE/C,CAAE,MAAOiD,GACLplB,QAAQyN,MAAM,gCAAiChQ,GAAMQ,KAAMmnB,EAC/D,CAIA,OADAplB,QAAQkjB,KAAK,oCAAqCzlB,GAAMQ,MACjDQ,KAAKwf,eACd,EAGAgG,YAAAA,CAAaF,GACX,OAAQA,GACN,IAAK,OAAQ,OAAOtlB,KAAK0f,KACzB,IAAK,UAAW,OAAO1f,KAAKuf,QAC5B,IAAK,YAAa,OAAOvf,KAAKye,UAC9B,IAAK,QAAS,OAAOze,KAAK2e,UAC1B,IAAK,UAAW,OAAO3e,KAAKme,YAC5B,IAAK,cAAe,OAAOne,KAAK4e,YAChC,IAAK,cAAe,OAAO5e,KAAKqd,YAChC,QAEE,OADA9b,QAAQyN,MAAM,sBAAsBsW,KAC7B,KAEb,EAGAzF,mBAAAA,CAAoB8I,GAClB,OAAKA,EAEE3oB,KAAK0f,KAAK0G,WAAUpnB,IAASA,EAAK6f,QAAU7f,EAAKtE,OAASiuB,EAAW9J,QAAU8J,EAAWjuB,OAFxE,CAG3B,EAGAutB,kBAAAA,GAEI,IAAKjoB,KAAKmgB,aAAqC,OAAtBngB,KAAKujB,cAAyBvjB,KAAKujB,aAAe,EACvE,OAAO,KAEX,MAAMgC,EAAYvlB,KAAKwlB,aAAaxlB,KAAKmgB,aAEzC,OAAKoF,GAAavlB,KAAKujB,cAAgBgC,EAAU9oB,QAC7C8E,QAAQyN,MAAM,iBAAiBhP,KAAKujB,uCAAuCvjB,KAAKmgB,qBAAqBoF,GAAW9oB,WACzG,MAGJ8oB,EAAUvlB,KAAKujB,aAC1B,ICpwCJ,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UVgPA,IACE/jB,KAAM,cACN6D,WAAY,CAAEulB,YAAW,GAAEC,YAAW,GAAEC,WAAU,GAAEC,cAAaA,IACjEnpB,MAAO,CACLjB,aAAcuE,QAEhBC,IAAAA,GACE,MAAO,CACLqH,MAAO,GACPjC,WAAY,KACZqC,qBAAqB,EACrBgB,qBAAqB,EACrBod,mBAAmB,EACnBzc,wBAAwB,EACxBtB,YAAa,GACbG,kBAAmB,KACnBW,eAAgB,GAChBE,iBAAkB,GAClBgd,aAAc,KACdvS,UAAW,EACXjK,aAAc,KACdtE,eAAgB,WAChBE,aAAc,KACd6gB,mBAAoB,KACpBre,iBAAiB,EACjB7B,iBAAiB,EACjBI,gBAAgB,EAChB4D,gBAAgB,EAChBtE,YAAY,EACZC,aAAc,GACdsE,mBAAmB,EACnBkc,wBAAyB,KAE7B,EACA/lB,SAAU,CACRsG,WAAAA,GACE,OAAK1J,KAAKuI,WACHvI,KAAKuI,WAAW9K,MACpBmW,QACAc,MAAK,CAACC,EAAGC,KAAOD,EAAEyF,KAAO,IAAMxF,EAAEwF,KAAO,KAHd,EAI/B,EACAlR,UAAAA,GACE,OAAKlJ,KAAKuI,WACHvI,KAAKuI,WAAW9K,MAAM6W,QAAO,CAACC,EAAOvV,IAASuV,GAASvV,EAAK8K,OAAS,IAAI,GADnD,CAE/B,EACA1B,aAAAA,GACE,MAAO,CACL,SAAY,yBACZ,UAAa,qBACb,aAAgB,gCAChB,MAAS,oBACTpI,KAAKmI,eACT,EACAihB,cAAAA,GACF,OAAOppB,KAAKwK,MAAM8J,QAAO,CAAC+U,EAAK5e,IACxBA,GAASA,EAAKhN,OACnB4rB,EAAI5e,EAAK/P,IAAM+P,EAAKhN,MAAM6W,QAAO,CAACgV,EAAKpX,IAAMoX,EAAMpX,EAAE9B,UAAU,GACxDiZ,GAF0BA,GAGhC,CAAC,EACN,GAGAvpB,QAAS,CACL,qBAAMypB,GACJ,IACE,MAAMC,EAAYxV,KAAKwQ,YACjBtW,KACNlO,KAAKmI,eAAiB,YACtBnI,KAAKqI,aAAe,IAAI2L,KACxBzS,QAAQC,IAAI,2BAA2BwS,KAAKwQ,MAAQgF,OACtD,CAAE,MAAOxa,GACPhP,KAAKmI,eAAiB,eACtB5G,QAAQyN,MAAM,8BAA+BA,EAC/C,CACF,EAEA1G,UAAAA,CAAWmhB,GACT,OAAOA,EAAKC,mBAAmB,GAAI,CAAEC,KAAM,UAAWC,OAAQ,WAChE,EAEA,qBAAMC,GACJ,IACEtoB,QAAQsiB,MAAM,yBAGdtiB,QAAQC,IAAI,kCACZ,MAAMsoB,QAAsB5b,KAC5B3M,QAAQC,IAAI,qBAAsBsoB,GAGlC,MAAMC,EAAaC,aAAaC,QAAQ,aAiBxC,OAhBA1oB,QAAQC,IAAI,0BAA2BuoB,EAAa1iB,KAAKC,MAAMyiB,GAAc,SAG7ExoB,QAAQC,IAAI,yBAA0BxB,KAAKwK,OAE3CjJ,QAAQ2oB,WAGJJ,GAAiBA,EAAcrtB,OAAS,EAC1CoX,MAAM,mBAAmBiW,EAAcrtB,uBAC9BstB,EACTlW,MAAM,gDAENA,MAAM,sDAGDiW,EAAgB,WAAa,OACtC,CAAE,MAAO9a,GAGP,OAFAzN,QAAQyN,MAAM,sBAAuBA,GACrC6E,MAAM,kDACC,OACT,CACF,EAEApL,gBAAAA,CAAiBgC,GACfzK,KAAKyM,aAAehC,EACpBzK,KAAKuM,wBAAyB,CAChC,EAEA,uBAAMI,GACJ,GAAK3M,KAAKyM,aAAV,CAEA,UACQ8B,GAAWvO,KAAKyM,aAAa/R,IACnC,MAAMqN,EAAQ/H,KAAKwK,MAAM4b,WAAUhC,GAAKA,EAAE1pB,KAAOsF,KAAKyM,aAAa/R,MACpD,IAAXqN,IACF/H,KAAKwK,MAAMtC,OAAOH,EAAO,GACzBiiB,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAElDxK,KAAKuI,YAAcvI,KAAKuI,WAAW7N,KAAOsF,KAAKyM,aAAa/R,KAC9DsF,KAAKuI,WAAa,MAGxB,CAAE,MAAOyG,GACPzN,QAAQyN,MAAM,uBAAwBA,GAEtC,MAAMjH,EAAQ/H,KAAKwK,MAAM4b,WAAUhC,GAAKA,EAAE1pB,KAAOsF,KAAKyM,aAAa/R,MACpD,IAAXqN,IACF/H,KAAKwK,MAAMtC,OAAOH,EAAO,GACzBiiB,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAElDxK,KAAKuI,YAAcvI,KAAKuI,WAAW7N,KAAOsF,KAAKyM,aAAa/R,KAC9DsF,KAAKuI,WAAa,MAGxB,CAEAvI,KAAKuM,wBAAyB,EAC9BvM,KAAKyM,aAAe,IA5BU,CA6BhC,EAEA,sBAAMK,CAAiB0G,GACrB,MAAM4W,EAAU,CACd1vB,GAAIsZ,KAAKwQ,MAAM7J,WACfnb,KAAMgU,EAAShU,KACf+J,UAAWiK,EAASjK,UACpBxH,OAAQyR,EAASzR,OACjBtE,MAAO+V,EAAS/V,MAChBsW,QAASP,EAASO,SAGpB,UAEQzJ,GAAS8f,GAEfpqB,KAAKwK,MAAMvC,KAAKmiB,GAEhBJ,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAEtDxK,KAAK6K,iBAAkB,EACvB7K,KAAK0K,SAAS0f,EAChB,CAAE,MAAOpb,GACPzN,QAAQyN,MAAM,wBAAyBA,GAEvChP,KAAKwK,MAAMvC,KAAKmiB,GAChBJ,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAEtDxK,KAAK6K,iBAAkB,EACvB7K,KAAK0K,SAAS0f,EAChB,CACF,EAEA,kBAAM7f,CAAaiE,EAAS,MAC9B,IACEjN,QAAQC,IAAI,8BAA+BgN,GAG3CxO,KAAKiN,mBAAoB,QACnBjN,KAAK+jB,kBAGL/jB,KAAKqqB,uBACX9oB,QAAQC,IAAI,6BAA8BxB,KAAKwK,MAAM/N,QAGrDuD,KAAKmpB,wBAA0B3a,EAG/BxO,KAAKiN,mBAAoB,CAE3B,CAAE,MAAO+B,GACPzN,QAAQyN,MAAM,0BAA2BA,GAEzChP,KAAKiN,mBAAoB,CAC3B,CACF,EAEIpD,kBAAAA,CAAmB7K,GACjB,MAAM+C,EAAS/C,EAAK8U,gBAAkB,GACtC,GAAsB,IAAlB/R,EAAOtF,OAAc,MAAO,uCAEhC,GAAsB,IAAlBsF,EAAOtF,OAAc,CACvB,MAAM0H,EAAW,CACf,EAAK,2BACL,EAAK,2BACL,EAAK,2BACL,EAAK,2BACL,EAAK,4BAEP,MAAO,yCAAyCA,EAASpC,EAAO,mBAClE,CAEA,MAAMuoB,EAAgBvoB,EAAO6B,KAAI,CAACQ,EAAO2D,KACvC,MAAM5D,EAAW,CACf,EAAK,2BACL,EAAK,2BACL,EAAK,2BACL,EAAK,2BACL,EAAK,4BAED0U,EAAY9Q,EAAQhG,EAAOtF,OAAU,IAC3C,MAAO,GAAG0H,EAASC,MAAUyU,IAAW,IACvC7U,KAAK,MAER,MAAO,uCAAuCsmB,qBAChD,EAEAtgB,qBAAAA,CAAsBhL,GACpB,MAAMic,EAAc,sBAAsB/W,KAAKlF,EAAKqD,WAC9CkoB,EAAkBvrB,EAAK8E,aAAaxD,cACvCC,SAAS,6CACZ,OAAO0a,GAAesP,CACxB,EAEA5gB,oBAAAA,CAAqB3K,GACnB,IAAKgB,KAAKuI,YAAYgB,UAAW,OAAO,EAExC,MAAMihB,EAAkBxqB,KAAKuI,WAAWgB,UAAUuK,gBAAkB,GAC9D2W,EAAazrB,EAAK8U,gBAAkB,GAE1C,QAA0B,IAAtB2W,EAAWhuB,SAAgBuC,EAAKqD,WAAW/B,cAAcC,SAAS,UAI/DkqB,EAAWC,OAAMtmB,GAASomB,EAAgBjqB,SAAS6D,IAC5D,EAEAwF,kBAAAA,CAAmB5K,GACjB,GAAmC,WAA/BA,EAAK2rB,YAAYphB,UAAwB,OAAO,EAEpD,MAAMqhB,EAAgB,CAAC,MAAO,MAAO,MAAO,MAAO,OACnD,OAAIA,EAAcrqB,SAASvB,EAAKyF,KAAKnE,iBAIX,WAAtBtB,EAAK6rB,eAA6B7rB,EAAK8rB,eAAevqB,SAAS,SAKrE,EAEA0I,YAAAA,CAAalH,GACX,OAAKA,GAA4B,IAAlBA,EAAOtF,OACfsF,EACJ6B,KAAIQ,GAAS,4BAA4BA,EAAM9D,2BAC/C0D,KAAK,KAHmC,qCAI7C,EAEArE,cAAAA,CAAeM,GACb,OAAKA,EACEA,EAASC,QAAQ,gBAAgB,CAACC,EAAOC,KAC9C,IAAIC,EAAWD,EAAOE,cAetB,MAbiB,MAAbD,GAAiC,QAAbA,IACtBA,EAAW,KAEI,MAAbA,GAAiC,UAAbA,IACtBA,EAAW,KAETA,EAASE,SAAS,OACpBF,EAAWA,EAASH,QAAQ,IAAK,KAE/B,QAAQgE,KAAK7D,KACfA,EAAWA,EAAS0qB,SAAS,EAAG,KAAKnX,OAAO,IAGvC,4BAA4BvT,YAAmB,IAjBlC,EAmBxB,EAEAqK,QAAAA,CAASD,GACPzK,KAAKuI,WAAalB,KAAKC,MAAMD,KAAKE,UAAUkD,GAC9C,EAEAjC,WAAAA,GACExI,KAAKuI,WAAa,IACpB,EAEAiB,eAAAA,CAAgBxK,GACdgB,KAAKT,MAAM,YAAaP,EAC1B,EAEApB,aAAAA,CAAcoB,GACZ,IAAKgB,KAAKuI,WAER,OADAsL,MAAM,gCACC,EAET,IAAK7T,KAAK2J,qBAAqB3K,GAE7B,OADA6U,MAAM,gBAAgB7U,EAAKQ,yDACpB,EAGT,IAAKQ,KAAK4J,mBAAmB5K,GAAO,CAClC,MAAMgsB,EAAaC,QACjB,OAAOjsB,EAAKQ,uEAEd,IAAKwrB,EAAY,OAAO,CAC1B,CAEA,MAAME,EAAgBlrB,KAAKuI,WAAW9K,MAAM2oB,WAAUlU,GAAKA,EAAExX,KAAOsE,EAAKtE,KAEzE,GAAIwwB,GAAiB,EACflrB,KAAKgK,sBAAsBhL,GACxBgB,KAAKuI,WAAW9K,MAAMytB,GAAephB,MAGxC9J,KAAKuI,WAAW9K,MAAMytB,GAAephB,QAFrC9J,KAAKuI,WAAW9K,MAAMytB,GAAephB,MAAQ,EAK/C+J,MAAM,gEAEH,CACL,MAAMsX,EAAU9jB,KAAKC,MAAMD,KAAKE,UAAUvI,IAC1CgB,KAAKuI,WAAW9K,MAAMwK,KAAKkjB,EAC7B,CACAnrB,KAAKorB,cACP,EAEAnhB,UAAAA,CAAWjL,EAAMqU,GACf,MAAMtL,EAAQ/H,KAAKuI,WAAW9K,MAAM2oB,WAAUlU,GAAKA,EAAExX,KAAOsE,EAAKtE,KACjE,IAAe,IAAXqN,GAAgB/H,KAAKgK,sBAAsBhL,KACxCgB,KAAKuI,WAAW9K,MAAMsK,GAAO+B,MAGhC9J,KAAKuI,WAAW9K,MAAMsK,GAAO+B,QAF7B9J,KAAKuI,WAAW9K,MAAMsK,GAAO+B,MAAQ,EAInCuJ,GAAO,CACT,MAAMgY,EAAchY,EAAMC,OAAO0Q,QAAQ,cACrCqH,IACFA,EAAYC,UAAUpY,IAAI,cAC1BF,YAAW,IAAMqY,EAAYC,UAAUC,OAAO,eAAe,KAEjE,CAEJ,EAEAphB,UAAAA,CAAWnL,GACT,MAAM+I,EAAQ/H,KAAKuI,WAAW9K,MAAM2oB,WAAUlU,GAAKA,EAAExX,KAAOsE,EAAKtE,MAClD,IAAXqN,IACE/I,EAAK8K,OAAS9K,EAAK8K,MAAQ,EAC7B9J,KAAKuI,WAAW9K,MAAMsK,GAAO+B,QAE7B9J,KAAKuI,WAAW9K,MAAMyK,OAAOH,EAAO,GAG1C,EAGJ,0BAAMoD,GAGJ,GAFAnL,KAAK4L,qBAAsB,EAEvB5L,KAAK+L,eAAetP,OAAS,EAE/B,YADAuD,KAAKiM,iBAAmB,IAI1B,MAAMpQ,EAAQ2vB,mBAAmB,GAAGxrB,KAAK+L,+CAEzC,IACE,MAAMkF,QAAiBwa,MAAM,2CAA2C5vB,KAClEsH,QAAa8N,EAASya,OAC5B1rB,KAAKiM,iBAAmB9I,EAAKA,MAAQ,EACvC,CAAE,MAAOuQ,GACPnS,QAAQyN,MAAM,2BAA4B0E,GAC1C1T,KAAKiM,iBAAmB,EAC1B,CACF,EAIIC,eAAAA,CAAgBlN,GACdgB,KAAKoL,kBAAoBpM,EACzBgB,KAAK4L,qBAAsB,CAC7B,EAEA,gBAAMF,GACJ,GAAI1L,KAAKiL,aAAejL,KAAKoL,kBAAmB,CAC9C,MAAMgf,EAAU,CACd1vB,GAAIsZ,KAAKwQ,MAAM7J,WACfnb,KAAMQ,KAAKiL,YACX1B,UAAWvJ,KAAKoL,kBAChBrJ,OAAQ/B,KAAKoL,kBAAkB0I,gBAAkB,GACjDrW,MAAO,CAACuC,KAAKoL,mBACb2I,SAAS,IAAIC,MAAOC,eAGtB,UAEQ3J,GAAS8f,GAEfpqB,KAAKwK,MAAMvC,KAAKmiB,GAEhBJ,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAEtDxK,KAAKiL,YAAc,GACnBjL,KAAKoL,kBAAoB,KACzBpL,KAAK4K,qBAAsB,EAC3B5K,KAAK0K,SAAS0f,EAChB,CAAE,MAAOpb,GACPzN,QAAQyN,MAAM,qBAAsBA,GAEpChP,KAAKwK,MAAMvC,KAAKmiB,GAChBJ,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,QAEtDxK,KAAKiL,YAAc,GACnBjL,KAAKoL,kBAAoB,KACzBpL,KAAK4K,qBAAsB,EAC3B5K,KAAK0K,SAAS0f,EAChB,CACF,CACF,EAEA,cAAM9f,GACJ,MAAMvC,EAAQ/H,KAAKwK,MAAM4b,WAAU3b,GAAQA,EAAK/P,KAAOsF,KAAKuI,WAAW7N,KACvE,IAAe,IAAXqN,EACF,IACE/H,KAAKmI,eAAiB,iBAChBmC,GAAStK,KAAKuI,YACpBvI,KAAKwK,MAAMzC,GAASV,KAAKC,MAAMD,KAAKE,UAAUvH,KAAKuI,aACnDvI,KAAKmI,eAAiB,YACtBnI,KAAKqI,aAAe,IAAI2L,IAC1B,CAAE,MAAOhF,GACPhP,KAAKmI,eAAiB,eACtB6hB,aAAaG,QAAQ,YAAa9iB,KAAKE,UAAUvH,KAAKwK,OACxD,CAEJ,EAEA,0BAAM6f,GACJ,IACErqB,KAAKmI,eAAiB,WACtB,MAAM2hB,QAAsB5b,KAC5B,GAAI4b,GAAiBA,EAAcrtB,OAAS,EAC1CuD,KAAKwK,MAAQsf,EACb9pB,KAAKmI,eAAiB,YACtBnI,KAAKqI,aAAe,IAAI2L,SACnB,CACL,MAAM2X,EAAc3B,aAAaC,QAAQ,aACrC0B,IACF3rB,KAAKwK,MAAQnD,KAAKC,MAAMqkB,GACxB3rB,KAAKmI,eAAiB,eAE1B,CACF,CAAE,MAAO6G,GACPhP,KAAKmI,eAAiB,QACtB,MAAMwjB,EAAc3B,aAAaC,QAAQ,aACrC0B,IAAa3rB,KAAKwK,MAAQnD,KAAKC,MAAMqkB,GAC3C,CACF,EAEA5iB,aAAAA,GACA/I,KAAK2I,aAAe3I,KAAKuI,WAAW/I,KACpCQ,KAAK0I,YAAa,EAClB1I,KAAK+jB,WAAU,KACb/jB,KAAK4rB,MAAMC,YAAYC,OAAO,GAElC,EAEAjjB,cAAAA,GACE7I,KAAK0I,YAAa,CACpB,EAEAE,eAAAA,GACM5I,KAAK2I,aAAab,SACpB9H,KAAKuI,WAAW/I,KAAOQ,KAAK2I,aAAab,OACzC9H,KAAK0I,YAAa,EAClB1I,KAAKsK,WAET,EAEAyhB,gBAAAA,CAAiBC,GAEfzqB,QAAQC,IAAI,4BAA6BwqB,GACzChsB,KAAKgJ,iBAAkB,CACzB,EAEAG,aAAAA,GACMnJ,KAAKuI,WACLvI,KAAKgN,gBAAiB,EAEtBzL,QAAQkjB,KAAK,mCAEjB,EAEA9Z,gBAAAA,CAAiBF,GACjB,OAAKA,GAASA,EAAKhN,MACZgN,EAAKhN,MAAM6W,QAAO,CAACgV,EAAKtqB,IAASsqB,GAAOtqB,EAAK8K,OAAS,IAAI,GADhC,CAEnC,EACER,gBAAAA,GACEtJ,KAAKoJ,gBAAkBpJ,KAAKoJ,cAC9B,GAEF5I,OAAAA,GACER,KAAKqqB,uBACLrqB,KAAKkpB,mBAAqB+C,YAAYjsB,KAAKupB,gBAAiB,IAC9D,EACA5oB,aAAAA,GACEurB,cAAclsB,KAAKkpB,mBAErB,GWpwBF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UtBmGA,IACE7lB,WAAY,CACV8oB,iBAAgB,EAChBC,SAAQ,EACRC,iBAAgB,GAChBC,YAAW,GACXC,YAAWA,IAEbppB,IAAAA,GACE,MAAO,CACLpG,iBAAiB,EACjBlB,MAAO,GACPW,QAAS,GACTiB,MAAO,GACPkB,aAAc,KACd6tB,oBAAqB,KACrBxuB,KAAM,EACND,SAAS,EACTF,aAAa,EACbX,QAAS,GACTE,cAAe,CACbyH,KAAM,GACNW,SAAU,GACVI,MAAO,GACPK,WAAY,GACZlE,OAAQ,GAER9B,SAAU,CAAEsG,IAAK,EAAGC,IAAK,IACzBxE,MAAO,CAAE8E,SAAU,IAAKnC,MAAO,MAC/B1C,UAAW,CAAE6E,SAAU,IAAKnC,MAAO,MACnC8nB,aAAYA,IAGlB,EACA1Y,OAAAA,GACE/T,KAAK0sB,WACP,EACA5sB,QAAS,CACP7D,gBAAiB0wB,KAAS,WACpB3sB,KAAKnE,MAAMiM,OACb9H,KAAK4sB,kBAAkB5sB,KAAKnE,OAE5BmE,KAAKxD,QAAU,EAEnB,GAAG,KAEH,uBAAMowB,CAAkB/wB,GACtB,IACE,MAAMoV,QAAiBC,EAAAA,EAAMC,IAAI,sCAAsCtV,YACvEmE,KAAKxD,QAAUyU,EAAS9N,KAAK1F,OAAOmW,MAAM,EAAG,KAAO,EACtD,CAAE,MAAO5E,GACPzN,QAAQyN,MAAM,uCAAwCA,GACtDhP,KAAKxD,QAAU,EACjB,CACF,EAEA,kBAAMJ,GACJ4D,KAAKnC,aAAc,EACnBmC,KAAKhC,KAAO,EACZgC,KAAK7B,WAAW,EAClB,EAEA,gBAAMA,CAAW0uB,EAAU,GAC7B,IACE,MAAMzb,EAAS,CACbpT,KAAM6uB,EACNhxB,MAAOmE,KAAKnE,MAAMiM,OAClB/F,OAAQ/B,KAAK5C,cAAc2E,OAAOiC,KAAK,KACvC8oB,SAAU9sB,KAAK5C,cAAc6C,UAAUsG,KAAO,EAC9CwmB,SAAU/sB,KAAK5C,cAAc6C,UAAUuG,KAAO,IAI5CxG,KAAK5C,gBAEH4C,KAAK5C,cAAcyH,KAAKpI,OAAS,IACnC2U,EAAOvM,KAAO7E,KAAK5C,cAAcyH,KAAKb,KAAK,MAIzChE,KAAK5C,cAAcoI,SAAS/I,OAAS,IACvC2U,EAAO5L,SAAWxF,KAAK5C,cAAcoI,SAASxB,KAAK,MAIjDhE,KAAK5C,cAAcwI,MAAMnJ,OAAS,IACpC2U,EAAOxL,MAAQ5F,KAAK5C,cAAcwI,MAAM5B,KAAK,MAI3ChE,KAAK5C,cAAc6I,WAAWxJ,OAAS,IACzC2U,EAAOnL,WAAajG,KAAK5C,cAAc6I,WAAWjC,KAAK,MASlB,OAAnChE,KAAK5C,cAAc4E,MAAM2C,QAC3ByM,EAAO4b,YAAchtB,KAAK5C,cAAc4E,MAAM2C,MAC9CyM,EAAO6b,eAAiBjtB,KAAK5C,cAAc4E,MAAM8E,UAIR,OAAvC9G,KAAK5C,cAAc6E,UAAU0C,QAC/ByM,EAAO8b,gBAAkBltB,KAAK5C,cAAc6E,UAAU0C,MACtDyM,EAAO+b,mBAAqBntB,KAAK5C,cAAc6E,UAAU6E,WAI7D,MAAMmK,QAAiBC,EAAAA,EAAMC,IAAI,+BAAgC,CAAEC,WACnEpR,KAAKvC,MAAQwT,EAAS9N,KAAK1F,OAAS,GACpCuC,KAAKjC,QAAUkT,EAAS9N,KAAKiqB,WAAY,EACzCptB,KAAKhC,KAAO6uB,CACd,CAAE,MAAO7d,GACPzN,QAAQyN,MAAM,wBAAyBA,GACvChP,KAAKvC,MAAQ,GACbuC,KAAKjC,SAAU,CACjB,CACF,EAEIlB,eAAAA,CAAgBmC,GACdgB,KAAKrB,aAAeK,EACpBgB,KAAKxD,QAAU,EACjB,EAEA2K,YAAAA,CAAavC,GACX5E,KAAK5C,cAAgBwH,EACrB5E,KAAKhC,KAAO,EACZgC,KAAK7B,WAAW,EAClB,EAEAZ,kBAAAA,CAAmBqK,GACjB5H,KAAK5C,cAAgBwK,EACrB5H,KAAKhC,KAAO,EACZgC,KAAK7B,WAAW,EAClB,EAEA+I,YAAAA,GACElH,KAAK5C,cAAgB,CACnByH,KAAM,GACNW,SAAU,GACVI,MAAO,GACPK,WAAY,GACZlE,OAAQ,GAER9B,SAAU,CAAEsG,IAAK,EAAGC,IAAK,IACzBxE,MAAO,CAAE8E,SAAU,IAAKnC,MAAO,MAC/B1C,UAAW,CAAE6E,SAAU,IAAKnC,MAAO,OAErC3E,KAAKhC,KAAO,EACZgC,KAAK7B,WAAW,EAClB,EAEA,eAAMuuB,GACJ,IACE,MAAMzb,QAAiBC,EAAAA,EAAMC,IAAI,8BACjCnR,KAAK9C,QAAU+T,EAAS9N,KAAK0B,MAAQ,EACvC,CAAE,MAAOmK,GACPzN,QAAQyN,MAAM,uBAAwBA,GACtChP,KAAK9C,QAAU,EACjB,CACF,EAEAU,aAAAA,CAAcoB,GACZuC,QAAQC,IAAI,uBAAwBxC,EAAKQ,MACrCQ,KAAK4rB,MAAMyB,aAAazvB,cAC1BoC,KAAK4rB,MAAMyB,YAAYzvB,cAAcoB,GAErCuC,QAAQyN,MAAM,4BAElB,EAEAlQ,WAAAA,GACE,IuBtRN,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,UxBAA,IACEuE,WAAY,CACViqB,WAAUA,KyBJd,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAASC,KAEpE,U,WCHA,MAAM5f,IAAM6f,EAAAA,EAAAA,IAAUC,IACtB9f,GAAI+f,IAAIC,GAAAA,KACRH,EAAAA,EAAAA,IAAUC,IAAKG,MAAM,O,0kBCPjBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBxd,IAAjByd,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,E,WCzBxB,IAAIG,EAAW,GACfR,EAAoBS,EAAI,SAASC,EAAQC,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASjT,EAAI,EAAGA,EAAI0S,EAAS7xB,OAAQmf,IAAK,CACrC6S,EAAWH,EAAS1S,GAAG,GACvB8S,EAAKJ,EAAS1S,GAAG,GACjB+S,EAAWL,EAAS1S,GAAG,GAE3B,IAJA,IAGIkT,GAAY,EACP7J,EAAI,EAAGA,EAAIwJ,EAAShyB,OAAQwoB,MACpB,EAAX0J,GAAsBC,GAAgBD,IAAazrB,OAAOuR,KAAKqZ,EAAoBS,GAAG7D,OAAM,SAAS1vB,GAAO,OAAO8yB,EAAoBS,EAAEvzB,GAAKyzB,EAASxJ,GAAK,IAChKwJ,EAASvmB,OAAO+c,IAAK,IAErB6J,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbR,EAASpmB,OAAO0T,IAAK,GACrB,IAAImT,EAAIL,SACEne,IAANwe,IAAiBP,EAASO,EAC/B,CACD,CACA,OAAOP,CArBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAI/S,EAAI0S,EAAS7xB,OAAQmf,EAAI,GAAK0S,EAAS1S,EAAI,GAAG,GAAK+S,EAAU/S,IAAK0S,EAAS1S,GAAK0S,EAAS1S,EAAI,GACrG0S,EAAS1S,GAAK,CAAC6S,EAAUC,EAAIC,EAwB/B,C,eC5BAb,EAAoBkB,EAAI,SAASd,GAChC,IAAIe,EAASf,GAAUA,EAAOgB,WAC7B,WAAa,OAAOhB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoB1J,EAAE6K,EAAQ,CAAEta,EAAGsa,IAC5BA,CACR,C,eCNAnB,EAAoB1J,EAAI,SAAS6J,EAASkB,GACzC,IAAI,IAAIn0B,KAAOm0B,EACXrB,EAAoBsB,EAAED,EAAYn0B,KAAS8yB,EAAoBsB,EAAEnB,EAASjzB,IAC5EkI,OAAOmsB,eAAepB,EAASjzB,EAAK,CAAEs0B,YAAY,EAAMne,IAAKge,EAAWn0B,IAG3E,C,eCPA8yB,EAAoByB,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOxvB,MAAQ,IAAIyvB,SAAS,cAAb,EAChB,CAAE,MAAO9I,GACR,GAAsB,kBAAXa,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBsG,EAAoBsB,EAAI,SAASM,EAAKC,GAAQ,OAAOzsB,OAAO0sB,UAAUC,eAAezB,KAAKsB,EAAKC,EAAO,C,eCCtG7B,EAAoBiB,EAAI,SAASd,GACX,qBAAX6B,QAA0BA,OAAOC,aAC1C7sB,OAAOmsB,eAAepB,EAAS6B,OAAOC,YAAa,CAAEprB,MAAO,WAE7DzB,OAAOmsB,eAAepB,EAAS,aAAc,CAAEtpB,OAAO,GACvD,C,eCNAmpB,EAAoBkC,EAAI,G,eCAxBlC,EAAoBlZ,EAAInU,SAASwvB,SAAWC,KAAKC,SAAS7a,KAK1D,IAAI8a,EAAkB,CACrB,IAAK,GAaNtC,EAAoBS,EAAEtJ,EAAI,SAASoL,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BptB,GAC/D,IAKI4qB,EAAUsC,EALV5B,EAAWtrB,EAAK,GAChBqtB,EAAcrtB,EAAK,GACnBstB,EAAUttB,EAAK,GAGIyY,EAAI,EAC3B,GAAG6S,EAASxc,MAAK,SAASvX,GAAM,OAA+B,IAAxB01B,EAAgB11B,EAAW,IAAI,CACrE,IAAIqzB,KAAYyC,EACZ1C,EAAoBsB,EAAEoB,EAAazC,KACrCD,EAAoBO,EAAEN,GAAYyC,EAAYzC,IAGhD,GAAG0C,EAAS,IAAIjC,EAASiC,EAAQ3C,EAClC,CAEA,IADGyC,GAA4BA,EAA2BptB,GACrDyY,EAAI6S,EAAShyB,OAAQmf,IACzByU,EAAU5B,EAAS7S,GAChBkS,EAAoBsB,EAAEgB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOvC,EAAoBS,EAAEC,EAC9B,EAEIkC,EAAqBR,KAAK,4BAA8BA,KAAK,6BAA+B,GAChGQ,EAAmB1e,QAAQse,EAAqBK,KAAK,KAAM,IAC3DD,EAAmBzoB,KAAOqoB,EAAqBK,KAAK,KAAMD,EAAmBzoB,KAAK0oB,KAAKD,G,IC/CvF,IAAIE,EAAsB9C,EAAoBS,OAAEhe,EAAW,CAAC,MAAM,WAAa,OAAOud,EAAoB,IAAM,IAChH8C,EAAsB9C,EAAoBS,EAAEqC,E","sources":["webpack://mtg-frontend/./src/App.vue","webpack://mtg-frontend/./src/components/CardSearch.vue","webpack://mtg-frontend/./src/components/CardAutocomplete.vue","webpack://mtg-frontend/./src/components/CardAutocomplete.vue?ee48","webpack://mtg-frontend/./src/components/CardGrid.vue","webpack://mtg-frontend/./src/components/CardGrid.vue?b845","webpack://mtg-frontend/./src/components/CardDetailsPopup.vue","webpack://mtg-frontend/./src/components/CardFlip.vue","webpack://mtg-frontend/./src/components/CardFlip.vue?4e15","webpack://mtg-frontend/./src/components/CardDetailsPopup.vue?c0e8","webpack://mtg-frontend/./src/components/FilterPopup.vue","webpack://mtg-frontend/./src/components/FilterPopup.vue?0e07","webpack://mtg-frontend/./src/components/DeckSidebar.vue","webpack://mtg-frontend/./src/firebase/firebase.js","webpack://mtg-frontend/./src/services/deckService.js","webpack://mtg-frontend/./src/components/ImportPopup.vue","webpack://mtg-frontend/./src/components/ImportPopup.vue?0680","webpack://mtg-frontend/./src/components/ExportPopup.vue","webpack://mtg-frontend/./src/components/ExportPopup.vue?74fc","webpack://mtg-frontend/./src/components/StatsPopup.vue","webpack://mtg-frontend/./src/components/StatsPopup.vue?7877","webpack://mtg-frontend/./src/components/PlaytestPopup.vue","webpack://mtg-frontend/./src/components/PlaytestPopup.vue?92da","webpack://mtg-frontend/./src/components/DeckSidebar.vue?eeba","webpack://mtg-frontend/./src/components/CardSearch.vue?92e8","webpack://mtg-frontend/./src/App.vue?7ccd","webpack://mtg-frontend/./src/main.js","webpack://mtg-frontend/webpack/bootstrap","webpack://mtg-frontend/webpack/runtime/chunk loaded","webpack://mtg-frontend/webpack/runtime/compat get default export","webpack://mtg-frontend/webpack/runtime/define property getters","webpack://mtg-frontend/webpack/runtime/global","webpack://mtg-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://mtg-frontend/webpack/runtime/make namespace object","webpack://mtg-frontend/webpack/runtime/publicPath","webpack://mtg-frontend/webpack/runtime/jsonp chunk loading","webpack://mtg-frontend/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <CardSearch />\n  </div>\n</template>\n\n<script>\nimport CardSearch from \"./components/CardSearch.vue\";\n\nexport default {\n  components: {\n    CardSearch,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  text-align: center;\n  color: #2c3e50;\n  background-color: #f8fcf8;\n}\n</style>\n","<template>\n  <div class=\"card-search-container\">\n  <img :src=\"require('@/assets/logo/logo1.png')\" alt=\"Deckmoor\" class=\"deckmoor-logo\" />\n    \n    <div class=\"main-content\">\n      <!-- Search Controls -->\n      <div class=\"search-controls\">\n        <div class=\"search-box-wrapper\">\n          <div class=\"search-box\">\n            <input \n              v-model=\"query\" \n              @input=\"debouncedSearch\" \n              @keyup.enter=\"submitSearch\" \n              placeholder=\"Search cards...\" \n              class=\"search-input\"\n            />\n            <button @click=\"submitSearch\" class=\"search-button\">\n              <i class=\"fas fa-search\"></i> Search\n            </button>\n          </div>\n          \n          <CardAutocomplete \n            v-if=\"results?.length > 0\"\n            :results=\"results\" \n            @select-card=\"showCardDetails\" \n          />\n        </div>\n        \n        <button @click=\"showFilterPopup = true\" class=\"filter-button\">\n          <i class=\"fas fa-filter\"></i> Advanced Options\n        </button>\n      </div>\n\n      <!-- Filter Popup -->\n      <FilterPopup \n        v-if=\"showFilterPopup\"\n        :isOpen=\"showFilterPopup\"\n        :allSets=\"allSets\"\n        :currentFilters=\"activeFilters\"\n        @close-popup=\"showFilterPopup = false\"\n        @apply-filters=\"handleApplyFilters\"\n      />\n\n      <!-- Results Area -->\n      <div class=\"results-area\">\n        <CardGrid \n          v-if=\"cards && cards.length > 0\" \n          :cards=\"cards\" \n          @select-card=\"showCardDetails\"\n          @add-to-deck=\"addCardToDeck\" \n        />\n        <div v-if=\"hasSearched && (!cards || cards.length === 0)\" class=\"no-results\">\n          No cards found matching your criteria\n        </div>\n\n        <!-- Pagination -->\n        <div class=\"pagination-container\" v-if=\"(hasMore || page > 1) && cards.length\">\n          <div class=\"pagination-controls\">\n            <button \n              @click=\"fetchCards(page - 1)\" \n              :disabled=\"page === 1\"\n              class=\"pagination-button\"\n            >\n              &lt; Previous\n            </button>\n            <span class=\"page-number\">Page {{ page }}</span>\n            <button \n              @click=\"fetchCards(page + 1)\" \n              :disabled=\"!hasMore\"\n              class=\"pagination-button\"\n            >\n              Next &gt;\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Deck Sidebar -->\n    <DeckSidebar \n      ref=\"deckSidebar\"\n      :selectedCard=\"selectedCard\"\n      @reset-selected-card=\"selectedCard = null\"\n      @view-card=\"showCardDetails\"\n      @deck-saved=\"onDeckSaved\"\n    />\n\n    <!-- Card Details Pop-Up -->\n    <CardDetailsPopup\n      v-if=\"selectedCard\"\n      :card=\"selectedCard\"\n      @close=\"selectedCard = null\"\n      @add-to-deck=\"addCardToDeck\"\n    />\n  </div>\n</template>\n\n\n<script>\nimport axios from \"axios\";\nimport debounce from \"lodash/debounce\";\nimport CardAutocomplete from \"./CardAutocomplete.vue\";\nimport CardGrid from \"./CardGrid.vue\";\nimport CardDetailsPopup from \"./CardDetailsPopup.vue\";\nimport FilterPopup from \"./FilterPopup.vue\"; // Changed from FilterPanel to FilterPopup\nimport DeckSidebar from \"./DeckSidebar.vue\";\nimport DeckmoorLogo from \"../assets/logo/logo1.png\";\n\n\nexport default {\n  components: { \n    CardAutocomplete, \n    CardGrid, \n    CardDetailsPopup,\n    FilterPopup, // Changed from FilterPanel to FilterPopup\n    DeckSidebar\n  },\n  data() {\n    return {\n      showFilterPopup: false, // This was missing\n      query: \"\",\n      results: [],\n      cards: [],   \n      selectedCard: null,\n      selectedCardForDeck: null,\n      page: 1,\n      hasMore: false,\n      hasSearched: false,\n      allSets: [],\n      activeFilters: {\n        sets: [],\n        rarities: [],\n        types: [],\n        supertypes: [],\n        colors: [],\n        // subtype: \"\",\n        manaCost: { min: 0, max: 20 },\n        power: { operator: \"=\", value: null },\n        toughness: { operator: \"=\", value: null },\n        DeckmoorLogo\n      },\n    };\n  },\n  created() {\n    this.fetchSets();\n  },\n  methods: {\n    debouncedSearch: debounce(function () {\n      if (this.query.trim()) {\n        this.fetchAutocomplete(this.query);\n      } else {\n        this.results = [];\n      }\n    }, 300),\n    \n    async fetchAutocomplete(query) {\n      try {\n        const response = await axios.get(`http://127.0.0.1:8000/search?query=${query}&page=1`);\n        this.results = response.data.cards?.slice(0, 10) || [];\n      } catch (error) {\n        console.error(\"Error fetching autocomplete results:\", error);\n        this.results = [];\n      }\n    },\n    \n    async submitSearch() {\n      this.hasSearched = true;\n      this.page = 1;\n      this.fetchCards(1);\n    },\n    \n    async fetchCards(newPage = 1) {\n  try {\n    const params = { \n      page: newPage,\n      query: this.query.trim(),\n      colors: this.activeFilters.colors.join(','),\n      mana_min: this.activeFilters.manaCost?.min || 0,\n      mana_max: this.activeFilters.manaCost?.max || 20,\n    };\n    \n    // Apply all filters if they exist\n    if (this.activeFilters) {\n      // Set filters\n      if (this.activeFilters.sets.length > 0) {\n        params.sets = this.activeFilters.sets.join(',');\n      }\n      \n      // Rarity filters\n      if (this.activeFilters.rarities.length > 0) {\n        params.rarities = this.activeFilters.rarities.join(',');\n      }\n      \n      // Type filters\n      if (this.activeFilters.types.length > 0) {\n        params.types = this.activeFilters.types.join(',');\n      }\n      \n      // Supertype filters\n      if (this.activeFilters.supertypes.length > 0) {\n        params.supertypes = this.activeFilters.supertypes.join(',');\n      }\n      \n      // // Subtype filter\n      // if (this.activeFilters.subtype) {\n      //   params.subtype = this.activeFilters.subtype;\n      // }\n      \n      // Power filter\n      if (this.activeFilters.power.value !== null) {\n        params.power_value = this.activeFilters.power.value;\n        params.power_operator = this.activeFilters.power.operator;\n      }\n      \n      // Toughness filter\n      if (this.activeFilters.toughness.value !== null) {\n        params.toughness_value = this.activeFilters.toughness.value;\n        params.toughness_operator = this.activeFilters.toughness.operator;\n      }\n    }\n    \n    const response = await axios.get(\"http://127.0.0.1:8000/search\", { params });\n    this.cards = response.data.cards || [];\n    this.hasMore = response.data.has_more || false;\n    this.page = newPage;\n  } catch (error) {\n    console.error(\"Error fetching cards:\", error);\n    this.cards = [];\n    this.hasMore = false;\n  }\n},\n    \n    showCardDetails(card) {\n      this.selectedCard = card;\n      this.results = [];\n    },\n\n    applyFilters(filters) {\n      this.activeFilters = filters;\n      this.page = 1;\n      this.fetchCards(1);\n    },\n\n    handleApplyFilters(newFilters) {\n      this.activeFilters = newFilters;\n      this.page = 1;\n      this.fetchCards(1);\n    },\n    \n    clearFilters() {\n      this.activeFilters = { \n        sets: [],\n        rarities: [],\n        types: [],\n        supertypes: [],\n        colors: [],\n        // subtype: \"\",\n        manaCost: { min: 0, max: 20 },\n        power: { operator: \"=\", value: null },\n        toughness: { operator: \"=\", value: null }\n      };\n      this.page = 1;\n      this.fetchCards(1);\n    },\n    \n    async fetchSets() {\n      try {\n        const response = await axios.get(\"http://127.0.0.1:8000/sets\");\n        this.allSets = response.data.sets || [];\n      } catch (error) {\n        console.error(\"Error fetching sets:\", error);\n        this.allSets = [];\n      }\n    },\n    \n    addCardToDeck(card) {\n      console.log(\"Adding card to deck:\", card.name);\n      if (this.$refs.deckSidebar?.addCardToDeck) {\n        this.$refs.deckSidebar.addCardToDeck(card);\n      } else {\n        console.error(\"DeckSidebar not available\");\n      }\n    },\n    \n    onDeckSaved() {\n      // Handle deck saved event if needed\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* Layout Structure */\n.card-search-container {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  padding-right: 320px; /* Space for sidebar */\n  max-width: 1440px;\n  margin: 0 auto;\n}\n\n.main-content {\n  flex: 1;\n  width: calc(100% - 320px); /* Full width minus sidebar */\n  margin: 0 auto;\n  padding: 0 20px;\n  box-sizing: border-box;\n}\n\n.results-area {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-bottom: 20px; /* Add some bottom padding */\n}\n\n.deckmoor-logo {\n  max-height: 300px;\n  object-fit: contain;\n  display: block;\n  margin: 0 auto; /* center it horizontally */\n}\n\n\n/* Typography */\n\n.page-number {\n  font-weight: bold;\n  color: #333;\n  min-width: 80px;\n  text-align: center;\n}\n\n.no-results {\n  text-align: center;\n  padding: 40px;\n  color: #666;\n  font-size: 18px;\n}\n\n/* Search Controls */\n.search-controls {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 30px;\n  max-width: 800px;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.search-box-wrapper {\n  position: relative;\n  width: 100%;\n}\n\n.search-box {\n  display: flex;\n  gap: 10px;\n  width: 100%;\n}\n\n.search-input {\n  flex: 1;\n  padding: 12px 15px;\n  font-size: 16px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  transition: all 0.3s ease;\n}\n\n.search-input:focus {\n  outline: none;\n  border-color: #4299e1;\n  box-shadow: 0 2px 8px rgba(66, 153, 225, 0.3);\n}\n\n.search-button {\n  padding: 12px 20px;\n  background-color: #316242;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.search-button:hover {\n  background-color: #48835d;\n  transform: scale(1.05);\n}\n\n.filter-button {\n  padding: 10px 15px;\n  margin-top: 10px;\n  background-color: #fcfcf7;\n  color: #68664a;\n  border: 1px solid #e6e1c0;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.filter-button:hover {\n  background-color: #fdffeb;\n  border-color: #ecf8be;\n  color: #9e911e;\n  transform: scale(1.05);\n}\n\n/* Pagination */\n.pagination-container {\n  margin: 40px 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.pagination-controls {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n\n.pagination-button {\n  padding: 10px 20px;\n  background-color: #4682B4;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.pagination-button:hover:not(:disabled) {\n  background-color: #3a6d99;\n}\n\n.pagination-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n}\n\n\n/* Responsive Adjustments */\n@media (max-width: 1024px) {\n  .card-search-container {\n    padding-right: 0;\n  }\n  \n  .main-content {\n    width: 100%;\n    padding-right: 20px;\n  }\n}\n\n@media (max-width: 768px) {\n  .search-box {\n    flex-direction: column;\n  }\n  \n  .search-button {\n    width: 100%;\n  }\n}\n</style>","<template>\r\n  <div class=\"autocomplete-dropdown\" v-if=\"results?.length > 0\" @click.stop>\r\n    <ul>\r\n      <li v-for=\"card in results\" :key=\"card.id\" @click=\"$emit('select-card', card)\">\r\n        <div class=\"card-result\">\r\n          <span class=\"card-name\">{{ card.name }}</span>\r\n          <span class=\"card-mana-cost\" v-if=\"card.mana_cost\" v-html=\"formatManaCost(card.mana_cost)\"></span>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"CardAutocomplete\", \r\n  props: {\r\n    results: Array,\r\n  },\r\n  methods: {\r\n    closeDropdown() {\r\n      this.$emit(\"select-card\", null);\r\n    },\r\n    formatManaCost(manaCost) {\r\n      if (!manaCost) return '';\r\n      return manaCost.replace(/\\{([^}]+)\\}/g, (match, symbol) => {\r\n        // Convert symbol to lowercase and handle special cases\r\n        let cssClass = symbol.toLowerCase();\r\n        \r\n        if (cssClass === 't' || cssClass === 'tap') cssClass = 'tap';\r\n        if (cssClass === 'q' || cssClass === 'untap') cssClass = 'untap';\r\n        if (cssClass.includes('/')) cssClass = cssClass.replace('/', '');\r\n        \r\n        return `<span class=\"mana s${cssClass}\"></span>`;\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"click\", this.closeDropdown);\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener(\"click\", this.closeDropdown);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Dropdown container styles */\r\n.autocomplete-dropdown {\r\n  position: absolute;\r\n  width: calc(100% - 48px);\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  border: 1px solid #ddd;\r\n  border-top: none;\r\n  border-radius: 0 0 8px 8px;\r\n  background: white;\r\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\r\n  z-index: 1000;\r\n  top: 100%;\r\n  left: 0;\r\n}\r\n\r\n.autocomplete-dropdown ul {\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.autocomplete-dropdown li {\r\n  padding: 10px 12px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.autocomplete-dropdown li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.autocomplete-dropdown li:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.card-result {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.card-name {\r\n  font-weight: 500;\r\n}\r\n\r\n.card-mana-cost {\r\n  display: flex;\r\n  gap: 2px;\r\n}\r\n</style>\r\n\r\n<style>\r\n/* Mana symbol styles - using mana-master classes */\r\n.mana {\r\n  display: inline-block;\r\n  width: 1em;\r\n  height: 1em;\r\n  background-image: url('../assets/mana-master/images/mana.svg');\r\n  background-repeat: no-repeat;\r\n  background-size: auto 700%;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* White */\r\n.mana.sw { background-position: 44.4% 33.3%; }\r\n/* Blue */\r\n.mana.su { background-position: 55.5% 33.3%; }\r\n/* Black */\r\n.mana.sb { background-position: 66.6% 33.3%; }\r\n/* Red */\r\n.mana.sr { background-position: 77.7% 33.3%; }\r\n/* Green */\r\n.mana.sg { background-position: 88.8% 33.3%; }\r\n/* Colorless */\r\n.mana.sc { background-position: 77.7% 83.3%; }\r\n\r\n/* Generic mana (0-9) */\r\n.mana.s0 { background-position: 0 0; }\r\n.mana.s1 { background-position: 11.1% 0; }\r\n.mana.s2 { background-position: 22.2% 0; }\r\n.mana.s3 { background-position: 33.3% 0; }\r\n.mana.s4 { background-position: 44.4% 0; }\r\n.mana.s5 { background-position: 55.5% 0; }\r\n.mana.s6 { background-position: 66.6% 0; }\r\n.mana.s7 { background-position: 77.7% 0; }\r\n.mana.s8 { background-position: 88.8% 0; }\r\n.mana.s9 { background-position: 99.9% 0; }\r\n\r\n/* Hybrid mana */\r\n.mana.swu { background-position: 0 50%; }\r\n.mana.swb { background-position: 11.1% 50%; }\r\n.mana.sub { background-position: 22.2% 50%; }\r\n.mana.sur { background-position: 33.3% 50%; }\r\n.mana.sbr { background-position: 44.4% 50%; }\r\n.mana.sbg { background-position: 55.5% 50%; }\r\n.mana.srw { background-position: 66.6% 50%; }\r\n.mana.srg { background-position: 77.7% 50%; }\r\n.mana.sgw { background-position: 88.8% 50%; }\r\n.mana.sgu { background-position: 99.9% 50%; }\r\n\r\n/* Special symbols */\r\n.mana.stap { background-position: 0% 83.3%; }\r\n.mana.suntap { background-position: 11.1% 83.3%; }\r\n</style>","import { render } from \"./CardAutocomplete.vue?vue&type=template&id=37b39bc6&scoped=true\"\nimport script from \"./CardAutocomplete.vue?vue&type=script&lang=js\"\nexport * from \"./CardAutocomplete.vue?vue&type=script&lang=js\"\n\nimport \"./CardAutocomplete.vue?vue&type=style&index=0&id=37b39bc6&scoped=true&lang=css\"\nimport \"./CardAutocomplete.vue?vue&type=style&index=1&id=37b39bc6&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37b39bc6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"card-grid\">\r\n    <div v-for=\"card in cards\" :key=\"card.id\" class=\"card-container\">\r\n      <div class=\"card-item\">\r\n        <img \r\n          :src=\"getCardImageUrl(card)\" \r\n          :alt=\"card.name\" \r\n          class=\"card-image\"\r\n          @click=\"handleImageClick(card)\"\r\n        >\r\n        <div class=\"card-title\">{{ card.name }}</div>\r\n        <button \r\n          class=\"add-to-deck-btn\"\r\n          @click.stop=\"handleAddToDeck(card)\"\r\n          title=\"Add to deck\"\r\n        >\r\n          <span class=\"plus-icon\">+</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    cards: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  methods: {\r\n    getCardImageUrl(card) {\r\n      // Double-faced card\r\n      if (card.card_faces && card.card_faces.length > 0 && card.card_faces[0].image_uris) {\r\n        return card.card_faces[0].image_uris.normal;\r\n      }\r\n      // Regular image_uris\r\n      else if (card.image_uris && card.image_uris.normal) {\r\n        return card.image_uris.normal;\r\n      }\r\n      // Fallback\r\n      return 'placeholder-image.jpg';\r\n    },\r\n    handleAddToDeck(card) {\r\n      console.log(\"Add button clicked for:\", card.name);\r\n      this.$emit('add-to-deck', card);\r\n    },\r\n    handleImageClick(card) {\r\n      this.$emit('select-card', card);\r\n    },\r\n    \r\n  },\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(195px, 1fr));\r\n  gap: 20px;\r\n  width: 125%;\r\n  padding: 20px 0;\r\n  box-sizing: border-box;\r\n  margin-right: 40px;\r\n  overflow: visible !important;\r\n}\r\n\r\n.card-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  min-width: 0;\r\n  margin-right: 10px;\r\n  overflow: visible; /* Make sure the button can escape the container */\r\n\r\n}\r\n\r\n.card-item {\r\n  position: relative;\r\n  height: 100%;\r\n  border-radius: 12px;\r\n  overflow: visible; \r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n  background-color: #f8fcf8;\r\n  margin-right: 10px;\r\n  isolation: isolate;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n.card-item:hover {\r\n  transform: translateY(-8px) scale(1.02);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);\r\n}\r\n\r\n.card-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  object-position: center top;\r\n}\r\n.card-title {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 12px;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);\r\n  color: white;\r\n  text-shadow: 0 1px 3px rgba(0,0,0,0.5);\r\n}\r\n\r\n.add-to-deck-btn {\r\n  position: absolute;\r\n  top: 57px;\r\n  right: -15px;\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 20%;\r\n  background-color: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  z-index: 20; \r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.add-to-deck-btn:hover {\r\n  transform: scale(1.15);\r\n  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.4);\r\n  background-color: #3182ce;\r\n}\r\n\r\n.plus-icon {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 1px; \r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 1200px) {\r\n  .card-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));\r\n  }\r\n}\r\n\r\n\r\n@media (max-width: 768px) {\r\n  .card-grid {\r\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n    padding: 15px;\r\n  }\r\n  .card-container {\r\n    height: 320px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .card-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  .card-container {\r\n    height: 400px;\r\n  }\r\n}\r\n</style>","import { render } from \"./CardGrid.vue?vue&type=template&id=a3dca27e&scoped=true\"\nimport script from \"./CardGrid.vue?vue&type=script&lang=js\"\nexport * from \"./CardGrid.vue?vue&type=script&lang=js\"\n\nimport \"./CardGrid.vue?vue&type=style&index=0&id=a3dca27e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a3dca27e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"popup-overlay\" @click.self=\"close\">\r\n    <div class=\"popup-content\">\r\n      <button class=\"close-button\" @click=\"close\" aria-label=\"Close popup\">&times;</button>\r\n      <div class=\"popup-body\">\r\n        <!-- Left Column: Card Image with Flip Component -->\r\n        <div class=\"card-image-container\">\r\n          <div class=\"card-image\">\r\n            <CardFlip :card=\"card\" />\r\n            <div v-if=\"canBeFlipped\" class=\"flip-hint\">Click to flip</div>\r\n          </div>\r\n          \r\n          <!-- Add to Deck Button -->\r\n          <button class=\"add-to-deck-btn\" @click=\"addToDeckAndClose\">\r\n            Add to Deck\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- Right Column: Card Details -->\r\n        <div class=\"card-info\">\r\n          <h2 class=\"card-title\">{{ card.name }}</h2>\r\n          \r\n          <div class=\"info-grid\">\r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Mana Cost:</span>\r\n              <span class=\"info-value mana-symbols\" v-html=\"formatManaCost(displayManaCost)\"></span>\r\n            </div>\r\n            \r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Color Identity:</span>\r\n              <span class=\"info-value\">{{ formatColorIdentity(card.colors) }}</span>\r\n            </div>\r\n            \r\n            <div class=\"info-row\" v-if=\"card.power || card.toughness\">\r\n              <span class=\"info-label\">Power/Toughness:</span>\r\n              <span class=\"info-value\">{{ card.power && card.toughness ? `${card.power}/${card.toughness}` : \"N/A\" }}</span>\r\n            </div>\r\n            \r\n            <div class=\"info-row\">\r\n              <span class=\"info-label\">Type:</span>\r\n              <span class=\"info-value\">{{ card.type_line }}</span>\r\n            </div>\r\n            \r\n            <div class=\"info-row\" v-if=\"card.set_name\">\r\n              <span class=\"info-label\">Set:</span>\r\n              <span class=\"info-value\">{{ card.set_name }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"oracle-text\">\r\n            <h3>Oracle Text</h3>\r\n            <p v-html=\"formatManaCost(displayOracleText)\"></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CardFlip from './CardFlip.vue';\r\nexport default {\r\n  props: {\r\n    card: Object,\r\n  },\r\n  components: {\r\n    CardFlip,\r\n  },\r\n  mounted() {\r\n  },\r\n  computed: {\r\n    canBeFlipped() {\r\n      // Card can be flipped if it has card_faces with a second face that has an image\r\n      return Boolean(this.card?.card_faces?.[1]?.image_uris?.normal);\r\n    },\r\n    displayManaCost() {\r\n    if (this.card.card_faces?.length) {\r\n      const [face1, face2] = this.card.card_faces;\r\n      const cost1 = face1.mana_cost || '';\r\n      const cost2 = face2?.mana_cost || '';\r\n      return cost1 && cost2 ? `${cost1} // ${cost2}` : cost1 || cost2 || 'N/A';\r\n    }\r\n    return this.card.mana_cost || 'N/A';\r\n  },\r\n  displayOracleText() {\r\n    if (this.card.card_faces?.length) {\r\n      return this.card.card_faces\r\n        .map(face => face.oracle_text || '')\r\n        .filter(Boolean)\r\n        .join('<hr style=\"margin: 10px 0;\">'); // simple visual divider\r\n    }\r\n    return this.card.oracle_text || 'N/A';\r\n  }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit(\"close\");\r\n    },\r\n    addToDeckAndClose() {\r\n      console.log(\"Emitting add-to-deck for:\", this.card.name); // Debug\r\n      this.$emit('add-to-deck', this.card);\r\n      this.close();\r\n    },\r\n    formatManaCost(text) {\r\n      if (!text) return \"N/A\";\r\n      \r\n      // Convert mana symbols to mana-master classes\r\n      return text.replace(/\\{([^}]+)\\}/g, (match, symbol) => {\r\n        // Handle special cases\r\n        let cssClass = symbol.toLowerCase();\r\n        \r\n        // Handle tap symbol\r\n        if (cssClass === 't' || cssClass === 'tap') {\r\n          cssClass = 't';\r\n        }\r\n        // Handle untap symbol\r\n        else if (cssClass === 'q' || cssClass === 'untap') {\r\n          cssClass = 'q';\r\n        }\r\n        // Handle hybrid symbols\r\n        else if (cssClass.includes('/')) {\r\n          cssClass = cssClass.replace('/', '');\r\n        }\r\n        // Handle numbers - don't modify them\r\n        else if (/^\\d+$/.test(cssClass)) {\r\n          cssClass = symbol; // Use the original symbol without padding\r\n        }\r\n        \r\n        return `<span class=\"mana medium s${cssClass}\"></span>`;\r\n      }); \r\n    },\r\n    formatColorIdentity(colors) {\r\n      if (!colors || colors.length === 0) return \"Colorless\";\r\n      \r\n      const colorMap = {\r\n        'W': 'White',\r\n        'U': 'Blue',\r\n        'B': 'Black',\r\n        'R': 'Red',\r\n        'G': 'Green'\r\n      };\r\n      \r\n      return colors.map(color => colorMap[color] || color).join(\", \");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Import the mana symbols CSS */\r\n@import '../assets/mana-master/css/mana-cost.css';\r\n\r\n.mana-symbols .mana {\r\n  margin-right: 2px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.oracle-text p .mana {\r\n  vertical-align: middle;\r\n  position: relative;\r\n  top: -1px;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.popup-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.popup-content {\r\n  background: white;\r\n  border-radius: 12px;\r\n  width: 1000px;\r\n  max-width: 90%;\r\n  height: 570px;\r\n  max-height: 90%;\r\n  padding: 30px 30px 20px 30px;\r\n  position: relative;\r\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.popup-body {\r\n  display: flex;\r\n  gap: 30px;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  max-height: calc(100% - 50px);\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.card-image-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 350px;\r\n  min-width: 350px;\r\n  height: 100%; /* Take full height of parent */\r\n}\r\n\r\n.card-image-wrapper {\r\n  flex: 1;\r\n  min-height: 0; /* Crucial for flex children */\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-image {\r\n  flex: 1;\r\n  min-height: 0;\r\n  overflow: hidden;\r\n  position: relative; /* Needed for flip container */\r\n}\r\n\r\n.add-to-deck-btn {\r\n  padding: 12px;\r\n  background-color: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  flex-shrink: 0; /* Prevent button from shrinking */\r\n  margin-top: 10px; /* Push to bottom */\r\n}\r\n\r\n.add-to-deck-btn:hover {\r\n  background-color: var(--hover-color);\r\n}\r\n\r\n.card-info {\r\n  flex: 1;\r\n  text-align: left;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  min-width: 0;\r\n}\r\n\r\n.card-title {\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n  margin: 0 0 10px 0;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid var(--border-color);\r\n}\r\n\r\n.info-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.info-lable {\r\n  margin-right: 10px;\r\n}\r\n\r\n.oracle-text {\r\n  margin-top: 10px;\r\n  background-color: var(--background-color);\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  border-left: 4px solid var(--primary-color);\r\n}\r\n\r\n.oracle-text h3 {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  margin: 0 0 10px 0;\r\n  color: var(--primary-color);\r\n}\r\n\r\n.oracle-text p {\r\n  font-size: 15px;\r\n  line-height: 1.5;\r\n  white-space: pre-wrap;\r\n}\r\n.card-flip {\r\n  position: relative !important;\r\n}\r\n\r\n.close-button {\r\n  position: absolute;\r\n  background: none;\r\n  color: #666;\r\n  top: 15px;\r\n  right: 15px;\r\n  border: none;\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.close-button:hover {\r\n  color: #e53e3e;\r\n}\r\n\r\n</style>","<template>\r\n    <div class=\"card-flip-container\" @click=\"flipCard\">\r\n        <div class=\"card-flip\" :class=\"{ flipped: isFlipped }\">\r\n            <!-- Front Face -->\r\n            <div class=\"card-face front\">\r\n                <img \r\n                    :src=\"frontImage || '/placeholder.jpg'\" \r\n                    :alt=\"card.name\" \r\n                />\r\n            </div>\r\n            <!-- Back Face -->\r\n            <div class=\"card-face back\">\r\n                <img \r\n                    :src=\"backImage || '/placeholder.jpg'\" \r\n                    :alt=\"card.name\" \r\n                />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        card: Object,\r\n    },\r\n    data() {\r\n        return {\r\n            isFlipped: false,\r\n        };\r\n    },\r\n    computed: {\r\n        frontImage() {\r\n            return this.card?.card_faces?.[0]?.image_uris?.normal || this.card?.image_uris?.normal;\r\n        },\r\n        backImage() {\r\n            return this.card?.card_faces?.[1]?.image_uris?.normal || null;\r\n        }\r\n    },\r\n    methods: {\r\n        flipCard() {\r\n            if (this.backImage) {\r\n                this.isFlipped = !this.isFlipped;\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-flip-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  perspective: 1000px;\r\n}\r\n.card-flip {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  transform-style: preserve-3d;\r\n  transition: transform 0.6s;\r\n}\r\n.card-flip.flipped {\r\n    transform: rotateY(180deg);\r\n}\r\n.card-face {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  backface-visibility: hidden;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.card-face img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain; /* Show full card */\r\n  display: block; /* Remove image spacing */\r\n}\r\n\r\n.back {\r\n  transform: rotateY(180deg);\r\n}\r\n</style>\r\n","import { render } from \"./CardFlip.vue?vue&type=template&id=06047df8&scoped=true\"\nimport script from \"./CardFlip.vue?vue&type=script&lang=js\"\nexport * from \"./CardFlip.vue?vue&type=script&lang=js\"\n\nimport \"./CardFlip.vue?vue&type=style&index=0&id=06047df8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-06047df8\"]])\n\nexport default __exports__","import { render } from \"./CardDetailsPopup.vue?vue&type=template&id=4c259fe0&scoped=true\"\nimport script from \"./CardDetailsPopup.vue?vue&type=script&lang=js\"\nexport * from \"./CardDetailsPopup.vue?vue&type=script&lang=js\"\n\nimport \"./CardDetailsPopup.vue?vue&type=style&index=0&id=4c259fe0&lang=css\"\nimport \"./CardDetailsPopup.vue?vue&type=style&index=1&id=4c259fe0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c259fe0\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"isOpen\" class=\"popup-overlay\" @click.self=\"closePopup\">\r\n    <div class=\"filter-popup\">\r\n      <div class=\"popup-header\">\r\n        <h3>Card Filters</h3>\r\n        <button class=\"close-btn\" @click=\"closePopup\"></button>\r\n      </div>\r\n      \r\n      <div class=\"popup-content\">\r\n        <!-- Set Filter -->\r\n        <div class=\"filter-section\">\r\n          <h4>Set</h4>\r\n          <div class=\"set-selector\">\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"setSearchQuery\" \r\n              placeholder=\"Search sets...\" \r\n              @input=\"filterSets\"\r\n              class=\"search-input\"\r\n            />\r\n            <div class=\"set-list\">\r\n              <label v-for=\"set in filteredSets\" :key=\"set.code\" class=\"set-item\">\r\n                <input \r\n                  type=\"checkbox\" \r\n                  :value=\"set.code\" \r\n                  v-model=\"filters.sets\"\r\n                  class=\"set-checkbox\"\r\n                />\r\n                <span class=\"set-name\">{{ set.name }}</span>\r\n                <span class=\"set-code\">{{ set.code.toUpperCase() }}</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n         <!-- Color Filter -->\r\n         <div class=\"filter-section\">\r\n          <h4>Color</h4>\r\n          <div class=\"color-buttons\">\r\n            <button\r\n              v-for=\"color in colorOptions\"\r\n              :key=\"color.code\"\r\n              :class=\"['color-btn', { selected: filters.colors.includes(color.code) }]\"\r\n              :style=\"{ backgroundColor: color.background }\"\r\n              @click=\"toggleColor(color.code)\"\r\n              :title=\"color.name\"\r\n            >\r\n              <span class=\"mana small\" :class=\"`s${color.code.toLowerCase()}`\"></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Rarity Filter -->\r\n        <div class=\"filter-section\">\r\n          <h4>Rarity</h4>\r\n          <div class=\"rarity-buttons\">\r\n            <button \r\n              v-for=\"rarity in rarityOptions\" \r\n              :key=\"rarity.code\"\r\n              :class=\"['rarity-btn', rarity.code, { selected: filters.rarities.includes(rarity.code) }]\"\r\n              @click=\"toggleRarity(rarity.code)\"\r\n              :title=\"rarity.name\"\r\n            >\r\n              <img :src=\"rarity.image\" :alt=\"rarity.name\" class=\"rarity-icon\">\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Type Filter -->\r\n        <div class=\"filter-section\">\r\n          <h4>Card Type</h4>\r\n          <div class=\"type-buttons\">\r\n            <button\r\n              v-for=\"type in typeOptions\"\r\n              :key=\"type\"\r\n              :class=\"['type-btn', { selected: filters.types.includes(type) }]\"\r\n              @click=\"toggleType(type)\"\r\n            >\r\n              {{ type }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Supertype Filter -->\r\n        <div class=\"filter-section\">\r\n          <h4>Supertype</h4>\r\n          <div class=\"supertype-buttons\">\r\n            <button\r\n              v-for=\"supertype in supertypeOptions\"\r\n              :key=\"supertype\"\r\n              :class=\"['supertype-btn', { selected: filters.supertypes.includes(supertype) }]\"\r\n              @click=\"toggleSupertype(supertype)\"\r\n            >\r\n              {{ supertype }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Subtype Filter\r\n        <div class=\"filter-section\">\r\n          <h4>Subtype</h4>\r\n          <input \r\n            type=\"text\" \r\n            v-model=\"filters.subtype\" \r\n            placeholder=\"e.g. Elf, Wizard, Dragon\"\r\n            class=\"subtype-input\"\r\n          />\r\n        </div> -->\r\n        \r\n        <!-- Mana Value Filter -->\r\n        <div class=\"filter-section\">\r\n    <h4>Mana Cost</h4>\r\n    <div class=\"mana-cost-filters\">\r\n      <div class=\"mana-cost-filter\">\r\n        <label>Minimum:</label>\r\n        <input \r\n          type=\"number\" \r\n          v-model.number=\"filters.manaCost.min\" \r\n          min=\"0\" \r\n          max=\"20\"\r\n          class=\"mana-input\"\r\n        />\r\n      </div>\r\n      <div class=\"mana-cost-filter\">\r\n        <label>Maximum:</label>\r\n        <input \r\n          type=\"number\" \r\n          v-model.number=\"filters.manaCost.max\" \r\n          min=\"0\" \r\n          max=\"20\"\r\n          class=\"mana-input\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n        \r\n        <!-- Power/Toughness Filters -->\r\n        <div class=\"pt-filters\">\r\n          <div class=\"filter-section\">\r\n            <h4>Power</h4>\r\n            <div class=\"value-filter\">\r\n              <select v-model=\"filters.power.operator\" class=\"operator-select\">\r\n                <option value=\"=\">=</option>\r\n                <option value=\">\"></option>\r\n                <option value=\"<\"></option>\r\n              </select>\r\n              <input \r\n                type=\"number\" \r\n                v-model.number=\"filters.power.value\" \r\n                min=\"0\"\r\n                class=\"value-input\"\r\n                placeholder=\"0\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"filter-section\">\r\n            <h4>Toughness</h4>\r\n            <div class=\"value-filter\">\r\n              <select v-model=\"filters.toughness.operator\" class=\"operator-select\">\r\n                <option value=\"=\">=</option>\r\n                <option value=\">\"></option>\r\n                <option value=\"<\"></option>\r\n              </select>\r\n              <input \r\n                type=\"number\" \r\n                v-model.number=\"filters.toughness.value\" \r\n                min=\"0\"\r\n                class=\"value-input\"\r\n                placeholder=\"0\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"popup-footer\">\r\n        <button class=\"clear-btn\" @click=\"clearFilters\">\r\n          <i class=\"fas fa-trash-alt\"></i> Clear All\r\n        </button>\r\n        <button class=\"apply-btn\" @click=\"applyFilters\">\r\n          <i class=\"fas fa-check\"></i> Apply Filters\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"FilterPopup\",\r\n  props: {\r\n    allSets: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    isOpen: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    currentFilters: {\r\n      type: Object,\r\n      default: () => ({\r\n        sets: [],\r\n        rarities: [],\r\n        types: [],\r\n        supertypes: [],\r\n        colors: [],\r\n        // subtype: \"\",\r\n        manaCost: { min: 0, max: 20 },\r\n        power: { operator: \"=\", value: null },\r\n        toughness: { operator: \"=\", value: null }\r\n      })\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      filters: JSON.parse(JSON.stringify(this.currentFilters)),\r\n      setSearchQuery: '',\r\n      filteredSets: this.allSets,\r\n      manaCost: this.currentFilters.manaCost || { min: 0, max: 20 },\r\n      rarityOptions: [\r\n        { code: 'common', name: 'Common', image: require('@/assets/icons/common.png') },\r\n        { code: 'uncommon', name: 'Uncommon', image: require('@/assets/icons/uncommon.png') },\r\n        { code: 'rare', name: 'Rare', image: require('@/assets/icons/rare.png') },\r\n        { code: 'mythic', name: 'Mythic Rare', image: require('@/assets/icons/mythic.png') },\r\n        { code: 'special', name: 'Timeshifted', image: require('@/assets/icons/timeshifted.png') },\r\n        { code: 'bonus', name: 'Masterpiece', image: require('@/assets/icons/masterpiece.png') }\r\n      ],\r\n      typeOptions: [\r\n        'Artifact', 'Creature', 'Enchantment', \r\n        'Instant', 'Land', 'Planeswalker', \r\n        'Sorcery', 'Tribal'\r\n      ],\r\n      supertypeOptions: [\r\n        'Basic', 'Legendary', 'Snow', 'World'\r\n      ],\r\n      colorOptions: [\r\n        { code: 'W', name: 'White', background: '#f8f5e4' },\r\n        { code: 'U', name: 'Blue', background: '#c0d8e8' },\r\n        { code: 'B', name: 'Black', background: '#cbc2bf' },\r\n        { code: 'R', name: 'Red', background: '#e8b8a0' },\r\n        { code: 'G', name: 'Green', background: '#c8d6c2' },\r\n        { code: 'C', name: 'Colorless', background: '#e8e8e8' }\r\n      ],\r\n    };\r\n  },\r\n  watch: {\r\n    allSets: { \r\n      handler(newSets) {\r\n        this.filteredSets = newSets;\r\n      },\r\n      immediate: true\r\n    },\r\n    currentFilters: {\r\n      handler(newFilters) {\r\n        this.filters = JSON.parse(JSON.stringify(newFilters));\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    filterSets() {\r\n      if (!this.setSearchQuery.trim()) {\r\n        this.filteredSets = this.allSets;\r\n      } else {\r\n        const query = this.setSearchQuery.toLowerCase();\r\n        this.filteredSets = this.allSets.filter(set => \r\n          set.name.toLowerCase().includes(query) || \r\n          set.code.toLowerCase().includes(query)\r\n        );\r\n      }\r\n    },\r\n    toggleRarity(rarity) {\r\n      const index = this.filters.rarities.indexOf(rarity);\r\n      if (index === -1) {\r\n        this.filters.rarities.push(rarity);\r\n      } else {\r\n        this.filters.rarities.splice(index, 1);\r\n      }\r\n    },\r\n    toggleColor(color) {\r\n      const index = this.filters.colors.indexOf(color);\r\n      if (index === -1) {\r\n        this.filters.colors.push(color);\r\n      } else {\r\n        this.filters.colors.splice(index, 1);\r\n      }\r\n    },\r\n    toggleType(type) {\r\n      const index = this.filters.types.indexOf(type);\r\n      if (index === -1) {\r\n        this.filters.types.push(type);\r\n      } else {\r\n        this.filters.types.splice(index, 1);\r\n      }\r\n    },\r\n    toggleSupertype(supertype) {\r\n      const index = this.filters.supertypes.indexOf(supertype);\r\n      if (index === -1) {\r\n        this.filters.supertypes.push(supertype);\r\n      } else {\r\n        this.filters.supertypes.splice(index, 1);\r\n      }\r\n    },\r\n    applyFilters() {\r\n      // Emit the current filters\r\n      this.$emit('apply-filters', JSON.parse(JSON.stringify(this.filters)));\r\n      this.closePopup();\r\n    },\r\n     clearFilters() {\r\n      this.filters = {\r\n        sets: [],\r\n        rarities: [],\r\n        types: [],\r\n        supertypes: [],\r\n        colors: [],\r\n        // subtype: \"\",\r\n        manaCost: { min: 0, max: 20 },\r\n        power: { operator: \"=\", value: null },\r\n        toughness: { operator: \"=\", value: null }\r\n      };\r\n      this.setSearchQuery = '';\r\n      this.filteredSets = this.allSets;\r\n      this.$emit('clear-filters');\r\n    },\r\n    closePopup() {\r\n      this.$emit('close-popup');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n@import '../assets/mana-master/css/mana-cost.css';\r\n\r\n/* Add custom styling for color filter buttons */\r\n.color-btn .mana {\r\n  width: 1.5em;\r\n  height: 1.5em;\r\n  vertical-align: middle;\r\n  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));\r\n}\r\n\r\n.color-btn.selected .mana {\r\n  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.4));\r\n}\r\n\r\n</style>\r\n\r\n<style scoped>\r\n/* ==================== */\r\n/* LAYOUT & CONTAINERS  */\r\n/* ==================== */\r\n.popup-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.filter-popup {\r\n  background-color: white;\r\n  border-radius: 12px;\r\n  width: 500px;\r\n  max-height: 85vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.popup-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16px 20px;\r\n  border-bottom: 1px solid #eee;\r\n  background-color: #f8f9fa;\r\n  border-radius: 12px 12px 0 0;\r\n}\r\n\r\n.popup-content {\r\n  padding: 20px;\r\n  flex-grow: 1;\r\n  overflow-y: auto;\r\n}\r\n\r\n.popup-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 16px 20px;\r\n  border-top: 1px solid #eee;\r\n  background-color: #f8f9fa;\r\n  border-radius: 0 0 12px 12px;\r\n}\r\n\r\n.filter-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.pt-filters {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n}\r\n\r\n/* ============= */\r\n/* TYPOGRAPHY    */\r\n/* ============= */\r\n.popup-header h3 {\r\n  margin: 0;\r\n  font-size: 1.3rem;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.filter-section h4 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 1rem;\r\n  color: #444;\r\n  font-weight: 500;\r\n}\r\n\r\n/* ============= */\r\n/* FORM ELEMENTS */\r\n/* ============= */\r\n.search-input,\r\n.subtype-input,\r\n.mana-input,\r\n.value-input,\r\n.operator-select {\r\n  padding: 10px 14px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 0.95rem;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.search-input,\r\n.subtype-input {\r\n  width: 100%;\r\n}\r\n\r\n.mana-input {\r\n  width: 60px;\r\n}\r\n\r\n.value-input {\r\n  width: 70px;\r\n}\r\n\r\n.operator-select {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.set-selector {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.set-list {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  border: 1px solid #eee;\r\n  border-radius: 6px;\r\n  padding: 8px;\r\n}\r\n\r\n.set-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 10px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.set-item:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.set-checkbox {\r\n  margin-right: 12px;\r\n}\r\n\r\n.set-name {\r\n  flex-grow: 1;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.set-code {\r\n  background-color: #e9ecef;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  color: #495057;\r\n  margin-left: 10px;\r\n}\r\n\r\n.value-filter {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.mana-cost-filters {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.mana-cost-filter {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n/* ============= */\r\n/* BUTTONS       */\r\n/* ============= */\r\n/* Base Button Styles */\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  border: 2px solid;\r\n}\r\n\r\n/* Type/Supertype Buttons with Thin Blue Border */\r\n.type-btn,\r\n.supertype-btn {\r\n  border: 1px solid #a0c4e0; /* Light blue border */\r\n  color: #203c54;\r\n  background-color: white;\r\n  position: relative;\r\n}\r\n\r\n.type-btn:hover,\r\n.supertype-btn:hover {\r\n  background-color: #f0f7ff;\r\n  box-shadow: 0 0 0 1px #4682B4, 0 2px 5px rgba(70, 130, 180, 0.2);\r\n}\r\n\r\n.type-btn.selected,\r\n.supertype-btn.selected {\r\n  border: 1px solid #4682B4; /* Darker border when selected */\r\n  background-color: #4682B4;\r\n  color: white;\r\n  box-shadow: none; /* Remove outer border when selected */\r\n}\r\n\r\n/* Rarity Buttons */\r\n.rarity-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  padding: 0;\r\n  border: 2px solid;\r\n  background-color: white;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.rarity-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  object-fit: contain;\r\n}\r\n\r\n.rarity-btn.common {\r\n  border-color: #b5b5b5;\r\n  color: #b5b5b5;\r\n}\r\n.rarity-btn.common.selected {\r\n  background-color: #b5b5b5;\r\n  color: white;\r\n}\r\n\r\n.rarity-btn.uncommon {\r\n  border-color: #c0c0c0;\r\n  color: #c0c0c0;\r\n}\r\n.rarity-btn.uncommon.selected {\r\n  background-color: #c0c0c0;\r\n  color: white;\r\n}\r\n\r\n.rarity-btn.rare {\r\n  border-color: #e6c200;\r\n  color: #e6c200;\r\n}\r\n.rarity-btn.rare.selected {\r\n  background-color: #e6c200;\r\n  color: white;\r\n}\r\n\r\n.rarity-btn.mythic {\r\n  border-color: #e67e00;\r\n  color: #e67e00;\r\n}\r\n.rarity-btn.mythic.selected {\r\n  background-color: #e67e00;\r\n  color: white;\r\n}\r\n\r\n.rarity-btn.special {\r\n  border-color: #a335ee;\r\n  color: #a335ee;\r\n}\r\n.rarity-btn.special.selected {\r\n  background-color: #a335ee;\r\n  color: white;\r\n}\r\n\r\n.rarity-btn.bonus {\r\n  border-color: #ff5555;\r\n  color: #ff5555;\r\n}\r\n.rarity-btn.bonus.selected {\r\n  background-color: #ff5555;\r\n  color: white;\r\n}\r\n\r\n/* Color Filter Styles */\r\n.color-buttons {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.color-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  border: 2px solid transparent;\r\n  padding: 0;\r\n}\r\n\r\n.color-btn.selected {\r\n  border-color: rgba(0, 0, 0, 0.5);\r\n  border-width: 2px;\r\n  transform: scale(1.1);\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.color-btn i {\r\n  font-size: 1.2rem;\r\n  color: rgba(0, 0, 0, 0.7);\r\n}\r\n\r\n.color-btn[style*=\"background-color: #f8f5e4\"].selected { /* White */\r\n  border-color: #d1c9a3;\r\n}\r\n.color-btn[style*=\"background-color: #c0d8e8\"].selected { /* Blue */\r\n  border-color: #7fa8c4;\r\n}\r\n.color-btn[style*=\"background-color: #cbc2bf\"].selected { /* Black */\r\n  border-color: #8a817d;\r\n}\r\n.color-btn[style*=\"background-color: #e8b8a0\"].selected { /* Red */\r\n  border-color: #d1947a;\r\n}\r\n.color-btn[style*=\"background-color: #c8d6c2\"].selected { /* Green */\r\n  border-color: #9cb394;\r\n}\r\n.color-btn[style*=\"background-color: #e8e8e8\"].selected { /* Colorless */\r\n  border-color: #c0c0c0;\r\n}\r\n\r\n/* Action Buttons */\r\n.clear-btn,\r\n.apply-btn {\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.clear-btn {\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #ddd;\r\n  color: #dc3545;\r\n}\r\n\r\n.clear-btn:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.apply-btn {\r\n  background-color: #28a745;\r\n  border: 1px solid #28a745;\r\n  color: white;\r\n}\r\n\r\n.apply-btn:hover {\r\n  background-color: #218838;\r\n}\r\n\r\n/* Button Groups */\r\n.type-buttons,\r\n.supertype-buttons,\r\n.rarity-buttons {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin-top: 8px;\r\n}\r\n\r\n/* Selected States */\r\n.type-btn.selected,\r\n.supertype-btn.selected,\r\n.rarity-btn.selected {\r\n  transform: scale(1.05);\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\n/* ============= */\r\n/* UTILITIES     */\r\n/* ============= */\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.8rem;\r\n  cursor: pointer;\r\n  color: #666;\r\n  padding: 0 12px;\r\n  line-height: 1;\r\n}\r\n\r\n.close-btn:hover {\r\n  color: #e53e3e;\r\n}\r\n\r\n/* ============= */\r\n/* RESPONSIVE    */\r\n/* ============= */\r\n@media (max-width: 600px) {\r\n  .filter-popup {\r\n    width: 90vw;\r\n    max-height: 80vh;\r\n  }\r\n  \r\n  .pt-filters {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .type-btn,\r\n  .supertype-btn {\r\n    padding: 6px 12px;\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .rarity-btn {\r\n    width: 36px;\r\n    height: 36px;\r\n  }\r\n}\r\n</style>","import { render } from \"./FilterPopup.vue?vue&type=template&id=0a6204ae&scoped=true\"\nimport script from \"./FilterPopup.vue?vue&type=script&lang=js\"\nexport * from \"./FilterPopup.vue?vue&type=script&lang=js\"\n\nimport \"./FilterPopup.vue?vue&type=style&index=0&id=0a6204ae&lang=css\"\nimport \"./FilterPopup.vue?vue&type=style&index=1&id=0a6204ae&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a6204ae\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"deck-sidebar\">\r\n    <div class=\"connection-status\" :class=\"firebaseStatus\">\r\n      <span class=\"status-icon\"></span>\r\n      {{ statusMessage }}\r\n      <span v-if=\"lastSyncTime\" class=\"sync-time\">({{ formatTime(lastSyncTime) }})</span>\r\n    </div>\r\n\r\n    <div v-if=\"!activeDeck\" class=\"deck-list\">\r\n      <div class=\"sidebar-header\">\r\n        <h2 class=\"sidebar-title\">Your Decks</h2>\r\n        <button class=\"playtest-btn\" @click=\"openPlaytest()\">\r\n           Playtest\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"deck-items-container\">\r\n        <div v-for=\"deck in decks\" :key=\"deck.id\" class=\"deck-item\" @click=\"loadDeck(deck)\">\r\n          <span class=\"deck-name\">{{ deck.name }}</span>\r\n          <span class=\"deck-colors\" v-html=\"formatColors(deck.colors)\"></span>\r\n          <span v-if=\"getDeckCardCount(deck) > 100\" class=\"deck-warning\">!</span>\r\n          <button class=\"delete-deck-btn\" @click.stop=\"promptDeleteDeck(deck)\">\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"gradient-blur\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n      </div>\r\n      <div class=\"deck-buttons-container\">\r\n        <button class=\"create-deck-btn\" @click=\"showCreateDeckModal = true\">\r\n          <span class=\"btn-icon\">+</span> Create a Deck\r\n        </button>\r\n        <button class=\"import-deck-btn\" @click=\"showImportModal = true\">\r\n          <span class=\"btn-icon\"></span> Import Deck\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \r\n    \r\n    <div v-else class=\"active-deck\">\r\n      <div class=\"deck-header\">\r\n        <div class=\"deck-header-top\">\r\n          <button class=\"back-btn\" @click=\"backToDecks\">\r\n            <span class=\"back-icon\"></span> Back to Decks\r\n          </button>\r\n          <button class=\"delete-deck-btn\" @click=\"promptDeleteDeck(activeDeck)\">\r\n               Delete\r\n            </button>\r\n        </div>\r\n        \r\n        <div class=\"deck-title-section\">\r\n  <div class=\"title-wrapper\">\r\n    <div class=\"title-container\">\r\n      <h2 class=\"deck-title\" v-if=\"!isRenaming\">{{ activeDeck.name }}</h2>\r\n      <div v-else class=\"rename-input-wrapper\">\r\n        <input \r\n          ref=\"renameInput\"\r\n          v-model=\"tempDeckName\" \r\n          @keyup.enter=\"confirmRenaming\"\r\n          @keyup.esc=\"cancelRenaming\"\r\n          @blur=\"cancelRenaming\"\r\n          class=\"rename-input\"\r\n        />\r\n        <button class=\"confirm-rename-btn\" @click=\"confirmRenaming\"></button>\r\n        <button class=\"cancel-rename-btn\" @click=\"cancelRenaming\"></button>\r\n      </div>\r\n      <div class=\"title-actions\">\r\n        <button v-if=\"!isRenaming\" class=\"rename-btn\" @click=\"startRenaming\" title=\"Rename Deck\">\r\n          \r\n        </button>\r\n        <button class=\"export-btn\" @click=\"showExportModal = true\" title=\"Export Deck\">\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"deck-meta-row\">\r\n      <div class=\"deck-meta\">\r\n        <div class=\"deck-colors\" v-html=\"formatColors(activeDeck.colors)\"> </div>\r\n        <span :class=\"['card-count', {'over-limit': totalCards > 100}]\">\r\n          {{ totalCards }}/100 \r\n        </span>\r\n        <div class=\"deck-header-actions\">\r\n          <button class=\"stats-btn\" @click=\"showDeckStats\">\r\n            <span class=\"stats-icon\"></span> Stats\r\n          </button>\r\n          <StatsPopup v-if=\"showStatsPopup\" @close=\"toggleStatsPopup\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n        </div>\r\n      \r\n      <div v-if=\"activeDeck.commander\" class=\"commander-section\">\r\n        <h3 class=\"section-title\">Commander</h3>\r\n        <div class=\"commander-card\" @click=\"viewCardDetails(activeDeck.commander)\">\r\n          <img :src=\"activeDeck.commander.image_uris?.small || activeDeck.commander.card_faces?.[0]?.image_uris?.small\" :alt=\"activeDeck.commander.name\">\r\n          <span class=\"commander-name\">{{ activeDeck.commander.name }}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"deck-cards\">\r\n        <h3 class=\"section-title\">Cards</h3>\r\n        <div \r\n          v-for=\"card in sortedCards\" \r\n          :key=\"card.id\" \r\n          class=\"deck-card\"\r\n          :class=\"{ \r\n            'invalid-color': !isColorIdentityValid(card),\r\n            'invalid-format': !isLegalInCommander(card) \r\n          }\"\r\n          :style=\"getCardBorderStyle(card)\"\r\n          :data-invalid-reason=\"\r\n            !isColorIdentityValid(card) ? 'Wrong colors for commander' : \r\n            !isLegalInCommander(card) ? 'Banned/unserious set' : ''\r\n          \"\r\n          @click=\"$emit('view-card', card)\"\r\n        >\r\n          <div class=\"card-info\">\r\n            <div class=\"card-header\">\r\n              <span class=\"card-name\">\r\n                {{ card.name }}\r\n              </span>\r\n              <span class=\"card-count\" :class=\"{'count-changed': card.count > 1}\">\r\n                x{{ card.count || 1 }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-actions\">\r\n            <button \r\n              v-if=\"canHaveMultipleCopies(card)\" \r\n              class=\"add-btn\" \r\n              @click.stop=\"addOneCard(card, $event)\" \r\n            >\r\n              +\r\n            </button>\r\n            <button \r\n              class=\"remove-btn\" \r\n              @click.stop=\"removeCard(card)\"\r\n            >\r\n              \r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"deck-actions\">\r\n        <button class=\"save-deck-btn\" @click=\"saveDeck\">\r\n          Save Deck\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"showCreateDeckModal\" class=\"modal-overlay\" @click.self=\"showCreateDeckModal = false\">\r\n      <div class=\"modal-content\">\r\n        <h2 class=\"modal-title\">Create New Deck</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"deckName\">Deck Name:</label>\r\n          <input id=\"deckName\" v-model=\"newDeckName\" placeholder=\"Enter deck name\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n        <button @click=\"searchCommanderCards\">Search for Commander</button>\r\n        </div>\r\n        <div v-if=\"selectedCommander\" class=\"selected-commander\">\r\n          <h3 class=\"modal-subtitle\">Selected Commander:</h3>\r\n          <div class=\"commander-preview\">\r\n            <img :src=\"selectedCommander.image_uris?.small || selectedCommander.card_faces?.[0]?.image_uris?.small\" :alt=\"selectedCommander.name\">\r\n            <span class=\"selected-card-name\">{{ selectedCommander.name }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-actions\">\r\n          <button class=\"cancel-btn\" @click=\"showCreateDeckModal = false\">Cancel</button>\r\n          <button class=\"confirm-btn\" :disabled=\"!newDeckName || !selectedCommander\" @click=\"createDeck\">Create</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"showCommanderSearch\" class=\"modal-overlay\" @click.self=\"showCommanderSearch = false\">\r\n      <div class=\"modal-content commander-search\">\r\n        <h2 class=\"modal-title\">Select Commander</h2>\r\n        <div class=\"search-box\">\r\n          <input v-model=\"commanderQuery\" @input=\"searchCommanderCards\" placeholder=\"Search for legendary creatures...\">\r\n        </div>\r\n        <div class=\"commander-results\">\r\n          <div v-for=\"card in commanderResults\" :key=\"card.id\" class=\"commander-option\" @click=\"selectCommander(card)\">\r\n            <img :src=\"card.image_uris?.small || card.card_faces?.[0]?.image_uris?.small\" :alt=\"card.name\">\r\n            <span class=\"search-result-name\">{{ card.name }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-actions\">\r\n          <button class=\"cancel-btn\" @click=\"showCommanderSearch = false\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"showDeleteConfirmation\" class=\"modal-overlay\" @click.self=\"showDeleteConfirmation = false\">\r\n      <div class=\"modal-content\">\r\n        <h2 class=\"modal-title\">Delete Deck</h2>\r\n        <p>Are you sure you want to delete \"{{ deckToDelete?.name }}\"? This action cannot be undone.</p>\r\n        <div class=\"modal-actions\">\r\n          <button class=\"cancel-btn\" @click=\"showDeleteConfirmation = false\">Cancel</button>\r\n          <button class=\"confirm-btn delete-btn\" @click=\"confirmDeleteDeck\">Delete</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ImportPopup \r\n      v-if=\"showImportModal\"\r\n      :isOpen=\"showImportModal\"\r\n      @close=\"showImportModal = false\"\r\n      @import=\"handleDeckImport\"\r\n    />\r\n    <ExportPopup \r\n      v-if=\"showExportModal\"\r\n      :isOpen=\"showExportModal\"\r\n      :deck=\"activeDeck\"\r\n      @close=\"showExportModal = false\"\r\n    />\r\n    <StatsPopup \r\n    v-if=\"showStatsModal\"\r\n    :isOpen=\"showStatsModal\"\r\n    :deck=\"activeDeck\"\r\n    @close=\"showStatsModal = false\"\r\n    @view-card=\"viewCardDetails\"\r\n  />\r\n  <PlaytestPopup \r\n  v-if=\"showPlaytestPopup\" \r\n  ref=\"playtestPopup\"\r\n  :decks=\"decks\"\r\n  @close=\"showPlaytestPopup = false\"\r\n/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { saveDeck, loadDecks, deleteDeck } from '../services/deckService';\r\nimport ImportPopup from './ImportPopup.vue'; \r\nimport ExportPopup from './ExportPopup.vue';\r\nimport StatsPopup from './StatsPopup.vue';\r\nimport PlaytestPopup from './PlaytestPopup.vue';\r\n\r\n\r\n\r\nexport default {\r\n  name: 'DeckSidebar',\r\n  components: { ImportPopup, ExportPopup, StatsPopup, PlaytestPopup},\r\n  props: {\r\n    selectedCard: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      decks: [],\r\n      activeDeck: null,\r\n      showCreateDeckModal: false,\r\n      showCommanderSearch: false,\r\n      showAddLandsModal: false,\r\n      showDeleteConfirmation: false,\r\n      newDeckName: '',\r\n      selectedCommander: null,\r\n      commanderQuery: '',\r\n      commanderResults: [],\r\n      selectedLand: null,\r\n      landCount: 1,\r\n      deckToDelete: null,\r\n      firebaseStatus: 'checking',\r\n      lastSyncTime: null,\r\n      connectionInterval: null,\r\n      showImportModal: false,\r\n      showExportModal: false,\r\n      showStatsPopup: false,\r\n      showStatsModal: false,\r\n      isRenaming: false,\r\n      tempDeckName: '',\r\n      showPlaytestPopup: false,\r\n      selectedDeckForPlaytest: null,\r\n    };\r\n  },\r\n  computed: {\r\n    sortedCards() {\r\n      if (!this.activeDeck) return [];\r\n      return this.activeDeck.cards\r\n        .slice()\r\n        .sort((a, b) => (a.cmc || 0) - (b.cmc || 0));\r\n    },\r\n    totalCards() {\r\n      if (!this.activeDeck) return 0;\r\n      return this.activeDeck.cards.reduce((total, card) => total + (card.count || 1), 0);\r\n    },\r\n    statusMessage() {\r\n      return {\r\n        'checking': 'Checking connection...',\r\n        'connected': 'Connected to Cloud',\r\n        'disconnected': 'Offline (using local storage)',\r\n        'error': 'Connection error'\r\n      }[this.firebaseStatus];\r\n    },\r\n    deckCardCounts() {\r\n  return this.decks.reduce((acc, deck) => {\r\n    if (!deck || !deck.cards) return acc;\r\n    acc[deck.id] = deck.cards.reduce((sum, c) => sum + c.quantity, 0);\r\n    return acc;\r\n  }, {});\r\n}\r\n  },\r\n\r\nmethods: {\r\n    async checkConnection() {\r\n      try {\r\n        const startTime = Date.now();\r\n        await loadDecks(); // Simple test query\r\n        this.firebaseStatus = 'connected';\r\n        this.lastSyncTime = new Date();\r\n        console.log(`Firebase connection OK (${Date.now() - startTime}ms)`);\r\n      } catch (error) {\r\n        this.firebaseStatus = 'disconnected';\r\n        console.error('Firebase connection failed:', error);\r\n      }\r\n    },\r\n\r\n    formatTime(date) {\r\n      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    },\r\n\r\n    async checkDataSource() {\r\n      try {\r\n        console.group('Data Source Debugging');\r\n        \r\n        // Check Firebase connection\r\n        console.log('Testing Firebase connection...');\r\n        const firebaseDecks = await loadDecks();\r\n        console.log('Firebase response:', firebaseDecks);\r\n        \r\n        // Check local storage\r\n        const localDecks = localStorage.getItem('mtg-decks');\r\n        console.log('Local storage contents:', localDecks ? JSON.parse(localDecks) : 'Empty');\r\n        \r\n        // Check current component state\r\n        console.log('Component decks state:', this.decks);\r\n        \r\n        console.groupEnd();\r\n        \r\n        // Show summary to user\r\n        if (firebaseDecks && firebaseDecks.length > 0) {\r\n          alert(`Using Firebase (${firebaseDecks.length} decks found)`);\r\n        } else if (localDecks) {\r\n          alert('Using local storage (Firebase not available)');\r\n        } else {\r\n          alert('No decks found in either Firebase or local storage');\r\n        }\r\n        \r\n        return firebaseDecks ? 'firebase' : 'local';\r\n      } catch (error) {\r\n        console.error('Debug check failed:', error);\r\n        alert('Debug check failed - check console for details');\r\n        return 'error';\r\n      }\r\n    },\r\n\r\n    promptDeleteDeck(deck) {\r\n      this.deckToDelete = deck;\r\n      this.showDeleteConfirmation = true;\r\n    },\r\n\r\n    async confirmDeleteDeck() {\r\n      if (!this.deckToDelete) return;\r\n      \r\n      try {\r\n        await deleteDeck(this.deckToDelete.id);\r\n        const index = this.decks.findIndex(d => d.id === this.deckToDelete.id);\r\n        if (index !== -1) {\r\n          this.decks.splice(index, 1);\r\n          localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n          \r\n          if (this.activeDeck && this.activeDeck.id === this.deckToDelete.id) {\r\n            this.activeDeck = null;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error deleting deck:', error);\r\n        // Fallback to local storage if Firebase fails\r\n        const index = this.decks.findIndex(d => d.id === this.deckToDelete.id);\r\n        if (index !== -1) {\r\n          this.decks.splice(index, 1);\r\n          localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n          \r\n          if (this.activeDeck && this.activeDeck.id === this.deckToDelete.id) {\r\n            this.activeDeck = null;\r\n          }\r\n        }\r\n      }\r\n      \r\n      this.showDeleteConfirmation = false;\r\n      this.deckToDelete = null;\r\n    },\r\n\r\n    async handleDeckImport(deckData) {\r\n      const newDeck = {\r\n        id: Date.now().toString(),\r\n        name: deckData.name,\r\n        commander: deckData.commander,\r\n        colors: deckData.colors,\r\n        cards: deckData.cards,\r\n        created: deckData.created\r\n      };\r\n      \r\n      try {\r\n        // Save to Firebase\r\n        await saveDeck(newDeck);\r\n        // Add to local state\r\n        this.decks.push(newDeck);\r\n        // Update localStorage as backup\r\n        localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n        \r\n        this.showImportModal = false;\r\n        this.loadDeck(newDeck);\r\n      } catch (error) {\r\n        console.error('Error importing deck:', error);\r\n        // Fallback to local storage\r\n        this.decks.push(newDeck);\r\n        localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n        \r\n        this.showImportModal = false;\r\n        this.loadDeck(newDeck);\r\n      }\r\n    },\r\n\r\n    async openPlaytest(deckId = null) {\r\n  try {\r\n    console.log('Opening playtest with deck:', deckId);\r\n    \r\n    // First, destroy any existing popup instance to prevent DOM issues\r\n    this.showPlaytestPopup = false;\r\n    await this.$nextTick();\r\n    \r\n    // Ensure decks are loaded before proceeding\r\n    await this.loadDecksFromStorage();\r\n    console.log('Decks loaded for playtest:', this.decks.length);\r\n    \r\n    // Set up the state before showing the popup\r\n    this.selectedDeckForPlaytest = deckId;\r\n    \r\n    // Show the popup\r\n    this.showPlaytestPopup = true;\r\n    \r\n  } catch (error) {\r\n    console.error('Error opening playtest:', error);\r\n    // Ensure popup is closed on error\r\n    this.showPlaytestPopup = false;\r\n  }\r\n},\r\n\r\n    getCardBorderStyle(card) {\r\n      const colors = card.color_identity || [];\r\n      if (colors.length === 0) return 'background: rgba(200, 200, 200, 0.1)';\r\n      \r\n      if (colors.length === 1) {\r\n        const colorMap = {\r\n          'W': 'rgba(248, 231, 185, 0.3)',\r\n          'U': 'rgba(179, 206, 234, 0.3)',\r\n          'B': 'rgba(136, 135, 135, 0.3)',\r\n          'R': 'rgba(235, 159, 130, 0.3)',\r\n          'G': 'rgba(196, 211, 202, 0.3)'\r\n        };\r\n        return `background: linear-gradient(to right, ${colorMap[colors[0]]}, transparent)`;\r\n      }\r\n      \r\n      const gradientStops = colors.map((color, index) => {\r\n        const colorMap = {\r\n          'W': 'rgba(248, 231, 185, 0.3)',\r\n          'U': 'rgba(179, 206, 234, 0.3)',\r\n          'B': 'rgba(135, 135, 135, 0.3)',\r\n          'R': 'rgba(235, 159, 130, 0.3)',\r\n          'G': 'rgba(196, 211, 202, 0.3)'\r\n        };\r\n        const position = (index / colors.length) * 100;\r\n        return `${colorMap[color]} ${position}%`;\r\n      }).join(', ');\r\n      \r\n      return `background: linear-gradient(135deg, ${gradientStops}, transparent 90%)`;\r\n    },\r\n\r\n    canHaveMultipleCopies(card) {\r\n      const isBasicLand = /basic (snow )?land/i.test(card.type_line);\r\n      const allowsMultiples = card.oracle_text?.toLowerCase()\r\n        .includes(\"a deck can have any number of cards named\");\r\n      return isBasicLand || allowsMultiples;\r\n    },\r\n\r\n    isColorIdentityValid(card) {\r\n      if (!this.activeDeck?.commander) return true;\r\n      \r\n      const commanderColors = this.activeDeck.commander.color_identity || [];\r\n      const cardColors = card.color_identity || [];\r\n\r\n      if (cardColors.length === 0 && card.type_line?.toLowerCase().includes(\"land\")) {\r\n        return true;\r\n      }\r\n\r\n      return cardColors.every(color => commanderColors.includes(color));\r\n    },\r\n\r\n    isLegalInCommander(card) {\r\n      if (card.legalities?.commander === \"banned\") return false;\r\n\r\n      const unseriousSets = [\"unf\", \"ugl\", \"unh\", \"ust\", \"und\"];\r\n      if (unseriousSets.includes(card.set?.toLowerCase())) {\r\n        return false;\r\n      }\r\n\r\n      if (card.border_color === \"silver\" || card.frame_effects?.includes(\"acorn\")) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    },\r\n\r\n    formatColors(colors) {\r\n      if (!colors || colors.length === 0) return '<span class=\"mana small sc\"></span>';\r\n      return colors\r\n        .map(color => `<span class=\"mana small s${color.toLowerCase()}\"></span>`)\r\n        .join(' ');\r\n    },\r\n\r\n    formatManaCost(manaCost) {\r\n      if (!manaCost) return '';\r\n      return manaCost.replace(/\\{([^}]+)\\}/g, (match, symbol) => {\r\n        let cssClass = symbol.toLowerCase();\r\n        \r\n        if (cssClass === 't' || cssClass === 'tap') {\r\n          cssClass = 't';\r\n        }\r\n        if (cssClass === 'q' || cssClass === 'untap') {\r\n          cssClass = 'q';\r\n        }\r\n        if (cssClass.includes('/')) {\r\n          cssClass = cssClass.replace('/', '');\r\n        }\r\n        if (/^\\d+$/.test(cssClass)) {\r\n          cssClass = cssClass.padStart(2, '0').slice(-2);\r\n        }\r\n        \r\n        return `<span class=\"mana small s${cssClass}\"></span>`;\r\n      });\r\n    },\r\n    \r\n    loadDeck(deck) {\r\n      this.activeDeck = JSON.parse(JSON.stringify(deck));\r\n    },\r\n\r\n    backToDecks() {\r\n      this.activeDeck = null;\r\n    },\r\n\r\n    viewCardDetails(card) {\r\n      this.$emit('view-card', card);\r\n    },\r\n\r\n    addCardToDeck(card) {\r\n      if (!this.activeDeck) {\r\n        alert(\"Please select a deck first!\");\r\n        return false;\r\n      }\r\n      if (!this.isColorIdentityValid(card)) {\r\n        alert(` This card (${card.name}) doesn't match your commander's color identity!`);\r\n        return false;\r\n      }\r\n\r\n      if (!this.isLegalInCommander(card)) {\r\n        const confirmAdd = confirm(\r\n          ` \"${card.name}\" is not legal in Commander (banned/unserious set). Add anyway?`\r\n        );\r\n        if (!confirmAdd) return false;\r\n      }\r\n\r\n      const existingIndex = this.activeDeck.cards.findIndex(c => c.id === card.id);\r\n      \r\n      if (existingIndex >= 0) {\r\n        if (this.canHaveMultipleCopies(card)) {\r\n          if (!this.activeDeck.cards[existingIndex].count) {\r\n            this.activeDeck.cards[existingIndex].count = 2;\r\n          } else {\r\n            this.activeDeck.cards[existingIndex].count++;\r\n          }\r\n        } else {\r\n          alert(\"This non-land card is already in your deck (max 1 copy).\");\r\n        }\r\n      } else {\r\n        const newCard = JSON.parse(JSON.stringify(card));\r\n        this.activeDeck.cards.push(newCard);\r\n      }\r\n      this.$forceUpdate(); \r\n    },\r\n\r\n    addOneCard(card, event) {\r\n      const index = this.activeDeck.cards.findIndex(c => c.id === card.id);\r\n      if (index !== -1 && this.canHaveMultipleCopies(card)) {\r\n        if (!this.activeDeck.cards[index].count) {\r\n          this.activeDeck.cards[index].count = 2;\r\n        } else {\r\n          this.activeDeck.cards[index].count++;\r\n        }\r\n        if (event) {\r\n          const cardElement = event.target.closest('.deck-card');\r\n          if (cardElement) {\r\n            cardElement.classList.add('card-added');\r\n            setTimeout(() => cardElement.classList.remove('card-added'), 300);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    removeCard(card) {\r\n      const index = this.activeDeck.cards.findIndex(c => c.id === card.id);\r\n      if (index !== -1) {\r\n        if (card.count && card.count > 1) {\r\n          this.activeDeck.cards[index].count--;\r\n        } else {\r\n          this.activeDeck.cards.splice(index, 1);\r\n        }\r\n      }\r\n    },\r\n\r\n\r\nasync searchCommanderCards() {\r\n  this.showCommanderSearch = true;\r\n\r\n  if (this.commanderQuery.length < 2) {\r\n    this.commanderResults = [];\r\n    return;\r\n  }\r\n\r\n  const query = encodeURIComponent(`${this.commanderQuery} type:legendary type:creature`);\r\n\r\n  try {\r\n    const response = await fetch(`https://api.scryfall.com/cards/search?q=${query}`);\r\n    const data = await response.json();\r\n    this.commanderResults = data.data || [];\r\n  } catch (err) {\r\n    console.error(\"Commander search failed:\", err);\r\n    this.commanderResults = [];\r\n  }\r\n}\r\n,\r\n\r\n\r\n    selectCommander(card) {\r\n      this.selectedCommander = card;\r\n      this.showCommanderSearch = false;\r\n    },\r\n\r\n    async createDeck() {\r\n      if (this.newDeckName && this.selectedCommander) {\r\n        const newDeck = {\r\n          id: Date.now().toString(),\r\n          name: this.newDeckName,\r\n          commander: this.selectedCommander,\r\n          colors: this.selectedCommander.color_identity || [],\r\n          cards: [this.selectedCommander],\r\n          created: new Date().toISOString()\r\n        };\r\n        \r\n        try {\r\n          // Save to Firebase\r\n          await saveDeck(newDeck);\r\n          // Add to local state\r\n          this.decks.push(newDeck);\r\n          // Update localStorage as backup\r\n          localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n          \r\n          this.newDeckName = '';\r\n          this.selectedCommander = null;\r\n          this.showCreateDeckModal = false;\r\n          this.loadDeck(newDeck);\r\n        } catch (error) {\r\n          console.error('Error saving deck:', error);\r\n          // Fallback to local storage\r\n          this.decks.push(newDeck);\r\n          localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n          \r\n          this.newDeckName = '';\r\n          this.selectedCommander = null;\r\n          this.showCreateDeckModal = false;\r\n          this.loadDeck(newDeck);\r\n        }\r\n      }\r\n    },\r\n\r\n    async saveDeck() {\r\n      const index = this.decks.findIndex(deck => deck.id === this.activeDeck.id);\r\n      if (index !== -1) {\r\n        try {\r\n          this.firebaseStatus = 'checking';\r\n          await saveDeck(this.activeDeck);\r\n          this.decks[index] = JSON.parse(JSON.stringify(this.activeDeck));\r\n          this.firebaseStatus = 'connected';\r\n          this.lastSyncTime = new Date();\r\n        } catch (error) {\r\n          this.firebaseStatus = 'disconnected';\r\n          localStorage.setItem('mtg-decks', JSON.stringify(this.decks));\r\n        }\r\n      }\r\n    },\r\n\r\n    async loadDecksFromStorage() {\r\n      try {\r\n        this.firebaseStatus = 'checking';\r\n        const firebaseDecks = await loadDecks();\r\n        if (firebaseDecks && firebaseDecks.length > 0) {\r\n          this.decks = firebaseDecks;\r\n          this.firebaseStatus = 'connected';\r\n          this.lastSyncTime = new Date();\r\n        } else {\r\n          const storedDecks = localStorage.getItem('mtg-decks');\r\n          if (storedDecks) {\r\n            this.decks = JSON.parse(storedDecks);\r\n            this.firebaseStatus = 'disconnected';\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.firebaseStatus = 'error';\r\n        const storedDecks = localStorage.getItem('mtg-decks');\r\n        if (storedDecks) this.decks = JSON.parse(storedDecks);\r\n      }\r\n    },\r\n\r\n    startRenaming() {\r\n    this.tempDeckName = this.activeDeck.name;\r\n    this.isRenaming = true;\r\n    this.$nextTick(() => {\r\n      this.$refs.renameInput.focus();\r\n    });\r\n  },\r\n  \r\n  cancelRenaming() {\r\n    this.isRenaming = false;\r\n  },\r\n  \r\n  confirmRenaming() {\r\n    if (this.tempDeckName.trim()) {\r\n      this.activeDeck.name = this.tempDeckName.trim();\r\n      this.isRenaming = false;\r\n      this.saveDeck();\r\n    }\r\n  },\r\n\r\n  handleDeckExport(format) {\r\n    // This will be implemented in ExportPopup.vue\r\n    console.log('Exporting deck in format:', format);\r\n    this.showExportModal = false;\r\n  },\r\n\r\n  showDeckStats() {\r\n    if (this.activeDeck) {\r\n        this.showStatsModal = true;\r\n      } else {\r\n        console.warn(\"No active deck to show stats for\");\r\n      }\r\n    },\r\n\r\n    getDeckCardCount(deck) {\r\n    if (!deck || !deck.cards) return 0;\r\n    return deck.cards.reduce((sum, card) => sum + (card.count || 1), 0);\r\n  },\r\n    toggleStatsPopup() {\r\n      this.showStatsPopup = !this.showStatsPopup;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadDecksFromStorage();\r\n    this.connectionInterval = setInterval(this.checkConnection, 30000); // Check every 30 seconds\r\n  },\r\n  beforeUnmount() {\r\n    clearInterval(this.connectionInterval);\r\n    \r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n@import '../assets/mana-master/css/mana-cost.css';\r\n.ms {\r\n  margin-right: 2px;\r\n}\r\n\r\n/* Custom sizing for DeckSidebar */\r\n.deck-sidebar .mana {\r\n  vertical-align: middle;\r\n  margin: 0 2px;\r\n}\r\n\r\n/* Larger size for color identity symbols */\r\n.deck-sidebar .deck-colors .mana {\r\n  width: 1.4em !important;\r\n  height: 1.4em !important;\r\n  background-size: auto 700% !important;\r\n}\r\n\r\n/* Larger size for mana costs in card text */\r\n.deck-sidebar .mana-symbols .mana {\r\n  width: 1em !important;\r\n  height: 1em !important;\r\n  background-size: auto 700% !important;\r\n}\r\n\r\n/* Commander section symbols */\r\n.deck-sidebar .commander-section .mana {\r\n  width: 1.1em !important;\r\n  height: 1.1em !important;\r\n}\r\n\r\n/* Modal symbols */\r\n.deck-sidebar .modal-content .mana {\r\n  width: 1.4em !important;\r\n  height: 1.4em !important;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.deck-sidebar {\r\n  width: 320px;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  height: 100vh;\r\n  background-color: #f8fcf8;\r\n  border-left: 1px solid #e2e8f0;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  box-shadow: -2px 0 10px rgba(0, 0, 0, 0.05);\r\n  z-index: 100;\r\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n  color: #2d3748;\r\n}\r\n\r\n.sidebar-title, .section-title, .modal-title, .modal-subtitle {\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n  letter-spacing: -0.5px;\r\n}\r\n\r\n.sidebar-title {\r\n  margin-top: 0;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.section-title {\r\n  font-size: 1.2rem;\r\n  margin-bottom: 12px;\r\n  padding-bottom: 6px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.sidebar-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid #4299e1;\r\n  padding-bottom: 13px;\r\n}\r\n\r\n.playtest-btn {\r\n  background-color: #f7fafc;\r\n  color: #253527;;\r\n  border: 1px solid #e2e8f0;\r\n  padding: 5px 10px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.playtest-btn:hover {\r\n  background-color: #ebffee;\r\n  border-color: #bef8d7;\r\n  color: #4e7754;\r\n  transform: scale(1.05);\r\n}\r\n\r\n\r\n.deck-list h2 {\r\n  margin-top: 0;\r\n}\r\n\r\n.deck-items-container { \r\n  flex: 1;\r\n  overflow-y: auto;\r\n  margin-bottom: 0; \r\n  padding-top: 10px; \r\n  position: relative;\r\n  \r\n  padding-bottom: 150px; /* Match gradient-blur height */\r\n}\r\n\r\n.deck-buttons-container { \r\n  position: sticky;\r\n  bottom: 0;\r\n  background: white; \r\n  padding: 10px 0;\r\n  border-top: 1px solid #e2e8f0;\r\n  z-index: 10;\r\n}\r\n\r\n.gradient-blur {\r\n  position: absolute;\r\n  inset: auto 0 0px 0;\r\n  height: 150px; \r\n  z-index: 1; \r\n  pointer-events: none; \r\n  overflow: hidden; \r\n  background-color: #f8fcf8; \r\n}\r\n\r\n.gradient-blur::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  inset: 0; /* Cover the entire .gradient-blur area */\r\n  background-color: transparent; /* Ensure pseudo-element is transparent */\r\n\r\n  /* Apply a single, noticeable blur */\r\n  backdrop-filter: blur(12px);\r\n  -webkit-backdrop-filter: blur(12px); /* Add vendor prefix */\r\n\r\n  /* Mask the blur effect with a gradient */\r\n  mask: linear-gradient(\r\n    to bottom,\r\n    rgba(0, 0, 0, 0) 0%,    /* Start transparent at the top */\r\n    rgba(0, 0, 0, 0.1) 20%, /* Gently start fading in the mask */\r\n    rgba(0, 0, 0, 1) 60%,   /* Become fully opaque (blur visible) */\r\n    rgba(0, 0, 0, 1) 100%   /* Stay opaque to the bottom */\r\n  );\r\n  -webkit-mask: linear-gradient( /* Add vendor prefix */\r\n    to bottom,\r\n    rgba(0, 0, 0, 0) 0%,\r\n    rgba(0, 0, 0, 0.1) 20%,\r\n    rgba(0, 0, 0, 1) 60%,\r\n    rgba(0, 0, 0, 1) 100%\r\n  );\r\n\r\n  /* z-index is not strictly needed here as it's inside the parent */\r\n}\r\n\r\n\r\n.create-deck-btn, .import-deck-btn {\r\n  margin-top: 10px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.deck-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: calc(100vh - 80px);\r\n  position: relative;\r\n}\r\n\r\n.deck-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  margin-bottom: 8px;\r\n  border: 1px solid #e2e8f0;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  position: relative;\r\n  z-index: 0;\r\n}\r\n\r\n.deck-name {\r\n  font-weight: 500;\r\n  flex: 1;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  text-align: left;\r\n}\r\n\r\n.deck-item:hover {\r\n  background-color: #f7fafc;\r\n  border-color: #4299e1;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.delete-deck-btn {\r\n  background-color: #fff5f5;\r\n  color: #e53e3e;\r\n  border: 1px solid #fed7d7;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  transition: all 0.2s ease;\r\n  font-size: 1.1rem;\r\n  padding: 4px 8px;\r\n  margin-left: 8px;\r\n  transition: all 0.2s ease;\r\n  z-index: 1;\r\n}\r\n\r\n.delete-deck-btn:hover {\r\n  transform: scale(1.2);\r\n  color: #c53030;\r\n}\r\n\r\n.create-deck-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  margin-top: 16px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.create-deck-btn:hover {\r\n  background-color: #3182ce;\r\n}\r\n\r\n.import-deck-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #38a169;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  margin-top: 10px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.import-deck-btn:hover {\r\n  background-color: #2f855a;\r\n}\r\n\r\n.deck-warning {\r\n  display: inline-block;\r\n  width: 18px;\r\n  height: 18px;\r\n  background-color: #e53e3e;\r\n  color: white;\r\n  border-radius: 50%;\r\n  text-align: center;\r\n  line-height: 18px;\r\n  font-weight: bold;\r\n  margin-right: 8px;\r\n  font-size: 12px;\r\n}\r\n\r\n.btn-icon {\r\n  margin-right: 8px;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.deck-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.deck-header-top {\r\n  margin-bottom: 12px;\r\n  display: flex;\r\n}\r\n\r\n.deck-title-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.title-wrapper {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.title-container {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  border-bottom: 2px solid #4299e1;\r\n  width: 100%;\r\n  padding-bottom: 8px;\r\n}\r\n\r\n.title-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  margin: auto;\r\n}\r\n\r\n.title-actions button {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  font-size: 16px;\r\n  line-height: 1;\r\n}\r\n\r\n.deck-title {\r\n  margin: auto;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #2d3748;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.deck-meta {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  margin-top: 8px;\r\n}\r\n\r\n\r\n.deck-colors {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.title-wrapper .deck-meta-row .deck-meta .card-count {\r\n  padding: 8px 12px;\r\n  background-color: #f7fafc;\r\n  color: #4a5568;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n\r\n.card-count {\r\n  font-weight: 600;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  background: #f7fafc;\r\n  border: 1px solid #e2e8f0;\r\n  color: #4a5568;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.title-wrapper .deck-meta-row .deck-meta .card-count.card-count.over-limit {\r\n  color: white;\r\n  background-color: #e53e3e;\r\n  border-color: #e53e3e;\r\n}\r\n\r\n.deck-header-actions {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.back-btn {\r\n  padding: 8px 12px;\r\n  background-color: #f7fafc;\r\n  color: #4a5568;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  transition: all 0.2s ease;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.back-btn:hover {\r\n  background-color: #edf2f7;\r\n  border-color: #cbd5e0;\r\n}\r\n\r\n.back-icon {\r\n  margin-right: 6px;\r\n}\r\n\r\n.stats-btn {\r\n  padding: 8px 12px;\r\n  background-color: #f7fafc;\r\n  color: #4a5568;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  transition: all 0.2s ease;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.stats-btn:hover {\r\n  background-color: #ebf8ff;\r\n  border-color: #bee3f8;\r\n  color: #3182ce;\r\n}\r\n\r\n.stats-icon {\r\n  margin-right: 6px;\r\n}\r\n\r\n.deck-header .deck-header-top .delete-deck-btn {\r\n  padding: 8px 12px;\r\n  background-color: #fff5f5;\r\n  color: #e53e3e;\r\n  border: 1px solid #fed7d7;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  transition: all 0.2s ease;\r\n  font-size: 0.9rem;\r\n  margin-left: auto;\r\n}\r\n\r\n.delete-deck-btn:hover {\r\n  background-color: #fee2e2;\r\n  border-color: #feb2b2;\r\n}\r\n\r\n.commander-section {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.commander-card {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 10px;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.commander-card:hover {\r\n  border-color: #4299e1;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.commander-card img {\r\n  width: 60px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.commander-name {\r\n  font-weight: 600;\r\n}\r\n\r\n.deck-cards {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.deck-card {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 12px;\r\n  margin: 4px 0;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.25s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.deck-card::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: inherit;\r\n  z-index: -1;\r\n  border-radius: 6px;\r\n}\r\n\r\n.deck-card[style*=\"White\"] { --color-intensity: 0.8; }\r\n.deck-card[style*=\"Blue\"] { --color-intensity: 0.7; }\r\n.deck-card[style*=\"Black\"] { --color-intensity: 0.6; }\r\n.deck-card[style*=\"Red\"] { --color-intensity: 0.7; }\r\n.deck-card[style*=\"Green\"] { --color-intensity: 0.7; }\r\n\r\n.deck-card:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.card-info {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.card-name {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  font-size: 14px;\r\n}\r\n\r\n.card-count {\r\n  font-size: 12px;\r\n  color: #595959;\r\n  margin-left: 8px;\r\n  margin-right: 8px;\r\n}\r\n\r\n.color-indicator {\r\n  display: inline-block;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  margin-right: 4px;\r\n}\r\n\r\n.card-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.add-btn {\r\n  background: none;\r\n  border: 1px solid #e2e8f0;\r\n  color: #718096;\r\n  font-size: 1.125rem;\r\n  cursor: pointer;\r\n  width: 10px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s ease;\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.add-btn:hover {\r\n  color: white;\r\n  background-color: #4299e1;\r\n  border-color: #4299e1;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.remove-btn {\r\n  background: none;\r\n  border: 1px solid #e2e8f0;\r\n  color: #718096;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  width: 10px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s ease;\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.remove-btn:hover {\r\n  color: white;\r\n  background-color: #e53e3e;\r\n  border-color: #e53e3e;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.add-btn:active, .remove-btn:active {\r\n  transform: scale(0.9);\r\n}\r\n\r\n.deck-actions {\r\n  margin-top: 20px;\r\n  position: sticky;\r\n  bottom: 16px;\r\n  background-color: white;\r\n  padding-top: 10px;\r\n  border-top: 1px solid #e2e8f0;\r\n}\r\n\r\n.save-deck-btn {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background-color: #4299e1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  transition: background-color 0.2s ease;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.save-deck-btn:hover:not(:disabled) {\r\n  background-color: #3182ce;\r\n}\r\n\r\n.save-deck-btn:disabled {\r\n  background-color: #a0aec0;\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(3px);\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 10px;\r\n  padding: 24px;\r\n  width: 500px;\r\n  max-width: 90%;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.modal-title {\r\n  margin-top: 0;\r\n  margin-bottom: 20px;\r\n  font-size: 1.5rem;\r\n  color: #4299e1;\r\n  border-bottom: 2px solid #4299e1;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.modal-subtitle {\r\n  font-size: 1.1rem;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.commander-search {\r\n  width: 700px;\r\n  max-width: 90%;\r\n}\r\n\r\n.search-box {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.search-box input {\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s ease;\r\n}\r\n\r\n.search-box input:focus {\r\n  border-color: #4299e1;\r\n  outline: none;\r\n}\r\n\r\n.commander-results {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding: 4px;\r\n}\r\n\r\n.commander-option {\r\n  text-align: center;\r\n  cursor: pointer;\r\n  padding: 10px;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.commander-option:hover {\r\n  border-color: #4299e1;\r\n  background-color: #f7fafc;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.commander-option img, .land-preview img, .selected-commander img {\r\n  width: 100%;\r\n  border-radius: 5px;\r\n  margin-bottom: 6px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.search-result-name {\r\n  display: block;\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.selected-commander, .selected-land {\r\n  margin-top: 16px;\r\n  padding: 16px;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.commander-preview, .land-preview {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.commander-preview img, .land-preview img {\r\n  width: 70px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.selected-card-name {\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 6px;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-group input:focus {\r\n  border-color: #4299e1;\r\n  outline: none;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.cancel-btn, .confirm-btn, .search-commander-btn {\r\n  padding: 10px 16px;\r\n  border-radius: 8px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #f7fafc;\r\n  border: 1px solid #e2e8f0;\r\n  color: #4a5568;\r\n}\r\n\r\n.cancel-btn:hover {\r\n  border-color: #a0aec0;\r\n  background-color: #edf2f7;\r\n}\r\n\r\n.confirm-btn {\r\n  background-color: #4299e1;\r\n  border: 1px solid #4299e1;\r\n  color: white;\r\n}\r\n\r\n.confirm-btn:hover:not(:disabled) {\r\n  background-color: #3182ce;\r\n}\r\n\r\n.confirm-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.delete-btn {\r\n  background-color: #e53e3e !important;\r\n  border-color: #e53e3e !important;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background-color: #c53030 !important;\r\n  border-color: #c53030 !important;\r\n}\r\n\r\n.search-commander-btn {\r\n  background-color: #f7fafc;\r\n  border: 1px solid #e2e8f0;\r\n  color: #4a5568;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-weight: 500;\r\n}\r\n\r\n.search-commander-btn:hover {\r\n  border-color: #4299e1;\r\n  color: #4299e1;\r\n}\r\n\r\n@keyframes cardAdded {\r\n  0% {\r\n    background-color: transparent;\r\n  }\r\n  50% {\r\n    background-color: rgba(56, 161, 105, 0.2);\r\n  }\r\n  100% {\r\n    background-color: transparent;\r\n  }\r\n}\r\n\r\n.card-added {\r\n  animation: cardAdded 0.3s ease-in-out;\r\n}\r\n\r\n@keyframes countChanged {\r\n  0% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n    color: #38a169;\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.count-changed {\r\n  animation: countChanged 0.3s ease-in-out;\r\n}\r\n\r\n.ms {\r\n  display: inline-block;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n  font-size: 1em;\r\n  border-radius: 50%;\r\n  margin: 0 2px;\r\n  text-align: center;\r\n  line-height: 1.3em;\r\n  color: white;\r\n  font-weight: bold;\r\n  box-shadow: -0.05em 0.12em 0 0 rgba(0, 0, 0, 0.3);\r\n  vertical-align: middle;\r\n  position: relative;\r\n  top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.ms-w {\r\n  background-color: #f0f2c0;\r\n}\r\n\r\n.ms-u {\r\n  background-color: #b5cde3;\r\n}\r\n\r\n.ms-b {\r\n  background-color: #aca29a;\r\n  color: #fff;\r\n}\r\n\r\n.ms-r {\r\n  background-color: #db8664;\r\n}\r\n\r\n.ms-g {\r\n  background-color: #93b483;\r\n}\r\n\r\n.ms-c {\r\n  background-color: #ccc;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .deck-sidebar {\r\n    width: 100%;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 1000;\r\n    height: 100vh;\r\n    transform: translateX(100%);\r\n    transition: transform 0.3s ease;\r\n  }\r\n  \r\n  .deck-sidebar.open {\r\n    transform: translateX(0);\r\n  }\r\n  \r\n  .commander-results {\r\n    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n  }\r\n}\r\n\r\n.deck-sidebar::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.deck-sidebar::-webkit-scrollbar-track {\r\n  background: #f7fafc;\r\n}\r\n\r\n.deck-sidebar::-webkit-scrollbar-thumb {\r\n  background-color: #a0aec0;\r\n  border-radius: 20px;\r\n}\r\n\r\n.commander-results::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.commander-results::-webkit-scrollbar-track {\r\n  background: #f7fafc;\r\n}\r\n\r\n.commander-results::-webkit-scrollbar-thumb {\r\n  background-color: #a0aec0;\r\n  border-radius: 20px;\r\n}\r\n\r\n.deck-card.invalid-color {\r\n  background: linear-gradient(to right, rgba(255, 59, 48, 0.2), transparent) !important;\r\n  border-left: 3px solid rgba(255, 59, 48, 0.5);\r\n}\r\n\r\n.deck-card.invalid-format {\r\n  background: linear-gradient(to right, rgba(255, 149, 0, 0.2), transparent) !important;\r\n  border-left: 3px solid rgba(255, 149, 0, 0.5);\r\n}\r\n\r\n.deck-card.invalid-color::after,\r\n.deck-card.invalid-format::after {\r\n  content: attr(data-invalid-reason);\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n  background: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.deck-card:hover::after {\r\n  opacity: 1;\r\n}\r\n\r\n.color-W { background: #f8f8f7; }\r\n.color-U { background: #0e68ab; }\r\n.color-B { background: #150b00; }\r\n.color-R { background: #d3202a; }\r\n.color-G { background: #00733e; }\r\n\r\n.connection-status {\r\n  padding: 8px 12px;\r\n  margin-bottom: 16px;\r\n  border-radius: 4px;\r\n  font-size: 0.85rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background-color: #f8fafc;\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.status-icon {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n}\r\n\r\n.connection-status.checking .status-icon {\r\n  background-color: #ed8936; /* orange */\r\n  animation: pulse 1.5s infinite;\r\n}\r\n\r\n.connection-status.connected .status-icon {\r\n  background-color: #48bb78; /* green */\r\n}\r\n\r\n.connection-status.disconnected .status-icon,\r\n.connection-status.error .status-icon {\r\n  background-color: #e53e3e; /* red */\r\n}\r\n\r\n.sync-time {\r\n  color: #718096;\r\n  font-size: 0.8rem;\r\n  margin-left: auto;\r\n}\r\n\r\n.export-btn, .rename-btn {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 1.4rem;\r\n  padding: 6px;\r\n  margin: 0 2px;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.export-btn:hover {\r\n  color: #4299e1;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.rename-btn:hover {\r\n  color: #38a169;\r\n  transform: scale(1.1);\r\n}\r\n\r\n.rename-input-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.rename-input {\r\n  flex: 1;\r\n  padding: 6px 10px;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 4px;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.confirm-rename-btn, .cancel-rename-btn {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  padding: 6px;\r\n}\r\n\r\n.confirm-rename-btn {\r\n  color: #38a169;\r\n}\r\n\r\n.cancel-rename-btn {\r\n  color: #e53e3e;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% { opacity: 1; }\r\n  50% { opacity: 0.5; }\r\n  100% { opacity: 1; }\r\n}\r\n\r\n</style>","import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.VUE_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.VUE_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.VUE_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.VUE_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.VUE_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.VUE_APP_FIREBASE_APP_ID\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const db = getFirestore(app);","// src/services/deckService.js\r\nimport { doc, setDoc, getDocs, collection, deleteDoc } from 'firebase/firestore';\r\nimport { db } from '../firebase/firebase'; // Fixed path\r\n\r\nexport async function saveDeck(deck) {\r\n  await setDoc(doc(db, \"decks\", deck.id), deck);\r\n}\r\n\r\nexport async function loadDecks() {\r\n  const querySnapshot = await getDocs(collection(db, \"decks\"));\r\n  return querySnapshot.docs.map(doc => doc.data());\r\n}\r\n\r\nexport async function deleteDeck(deckId) {\r\n  await deleteDoc(doc(db, \"decks\", deckId));\r\n}","<template>\r\n  <div v-if=\"isOpen\" class=\"modal-overlay\" @click=\"$emit('close')\">\r\n    <div class=\"modal-content\" @click.stop>\r\n      <h2 class=\"modal-title\">Import Deck</h2>\r\n      \r\n      <div class=\"form-group\">\r\n        <label for=\"deckName\">Deck Name:</label>\r\n        <input\r\n          id=\"deckName\"\r\n          v-model=\"deckName\"\r\n          type=\"text\"\r\n          placeholder=\"Enter deck name\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"deckFile\">Deck List (txt file):</label>\r\n        <input\r\n          ref=\"fileInputRef\"\r\n          id=\"deckFile\"\r\n          type=\"file\"\r\n          accept=\".txt\"\r\n          @change=\"handleFileUpload\"\r\n          :disabled=\"processing || !deckName.trim()\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"import-instructions\">\r\n        <h3>Format Instructions:</h3>\r\n        <pre class=\"format-example\">\r\nCommander\r\n1x Example Commander Card (set)\r\n1x Example Card (set)\r\n13x Example Land (set)</pre>\r\n        <ul>\r\n          <li>First line should be \"Commander\" (optional)</li>\r\n          <li>Card format: [quantity]x Card Name (Set Code)</li>\r\n          <li>Quantity and set code are optional</li>\r\n          <li>If no commander line, you'll be prompted to choose one</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n      <div v-if=\"processing\" class=\"processing-message\">Processing deck list...</div>\r\n\r\n   <!-- Commander Selection Modal -->\r\n   <div v-if=\"showCommanderSelection\" class=\"commander-selection-modal\">\r\n        <h3>No commander specified</h3>\r\n        <p>Please select a commander from these valid options:</p>\r\n        <div class=\"commander-options-container\">\r\n          <div class=\"commander-options\">\r\n            <div \r\n              v-for=\"(card, index) in potentialCommanders\" \r\n              :key=\"index\"\r\n              class=\"commander-option\"\r\n              :class=\"{ selected: selectedCommanderIndex === index }\"\r\n              @click=\"selectedCommanderIndex = index\"\r\n              @mouseenter=\"hoveredCommanderIndex = index\"\r\n              @mouseleave=\"hoveredCommanderIndex = null\"\r\n            >\r\n              {{ card.name }}\r\n            </div>\r\n          </div>\r\n          <div v-if=\"hoveredCommanderIndex !== null\" class=\"card-preview\">\r\n            <!-- Single-faced card -->\r\n            <img \r\n              v-if=\"potentialCommanders[hoveredCommanderIndex].image_uris?.normal\" \r\n              :src=\"potentialCommanders[hoveredCommanderIndex].image_uris.normal\" \r\n              alt=\"Card preview\"\r\n            />\r\n            \r\n            <!-- Double-faced card - front face only -->\r\n            <img \r\n              v-else-if=\"potentialCommanders[hoveredCommanderIndex].card_faces && \r\n                      potentialCommanders[hoveredCommanderIndex].card_faces[0]?.image_uris?.normal\" \r\n              :src=\"potentialCommanders[hoveredCommanderIndex].card_faces[0].image_uris.normal\" \r\n              alt=\"Card front face\"\r\n            />\r\n            \r\n            <!-- No image available -->\r\n            <div v-else class=\"no-image\">\r\n              No image available\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-actions\">\r\n          <button class=\"cancel-btn\" @click=\"cancelCommanderSelection\">Cancel</button>\r\n          <button \r\n            class=\"confirm-btn\" \r\n            @click=\"confirmCommanderSelection\"\r\n            :disabled=\"selectedCommanderIndex === null\"\r\n          >\r\n            Confirm\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\nname: 'ImportPopup',\r\nprops: {\r\n  isOpen: {\r\n    type: Boolean,\r\n    required: true\r\n  }\r\n},\r\nemits: ['close', 'import'],\r\nsetup(props, { emit }) {\r\n  const deckName = ref('');\r\n  const error = ref(null);\r\n  const processing = ref(false);\r\n  const skippedCards = ref([]);\r\n  const fileInputRef = ref(null);\r\n  const showCommanderSelection = ref(false);\r\n  const potentialCommanders = ref([]);\r\n  const selectedCommanderIndex = ref(null);\r\n  const pendingDeckData = ref(null);\r\n\r\n  const parseCardLine = (line) => {\r\n    const trimmedLine = line.trim();\r\n    if (!trimmedLine || trimmedLine.toLowerCase() === 'commander') return null;\r\n\r\n    // Handle special characters by using a more flexible regex\r\n    const regex = /^(?:(?<quantity>\\d+)\\s*(?:x\\s*)?)?(?<name>.+?)(?:\\s*\\((?<set>[^)]+)\\))?\\s*$/;\r\n    const match = trimmedLine.match(regex);\r\n\r\n    if (!match || !match.groups.name.trim()) return null;\r\n\r\n    return {\r\n      name: match.groups.name.trim(),\r\n      count: match.groups.quantity ? parseInt(match.groups.quantity) : 1,\r\n      setCode: match.groups.set ? match.groups.set.trim() : undefined\r\n    };\r\n  };\r\n\r\n  const isPotentialCommander = (cardData) => {\r\n    if (!cardData.type_line) return false;\r\n    const typeLine = cardData.type_line.toLowerCase();\r\n    \r\n    // Check for legendary creatures or planeswalkers\r\n    const isLegendary = typeLine.includes('legendary');\r\n    const isCreature = typeLine.includes('creature') || typeLine.includes('god');\r\n    const isPlaneswalker = typeLine.includes('planeswalker');\r\n    \r\n    // Some planeswalkers can be commanders (like those with \"can be your commander\")\r\n    const canBeCommander = typeLine.includes('can be your commander');\r\n    \r\n    return (isLegendary && (isCreature || isPlaneswalker)) || canBeCommander;\r\n  };\r\n\r\n  const findPotentialCommanders = async (cards) => {\r\n    const commanders = [];\r\n    \r\n    for (const card of cards) {\r\n      try {\r\n        const response = await axios.get(`https://api.scryfall.com/cards/search`, {\r\n          params: {\r\n            q: `!\"${card.name.replace(/\"/g, '')}\"`, // Handle quotes in names\r\n            unique: 'cards'\r\n          }\r\n        });\r\n        \r\n        if (response.data.data.length > 0) {\r\n          const cardData = response.data.data[0];\r\n          if (isPotentialCommander(cardData)) {\r\n            commanders.push({\r\n              ...cardData,\r\n              count: card.count,\r\n              originalName: card.name // Keep original name for matching\r\n            });\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(`Error fetching card: ${card.name}`, error);\r\n      }\r\n    }\r\n\r\n    return commanders;\r\n  };\r\n\r\n  const verifyImport = (originalText, importedCards) => {\r\n    const originalLines = originalText.split('\\n')\r\n      .filter(line => {\r\n        const trimmed = line.trim();\r\n        return trimmed && trimmed.toLowerCase() !== 'commander';\r\n      });\r\n    \r\n    const missingCards = [];\r\n    \r\n    const originalCardNames = [];\r\n    originalLines.forEach(line => {\r\n      const cardData = parseCardLine(line);\r\n      if (cardData) {\r\n        const name = cardData.name.toLowerCase();\r\n        originalCardNames.push(name);\r\n        if (!importedCards.some(c => c.name.toLowerCase() === name)) {\r\n          missingCards.push(line.trim());\r\n        }\r\n      }\r\n    });\r\n    \r\n    return { missingCards };\r\n  };\r\n\r\n  const processDeckList = async (text) => {\r\n    const lines = text.split('\\n').filter(line => line.trim());\r\n    let commander = null;\r\n    const cards = [];\r\n    const skipped = [];\r\n\r\n    // Check for commander header\r\n    const hasCommanderHeader = lines[0]?.trim().toLowerCase() === 'commander';\r\n    if (hasCommanderHeader && lines.length > 1) {\r\n      const commanderLine = lines[1];\r\n      const commanderData = parseCardLine(commanderLine);\r\n      if (commanderData) {\r\n        try {\r\n          const response = await axios.get(`https://api.scryfall.com/cards/search`, {\r\n            params: {\r\n              q: `!\"${commanderData.name.replace(/\"/g, '')}\"`,\r\n              unique: 'cards'\r\n            }\r\n          });\r\n          \r\n          if (response.data.data.length > 0) {\r\n            commander = response.data.data[0];\r\n            commander.count = 1;\r\n            commander.isCommander = true;\r\n          } else {\r\n            throw new Error(`Commander not found: ${commanderData.name}`);\r\n          }\r\n        } catch (error) {\r\n          console.error(`Commander not found: ${commanderData.name}`, error);\r\n        }\r\n      }\r\n      lines.splice(0, 2);\r\n    }\r\n\r\n    // Process all cards\r\n    for (const line of lines) {\r\n      const cardData = parseCardLine(line);\r\n      if (cardData) {\r\n        cards.push(cardData);\r\n      }\r\n    }\r\n\r\n    // Process cards with duplicate prevention\r\n    const processedCards = [];\r\n    const processedCardNames = new Set();\r\n\r\n    // Process non-commander cards first\r\n    for (const card of cards) {\r\n      try {\r\n        // Skip if this is the specified commander\r\n        if (commander && card.name.toLowerCase() === commander.name.toLowerCase()) {\r\n          continue;\r\n        }\r\n\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        const response = await axios.get(`https://api.scryfall.com/cards/search`, {\r\n          params: {\r\n            q: `!\"${card.name.replace(/\"/g, '')}\"`,\r\n            unique: 'cards'\r\n          }\r\n        });\r\n\r\n        if (response.data.data.length > 0) {\r\n          const cardData = response.data.data[0];\r\n          cardData.count = card.count;\r\n          \r\n          if (!processedCardNames.has(cardData.name)) {\r\n            processedCards.push(cardData);\r\n            processedCardNames.add(cardData.name);\r\n          }\r\n        } else {\r\n          // Try to find the card using a more flexible search\r\n          const fallbackResponse = await axios.get(`https://api.scryfall.com/cards/search`, {\r\n            params: {\r\n              q: card.name,\r\n              unique: 'cards'\r\n            }\r\n          });\r\n\r\n          if (fallbackResponse.data.data.length > 0) {\r\n            const cardData = fallbackResponse.data.data[0];\r\n            cardData.count = card.count;\r\n            \r\n            if (!processedCardNames.has(cardData.name)) {\r\n              processedCards.push(cardData);\r\n              processedCardNames.add(cardData.name);\r\n            }\r\n          } else {\r\n            throw new Error(`Card not found: ${card.name}`);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // Skip error for double-faced cards if they were added anyway\r\n        if (!processedCardNames.has(card.name)) {\r\n          skipped.push(`${card.name}`);\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      commander,\r\n      cards: processedCards,\r\n      skipped\r\n    };\r\n  };\r\n\r\n  const handleFileUpload = async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    if (!deckName.value.trim()) {\r\n      error.value = 'Please enter a deck name first';\r\n      return;\r\n    }\r\n\r\n    processing.value = true;\r\n    error.value = null;\r\n    skippedCards.value = [];\r\n\r\n    try {\r\n      const text = await file.text();\r\n      const deckData = await processDeckList(text);\r\n      \r\n      // If no commander was specified, find potential commanders\r\n      if (!deckData.commander) {\r\n        const commanders = await findPotentialCommanders(deckData.cards);\r\n        if (commanders.length > 0) {\r\n          potentialCommanders.value = commanders;\r\n          pendingDeckData.value = deckData;\r\n          showCommanderSelection.value = true;\r\n          processing.value = false;\r\n          return;\r\n        } else {\r\n          throw new Error('No valid commanders found in the deck list');\r\n        }\r\n      }\r\n\r\n      completeImport(deckData, text);\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : 'Failed to process deck list';\r\n      console.error('Import error:', err);\r\n    } finally {\r\n      if (!showCommanderSelection.value) {\r\n        processing.value = false;\r\n        if (fileInputRef.value) {\r\n          fileInputRef.value.value = '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const completeImport = (deckData, originalText) => {\r\n    const { missingCards } = verifyImport(originalText, deckData.cards);\r\n    \r\n    if (missingCards.length > 0) {\r\n      let message = `Missing cards (${missingCards.length}):\\n${missingCards.slice(0, 5).join('\\n')}`;\r\n      if (missingCards.length > 5) message += `\\n...and ${missingCards.length - 5} more`;\r\n      alert(`Import verification issues:\\n${message}`);\r\n    }\r\n\r\n    if (deckData.skipped.length > 0) {\r\n      alert(`Note: The following cards were not found and were skipped:\\n${deckData.skipped.slice(0, 10).join('\\n')}${deckData.skipped.length > 10 ? `\\n...and ${deckData.skipped.length - 10} more` : ''}`);\r\n    }\r\n\r\n    emit('import', {\r\n      name: deckName.value,\r\n      commander: deckData.commander,\r\n      cards: deckData.cards,\r\n      colors: deckData.commander?.color_identity || [],\r\n      created: new Date().toISOString(),\r\n      missingCards\r\n    });\r\n\r\n    emit('close');\r\n  };\r\n\r\n  const hoveredCommanderIndex = ref(null);\r\n\r\n  const confirmCommanderSelection = () => {\r\n    if (selectedCommanderIndex.value !== null && pendingDeckData.value) {\r\n      const selectedCommander = potentialCommanders.value[selectedCommanderIndex.value];\r\n      selectedCommander.isCommander = true;\r\n      selectedCommander.count = 1;\r\n      \r\n      // Remove the commander from the main cards list if it's there\r\n      const cardsWithoutCommander = pendingDeckData.value.cards.filter(\r\n        card => card.name.toLowerCase() !== selectedCommander.name.toLowerCase()\r\n      );\r\n      \r\n      completeImport({\r\n        commander: selectedCommander,\r\n        cards: [selectedCommander, ...cardsWithoutCommander],\r\n        skipped: pendingDeckData.value.skipped\r\n      }, '');\r\n    }\r\n    \r\n    resetCommanderSelection();\r\n  };\r\n\r\n  const cancelCommanderSelection = () => {\r\n    resetCommanderSelection();\r\n    if (fileInputRef.value) {\r\n      fileInputRef.value.value = '';\r\n    }\r\n  };\r\n\r\n  const resetCommanderSelection = () => {\r\n    showCommanderSelection.value = false;\r\n    potentialCommanders.value = [];\r\n    selectedCommanderIndex.value = null;\r\n    pendingDeckData.value = null;\r\n    processing.value = false;\r\n  };\r\n\r\n  return {\r\n    deckName,\r\n    error,\r\n    processing,\r\n    skippedCards,\r\n    fileInputRef,\r\n    handleFileUpload,\r\n    showCommanderSelection,\r\n    hoveredCommanderIndex,\r\n    potentialCommanders,\r\n    selectedCommanderIndex,\r\n    confirmCommanderSelection,\r\n    cancelCommanderSelection\r\n  };\r\n}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\nposition: fixed;\r\ntop: 0;\r\nleft: 0;\r\nwidth: 100%;\r\nheight: 100%;\r\nbackground: rgba(0, 0, 0, 0.7);\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\nz-index: 1000;\r\nbackdrop-filter: blur(3px);\r\n}\r\n\r\n.modal-content {\r\nbackground: white;\r\nborder-radius: 10px;\r\npadding: 24px;\r\nwidth: 500px;\r\nmax-width: 90%;\r\nmax-height: 80vh;\r\noverflow-y: auto;\r\nbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.modal-title {\r\nmargin-top: 0;\r\nmargin-bottom: 20px;\r\nfont-size: 1.5rem;\r\ncolor: #4299e1;\r\nborder-bottom: 2px solid #4299e1;\r\npadding-bottom: 10px;\r\n}\r\n\r\n.form-group {\r\nmargin-bottom: 16px;\r\n}\r\n\r\n.form-group label {\r\ndisplay: block;\r\nmargin-bottom: 6px;\r\nfont-weight: 500;\r\n}\r\n\r\n.form-group input {\r\nwidth: 100%;\r\npadding: 10px;\r\nborder: 1px solid #e2e8f0;\r\nborder-radius: 8px;\r\nfont-size: 1rem;\r\n}\r\n\r\n.form-group input:focus {\r\nborder-color: #4299e1;\r\noutline: none;\r\n}\r\n\r\n.import-instructions {\r\nmargin-top: 20px;\r\npadding: 16px;\r\nbackground-color: #f7fafc;\r\nborder-radius: 8px;\r\nborder: 1px solid #e2e8f0;\r\n}\r\n\r\n.format-example {\r\nbackground-color: #edf2f7;\r\npadding: 12px;\r\nborder-radius: 6px;\r\nmargin: 12px 0;\r\nfont-family: monospace;\r\nwhite-space: pre-wrap;\r\n}\r\n\r\n.error-message {\r\ncolor: #e53e3e;\r\npadding: 12px;\r\nbackground-color: #fff5f5;\r\nborder: 1px solid #feb2b2;\r\nborder-radius: 6px;\r\nmargin-top: 12px;\r\n}\r\n\r\n.processing-message {\r\ncolor: #4299e1;\r\npadding: 12px;\r\nbackground-color: #ebf8ff;\r\nborder: 1px solid #bee3f8;\r\nborder-radius: 6px;\r\nmargin-top: 12px;\r\n}\r\n\r\n.modal-actions {\r\ndisplay: flex;\r\njustify-content: flex-end;\r\ngap: 12px;\r\nmargin-top: 24px;\r\n}\r\n\r\n.cancel-btn {\r\npadding: 10px 16px;\r\nbackground-color: #f7fafc;\r\nborder: 1px solid #e2e8f0;\r\nborder-radius: 8px;\r\ncolor: #4a5568;\r\nfont-weight: 500;\r\ncursor: pointer;\r\ntransition: all 0.2s ease;\r\n}\r\n\r\n.cancel-btn:hover {\r\nborder-color: #a0aec0;\r\nbackground-color: #edf2f7;\r\n}\r\n\r\n.confirm-btn {\r\npadding: 10px 16px;\r\nbackground-color: #4299e1;\r\nborder: 1px solid #3182ce;\r\nborder-radius: 8px;\r\ncolor: white;\r\nfont-weight: 500;\r\ncursor: pointer;\r\ntransition: all 0.2s ease;\r\n}\r\n\r\n.confirm-btn:hover {\r\nbackground-color: #3182ce;\r\n}\r\n\r\n.confirm-btn:disabled {\r\nbackground-color: #a0aec0;\r\nborder-color: #a0aec0;\r\ncursor: not-allowed;\r\n}\r\n\r\n.commander-selection-modal {\r\nposition: fixed;\r\ntop: 50%;\r\nleft: 50%;\r\ntransform: translate(-50%, -50%);\r\nbackground: white;\r\nborder-radius: 10px;\r\npadding: 24px;\r\nwidth: 90%;\r\nmax-width: 800px;\r\nmax-height: 90vh;\r\noverflow-y: auto;\r\nbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\nz-index: 1001;\r\n}\r\n\r\n.commander-options-container {\r\ndisplay: flex;\r\ngap: 20px;\r\nmargin: 16px 0;\r\n}\r\n\r\n.commander-options {\r\nwidth: 250px; /* Fixed width to prevent resizing */\r\nmax-height: 60vh;\r\noverflow-y: auto;\r\nborder: 1px solid #e2e8f0;\r\nborder-radius: 8px;\r\n}\r\n\r\n.commander-option {\r\npadding: 12px;\r\ncursor: pointer;\r\nborder-bottom: 1px solid #e2e8f0;\r\ntransition: background-color 0.2s;\r\n}\r\n\r\n.commander-option:hover {\r\nbackground-color: #ebf8ff;\r\n}\r\n\r\n.commander-option.selected {\r\nbackground-color: #bee3f8;\r\nfont-weight: 500;\r\n}\r\n\r\n.commander-option:last-child {\r\nborder-bottom: none;\r\n}\r\n\r\n.card-preview {\r\nflex: 1;\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: flex-start;\r\nmin-height: 300px;\r\n}\r\n\r\n.card-preview img {\r\nmax-width: 100%;\r\nmax-height: 400px;\r\nborder-radius: 8px;\r\nbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.no-image {\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\nheight: 300px;\r\nwidth: 100%;\r\nbackground-color: #f7fafc;\r\nborder-radius: 8px;\r\ncolor: #718096;\r\n}\r\n</style>","import { render } from \"./ImportPopup.vue?vue&type=template&id=34627c5c&scoped=true\"\nimport script from \"./ImportPopup.vue?vue&type=script&lang=js\"\nexport * from \"./ImportPopup.vue?vue&type=script&lang=js\"\n\nimport \"./ImportPopup.vue?vue&type=style&index=0&id=34627c5c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-34627c5c\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"modal-overlay\" v-if=\"isOpen\" @click.self=\"close\">\r\n      <div class=\"modal-content export-modal\">\r\n        <h2 class=\"modal-title\">Export Deck</h2>\r\n        \r\n        <div class=\"deck-info\">\r\n          <h3>{{ deck?.name || 'Untitled Deck' }}</h3>\r\n          <div class=\"deck-meta\">\r\n            <div class=\"deck-colors\" v-html=\"formatColors(deck?.colors || [])\"></div>\r\n            <span class=\"card-count\">{{ totalCards }}/100 cards</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"export-format\">\r\n          <h4>Export Format:</h4>\r\n          <div class=\"format-preview\">\r\n            <pre>{{ formattedDecklist }}</pre>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"modal-actions\">\r\n          <button class=\"cancel-btn\" @click=\"close\">Cancel</button>\r\n          <button class=\"export-btn\" @click=\"exportDecklist\" :disabled=\"!deck?.cards?.length\">\r\n            Export Decklist\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  <script>\r\n  export default {\r\n    name: 'ExportPopup',\r\n    props: {\r\n      isOpen: Boolean,\r\n      deck: {\r\n        type: Object,\r\n        default: () => ({\r\n          name: '',\r\n          colors: [],\r\n          cards: [],\r\n          commander: null\r\n        })\r\n      }\r\n    },\r\n    computed: {\r\n      totalCards() {\r\n        if (!this.deck?.cards) return 0;\r\n        return this.deck.cards.reduce((total, card) => total + (card.count || 1), 0);\r\n      },\r\n      formattedDecklist() {\r\n        if (!this.deck?.cards) return '';\r\n        \r\n        const cardGroups = {};\r\n        this.deck.cards.forEach(card => {\r\n          const key = `${card.name} (${card.set?.toUpperCase() || 'Unknown'})`;\r\n          cardGroups[key] = (cardGroups[key] || 0) + (card.count || 1);\r\n        });\r\n        \r\n        const sortedCards = Object.keys(cardGroups)\r\n          .sort((a, b) => a.localeCompare(b))\r\n          .map(name => `${cardGroups[name]}x ${name}`);\r\n        \r\n        let decklist = [];\r\n        if (this.deck.commander) {\r\n          decklist.push(`Commander: 1x ${this.deck.commander.name} (${this.deck.commander.set?.toUpperCase() || 'Unknown'})`);\r\n          decklist.push('');\r\n        }\r\n        \r\n        decklist = decklist.concat(sortedCards);\r\n        return decklist.join('\\n');\r\n      }\r\n    },\r\n    methods: {\r\n      close() {\r\n        this.$emit('close');\r\n      },\r\n      formatColors(colors) {\r\n        if (!colors || colors.length === 0) return '';\r\n        return colors\r\n          .map(color => `<span class=\"mana small s${color.toLowerCase()}\"></span>`)\r\n          .join(' ');\r\n      },\r\n      exportDecklist() {\r\n        const blob = new Blob([this.formattedDecklist], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        \r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `${this.deck.name.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_decklist.txt`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        \r\n        setTimeout(() => {\r\n          document.body.removeChild(a);\r\n          URL.revokeObjectURL(url);\r\n        }, 100);\r\n        \r\n        this.close();\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .export-modal {\r\n    max-width: 500px;\r\n    background: white; \r\n    border-radius: 10px;\r\n    padding: 24px;\r\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n  }\r\n  \r\n  .modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 1000;\r\n    backdrop-filter: blur(3px);\r\n  }\r\n  \r\n  .modal-title {\r\n    margin-top: 0;\r\n    margin-bottom: 20px;\r\n    font-size: 1.5rem;\r\n    color: #4299e1;\r\n    border-bottom: 2px solid #4299e1;\r\n    padding-bottom: 10px;\r\n  }\r\n  \r\n  .deck-info {\r\n    margin-bottom: 20px;\r\n    padding-bottom: 15px;\r\n    border-bottom: 1px solid #e2e8f0;\r\n  }\r\n  \r\n  .deck-info h3 {\r\n    margin: 0 0 10px 0;\r\n    font-size: 1.3rem;\r\n    color: #2d3748; \r\n  }\r\n  \r\n  .deck-meta {\r\n    display: grid;\r\n    align-items: center;\r\n    gap: 12px;\r\n    margin: auto;\r\n  }\r\n  \r\n  .card-count {\r\n    font-size: 0.9rem;\r\n    color: #4a5568;\r\n  }\r\n  \r\n  .export-format {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .export-format h4 {\r\n    margin: 0 0 10px 0;\r\n    font-size: 1rem;\r\n    color: #4a5568;\r\n  }\r\n  \r\n  .format-preview {\r\n    background: #f7fafc;\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 6px;\r\n    padding: 12px;\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n  }\r\n  \r\n  .format-preview pre {\r\n    margin: 0;\r\n    white-space: pre-wrap;\r\n    font-family: 'Courier New', monospace;\r\n    font-size: 0.9rem;\r\n    line-height: 1.4;\r\n    color: #2d3748;\r\n  }\r\n  \r\n  .modal-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 12px;\r\n    margin-top: 24px;\r\n  }\r\n  \r\n  .cancel-btn {\r\n    padding: 10px 16px;\r\n    background-color: #f7fafc;\r\n    border: 1px solid #e2e8f0;\r\n    color: #4a5568;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n  }\r\n  \r\n  .cancel-btn:hover {\r\n    border-color: #a0aec0;\r\n    background-color: #edf2f7;\r\n  }\r\n  \r\n  .export-btn {\r\n    padding: 10px 16px;\r\n    background-color: #38a169;\r\n    border: 1px solid #38a169;\r\n    color: white;\r\n    border-radius: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.2s ease;\r\n  }\r\n  \r\n  .export-btn:hover:not(:disabled) {\r\n    background-color: #2f855a;\r\n    border-color: #2f855a;\r\n  }\r\n  \r\n  .export-btn:disabled {\r\n    opacity: 0.6;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  /* Scrollbar styling */\r\n  .format-preview::-webkit-scrollbar {\r\n    width: 6px;\r\n  }\r\n  \r\n  .format-preview::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n  }\r\n  \r\n  .format-preview::-webkit-scrollbar-thumb {\r\n    background: #cbd5e0;\r\n    border-radius: 3px;\r\n  }\r\n  \r\n  .format-preview::-webkit-scrollbar-thumb:hover {\r\n    background: #a0aec0;\r\n  }\r\n  </style>\r\n","import { render } from \"./ExportPopup.vue?vue&type=template&id=76e13334&scoped=true\"\nimport script from \"./ExportPopup.vue?vue&type=script&lang=js\"\nexport * from \"./ExportPopup.vue?vue&type=script&lang=js\"\n\nimport \"./ExportPopup.vue?vue&type=style&index=0&id=76e13334&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-76e13334\"]])\n\nexport default __exports__","<template>\r\n    <div v-if=\"isOpen\" class=\"stats-modal-overlay\" @click.self=\"close\">\r\n      <div class=\"stats-modal-content\">\r\n        <button class=\"close-btn\" @click=\"close\"></button>\r\n        <h2 class=\"stats-modal-title\">Deck Statistics</h2>\r\n        \r\n        <!-- Basic Info Section -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Basic Info</h3>\r\n          <div class=\"basic-info-grid\">\r\n            <div class=\"info-item\">\r\n              <span class=\"info-label\">Deck Name:</span>\r\n              <span class=\"info-value\">{{ deck?.name || 'Untitled Deck' }}</span>\r\n            </div>\r\n            <div class=\"info-item commander-item\" v-if=\"deck?.commander\">\r\n              <span class=\"info-label\">Commander:</span>\r\n              <div class=\"commander-preview\" @click=\"viewCard(deck.commander)\">\r\n                <img :src=\"commanderImage\" :alt=\"deck.commander.name\">\r\n                <span>{{ deck.commander.name }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n  \r\n        <!-- Mana Curve Section -->\r\n        <section class=\"stats-section\">\r\n            <h3 class=\"section-title\"> Mana Curve & Speed</h3>\r\n            <div class=\"chart-container\" style=\"height: 150px\">  <!-- Reduced height -->\r\n                <bar-chart \r\n                :data=\"manaCurveChartData\"\r\n                :options=\"manaCurveOptions\"\r\n                />\r\n            </div>\r\n            <div class=\"curve-metrics\">\r\n                <div class=\"metric\">\r\n                <div class=\"metric-value\">{{ avgManaValue.toFixed(1) }}</div>\r\n                <div class=\"metric-label\">Avg Mana Value</div>\r\n                </div>\r\n                <div class=\"metric\">\r\n                <div class=\"metric-value\">{{ lowCostCards }}</div>\r\n                <div class=\"metric-label\">Cards  2 MV</div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n  \r\n        <!-- Card Type Composition -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Card Type Composition</h3>\r\n          <div class=\"chart-container\">\r\n            <pie-chart \r\n              :data=\"cardTypeChartData\"\r\n              :options=\"pieChartOptions\"\r\n              :height=\"250\"\r\n            />\r\n          </div>\r\n        </section>\r\n  \r\n        <!-- Mana Base Section -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Mana Base</h3>\r\n          <div class=\"mana-base-grid\">\r\n            <div class=\"land-count\">\r\n              <div class=\"metric-value\">{{ landCount }}</div>\r\n              <div class=\"metric-label\">Total Lands</div>\r\n              <div class=\"land-breakdown\">\r\n                <div class=\"basic-lands\">\r\n                  <span class=\"land-type\">Basic:</span>\r\n                  <span class=\"land-count-value\">{{ basicLandCount }}</span>\r\n                </div>\r\n                <div class=\"nonbasic-lands\">\r\n                  <span class=\"land-type\">Nonbasic:</span>\r\n                  <span class=\"land-count-value\">{{ nonbasicLandCount }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"color-pips\">\r\n              <div class=\"color-pip\" v-for=\"color in landColors\" :key=\"color.identity\">\r\n                <span class=\"mana\" :class=\"`s${color.identity.toLowerCase()}`\"></span>\r\n                <span class=\"color-count\">{{ color.count }}</span>\r\n                <span class=\"color-name\">{{ getColorName(color.identity) }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n  \r\n        <!-- Color Identity Section -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Color Identity</h3>\r\n          <div class=\"chart-container\">\r\n            <pie-chart \r\n              :data=\"colorIdentityChartData\"\r\n              :options=\"pieChartOptions\"\r\n              :height=\"250\"\r\n            />\r\n          </div>\r\n        </section>\r\n  \r\n        <!-- Cost & Value Section -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Cost & Value</h3>\r\n          <div class=\"cost-grid\">\r\n            <div class=\"cost-metric\">\r\n              <div class=\"metric-value\">${{ totalDeckPrice.toFixed(2) }}</div>\r\n              <div class=\"metric-label\">Total Deck Price</div>\r\n            </div>\r\n            <div class=\"cost-metric\">\r\n              <div class=\"metric-value\">${{ avgCardPrice.toFixed(2) }}</div>\r\n              <div class=\"metric-label\">Avg Card Price</div>\r\n            </div>\r\n            <div class=\"most-expensive\">\r\n              <div class=\"metric-label\">Most Expensive:</div>\r\n              <div class=\"expensive-card\" @click=\"viewCard(mostExpensiveCard)\">\r\n                {{ mostExpensiveCard.name }} <span class=\"card-price\">(${{ mostExpensiveCardPrice.toFixed(2) }})</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"chart-container\">\r\n              <bar-chart \r\n                :data=\"budgetChartData\"\r\n                :options=\"budgetChartOptions\"\r\n                :height=\"100\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </section>\r\n  \r\n        <!-- Thematic Content -->\r\n        <section class=\"stats-section\">\r\n          <h3 class=\"section-title\"> Thematic Content</h3>\r\n          <div class=\"thematic-grid\">\r\n            <div class=\"chart-container\">\r\n              <pie-chart \r\n                :data=\"creatureTypeChartData\"\r\n                :options=\"pieChartOptions\"\r\n                :height=\"250\"\r\n              />\r\n            </div>\r\n            <div class=\"chart-container\">\r\n              <bar-chart \r\n                :data=\"keywordChartData\"\r\n                :options=\"keywordChartOptions\"\r\n                :height=\"250\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { \r\n    Chart as ChartJS, \r\n    Title, \r\n    Tooltip, \r\n    Legend, \r\n    BarElement, \r\n    CategoryScale, \r\n    LinearScale, \r\n    ArcElement \r\n  } from 'chart.js'\r\n  import { Bar, Pie } from 'vue-chartjs'\r\n  \r\n  ChartJS.register(\r\n    Title, \r\n    Tooltip, \r\n    Legend, \r\n    BarElement, \r\n    CategoryScale, \r\n    LinearScale, \r\n    ArcElement\r\n  )\r\n  \r\n  export default {\r\n    name: 'StatsPopup',\r\n    components: {\r\n      BarChart: Bar,\r\n      PieChart: Pie\r\n    },\r\n    props: {\r\n      isOpen: Boolean,\r\n      deck: {\r\n        type: Object,\r\n        default: null\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        typeColors: {\r\n          'Creature': '#6EE7B7',\r\n          'Instant': '#93C5FD',\r\n          'Sorcery': '#818CF8',\r\n          'Artifact': '#A5B4FC',\r\n          'Enchantment': '#C4B5FD',\r\n          'Planeswalker': '#F9A8D4',\r\n          'Land': '#FCD34D',\r\n          'Other': '#D1D5DB'\r\n        },\r\n        colorPalette: [\r\n          '#4E79A7', '#F28E2B', '#E15759', '#76B7B2', '#59A14F',\r\n          '#EDC948', '#B07AA1', '#FF9DA7', '#9C755F', '#BAB0AC'\r\n        ],\r\n        pieChartOptions: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              position: 'right',\r\n            },\r\n            tooltip: {\r\n              callbacks: {\r\n                label: (context) => {\r\n                  const label = context.label || ''\r\n                  const value = context.raw || 0\r\n                  const total = context.dataset.data.reduce((a, b) => a + b, 0)\r\n                  const percentage = Math.round((value / total) * 100)\r\n                  return `${label}: ${value} (${percentage}%)`\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        manaCurveOptions: {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            scales: {\r\n                y: {\r\n                beginAtZero: true,\r\n                ticks: {\r\n                    stepSize: 1,\r\n                    precision: 0\r\n                },\r\n                grid: {\r\n                    display: false\r\n                }\r\n                },\r\n                x: {\r\n                grid: {\r\n                    display: false\r\n                }\r\n                }\r\n            },\r\n            plugins: {\r\n                legend: {\r\n                display: false\r\n                }\r\n            },\r\n            barPercentage: 0.6,\r\n            categoryPercentage: 0.7\r\n            },\r\n        keywordChartOptions: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: false\r\n            }\r\n          },\r\n          indexAxis: 'y',\r\n          scales: {\r\n            x: {\r\n              beginAtZero: true,\r\n              ticks: {\r\n                precision: 0,\r\n                stepSize: 1\r\n              }\r\n            }\r\n          }\r\n        },\r\n        budgetChartOptions: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          plugins: {\r\n            legend: {\r\n              display: false\r\n            }\r\n          },\r\n          scales: {\r\n            y: {\r\n              display: false\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      commanderImage() {\r\n        if (!this.deck?.commander) return ''\r\n        return this.deck.commander.image_uris?.small || \r\n               this.deck.commander.card_faces?.[0]?.image_uris?.small || ''\r\n      },\r\n      totalCards() {\r\n        if (!this.deck?.cards) return 0\r\n        return this.deck.cards.reduce((total, card) => total + (card.count || 1), 0)\r\n      },\r\n      avgManaValue() {\r\n        if (!this.deck?.cards) return 0\r\n        let totalMV = 0\r\n        let totalCards = 0\r\n        \r\n        this.deck.cards.forEach(card => {\r\n            // Skip lands\r\n            if ((card.type_line || '').includes('Land')) return\r\n            \r\n            const count = card.count || 1\r\n            totalMV += (card.cmc || 0) * count\r\n            totalCards += count\r\n        })\r\n        \r\n        return totalCards > 0 ? totalMV / totalCards : 0\r\n      },                \r\n\r\n      lowCostCards() {\r\n  if (!this.deck?.cards) return 0\r\n  \r\n    const curve = this.manaCurveChartData.datasets[0].data\r\n    const labels = this.manaCurveChartData.labels\r\n    \r\n    const zeroIndex = labels.indexOf('0')\r\n    const oneIndex = labels.indexOf('1')\r\n    const twoIndex = labels.indexOf('2')\r\n    \r\n    return (zeroIndex >= 0 ? curve[zeroIndex] : 0) + \r\n            (oneIndex >= 0 ? curve[oneIndex] : 0) + \r\n            (twoIndex >= 0 ? curve[twoIndex] : 0)\r\n},\r\n    manaCurveChartData() {\r\n  const curve = { '0': 0, '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7+': 0 }\r\n  \r\n  if (this.deck?.cards) {\r\n    this.deck.cards.forEach(card => {\r\n      const cmc = card.cmc || 0\r\n      const count = card.count || 1\r\n      \r\n      // Skip lands\r\n      if ((card.type_line || '').includes('Land')) {\r\n        return\r\n      }\r\n      \r\n      if (cmc <= 6) {\r\n        curve[cmc.toString()] += count\r\n      } else {\r\n        curve['7+'] += count\r\n      }\r\n    })\r\n  }\r\n  \r\n  return {\r\n    labels: Object.keys(curve),\r\n    datasets: [{\r\n      label: 'Cards',\r\n      backgroundColor: '#4299e1',\r\n      data: Object.values(curve)\r\n    }]\r\n  }\r\n},\r\n      cardTypeChartData() {\r\n        const types = {\r\n          'Creature': 0,\r\n          'Instant': 0,\r\n          'Sorcery': 0,\r\n          'Artifact': 0,\r\n          'Enchantment': 0,\r\n          'Planeswalker': 0,\r\n          'Land': 0,\r\n          'Other': 0\r\n        }\r\n        \r\n        if (this.deck?.cards) {\r\n          this.deck.cards.forEach(card => {\r\n            const count = card.count || 1\r\n            const typeLine = card.type_line || ''\r\n            \r\n            if (typeLine.includes('Creature')) types['Creature'] += count\r\n            else if (typeLine.includes('Instant')) types['Instant'] += count\r\n            else if (typeLine.includes('Sorcery')) types['Sorcery'] += count\r\n            else if (typeLine.includes('Artifact')) types['Artifact'] += count\r\n            else if (typeLine.includes('Enchantment')) types['Enchantment'] += count\r\n            else if (typeLine.includes('Planeswalker')) types['Planeswalker'] += count\r\n            else if (typeLine.includes('Land')) types['Land'] += count\r\n            else types['Other'] += count\r\n          })\r\n        }\r\n        \r\n        const filteredTypes = Object.entries(types)\r\n          .filter(([, count]) => count > 0)\r\n          .map(([name, count]) => ({ name, count }))\r\n        \r\n        return {\r\n          labels: filteredTypes.map(t => t.name),\r\n          datasets: [{\r\n            backgroundColor: filteredTypes.map(t => this.typeColors[t.name] || '#D1D5DB'),\r\n            data: filteredTypes.map(t => t.count)\r\n          }]\r\n        }\r\n      },\r\n      landCount() {\r\n        if (!this.deck?.cards) return 0\r\n        return this.deck.cards.reduce((total, card) => {\r\n          const isLand = (card.type_line || '').includes('Land')\r\n          return total + (isLand ? (card.count || 1) : 0)\r\n        }, 0)\r\n      },\r\n      basicLandCount() {\r\n        if (!this.deck?.cards) return 0\r\n        return this.deck.cards.reduce((total, card) => {\r\n          const isBasicLand = (card.type_line || '').includes('Basic Land')\r\n          return total + (isBasicLand ? (card.count || 1) : 0)\r\n        }, 0)\r\n      },\r\n      nonbasicLandCount() {\r\n        return this.landCount - this.basicLandCount\r\n      },\r\n      landColors() {\r\n        if (!this.deck?.cards || !this.deck?.colors) return []\r\n        \r\n        const colors = {}\r\n        \r\n        this.deck.colors.forEach(color => {\r\n          colors[color] = { identity: color, count: 0 }\r\n        })\r\n        \r\n        this.deck.cards.forEach(card => {\r\n          if ((card.type_line || '').includes('Land')) {\r\n            const count = card.count || 1\r\n            const produces = this.getLandColors(card)\r\n            \r\n            produces.forEach(color => {\r\n              if (colors[color]) {\r\n                colors[color].count += count\r\n              }\r\n            })\r\n          }\r\n        })\r\n        \r\n        return Object.values(colors).sort((a, b) => b.count - a.count)\r\n      },\r\n      colorIdentityChartData() {\r\n        if (!this.deck?.colors) return { labels: [], datasets: [] }\r\n        \r\n        const colorCounts = {}\r\n        \r\n        this.deck.colors.forEach(color => {\r\n          colorCounts[color] = 0;\r\n        });\r\n        \r\n        if (this.deck.cards) {\r\n          this.deck.cards.forEach(card => {\r\n            const count = card.count || 1;\r\n            const colors = card.color_identity || [];\r\n            \r\n            colors.forEach(color => {\r\n              if (colorCounts[color] !== undefined) {\r\n                colorCounts[color] += count;\r\n              }\r\n            });\r\n          });\r\n        }\r\n        \r\n        const filteredColors = Object.entries(colorCounts)\r\n          .filter(([, count]) => count > 0)\r\n          .map(([color, count]) => ({\r\n            color,\r\n            count,\r\n            name: this.getColorName(color)\r\n          }));\r\n        \r\n        return {\r\n          labels: filteredColors.map(c => c.name),\r\n          datasets: [{\r\n            backgroundColor: filteredColors.map(c => this.getColorHex(c.color)),\r\n            data: filteredColors.map(c => c.count)\r\n          }]\r\n        };\r\n      },\r\n      creatureTypeChartData() {\r\n        const types = {}\r\n        \r\n        if (this.deck?.cards) {\r\n          this.deck.cards.forEach(card => {\r\n            if ((card.type_line || '').includes('Creature')) {\r\n              const typeParts = (card.type_line || '').split('')\r\n              const creatureTypesPart = typeParts.length > 1 ? typeParts[1] : ''\r\n              const creatureTypes = creatureTypesPart.trim().split(/[\\s/]+/)\r\n                .filter(type => type && type !== '//' && !type.match(/^[^a-zA-Z]/))\r\n              \r\n              const count = card.count || 1\r\n              \r\n              creatureTypes.forEach(type => {\r\n                types[type] = (types[type] || 0) + count\r\n              })\r\n            }\r\n          })\r\n        }\r\n        \r\n        const topTypes = Object.entries(types)\r\n          .map(([name, count]) => ({ name, count }))\r\n          .sort((a, b) => b.count - a.count)\r\n          .slice(0, 8)\r\n        \r\n        return {\r\n          labels: topTypes.map(t => t.name),\r\n          datasets: [{\r\n            backgroundColor: topTypes.map((_, i) => this.getColorForIndex(i)),\r\n            data: topTypes.map(t => t.count)\r\n          }]\r\n        }\r\n      },\r\n      keywordChartData() {\r\n        const keywords = {}\r\n        const keywordList = [\r\n          'Flying', 'Trample', 'Haste', 'Vigilance', 'Deathtouch', 'Lifelink',\r\n          'Menace', 'Hexproof', 'Indestructible', 'First strike', 'Double strike',\r\n          'Flash', 'Reach', 'Defender', 'Ward'\r\n        ]\r\n        \r\n        if (this.deck?.cards) {\r\n          this.deck.cards.forEach(card => {\r\n            const oracleText = (card.oracle_text || '').toLowerCase()\r\n            const count = card.count || 1\r\n            const typeLine = (card.type_line || '').toLowerCase()\r\n            \r\n            const isCreature = typeLine.includes('creature')\r\n            const isInstant = typeLine.includes('instant')\r\n            const isSorcery = typeLine.includes('sorcery')\r\n            \r\n            keywordList.forEach(keyword => {\r\n              const keywordLower = keyword.toLowerCase()\r\n              if (oracleText.includes(keywordLower)) {\r\n                if (\r\n                  (keywordLower === 'flying' && !isCreature && !oracleText.includes('enchant creature')) ||\r\n                  (['trample', 'haste', 'vigilance', 'deathtouch', 'lifelink', 'menace', \r\n                    'first strike', 'double strike', 'reach'].includes(keywordLower) && !isCreature) ||\r\n                  (keywordLower === 'flash' && !isInstant && !isSorcery && !isCreature)\r\n                ) {\r\n                  return\r\n                }\r\n                \r\n                keywords[keyword] = (keywords[keyword] || 0) + count\r\n              }\r\n            })\r\n          })\r\n        }\r\n        \r\n        const topKeywords = Object.entries(keywords)\r\n          .map(([name, count]) => ({ name, count }))\r\n          .sort((a, b) => b.count - a.count)\r\n          .slice(0, 8)\r\n        \r\n        return {\r\n          labels: topKeywords.map(k => k.name),\r\n          datasets: [{\r\n            backgroundColor: '#9F7AEA',\r\n            data: topKeywords.map(k => k.count)\r\n          }]\r\n        }\r\n      },\r\n      totalDeckPrice() {\r\n        if (!this.deck?.cards) return 0\r\n        return this.deck.cards.reduce((total, card) => {\r\n          const price = parseFloat(card.prices?.usd || '0') || 0\r\n          return total + (price * (card.count || 1))\r\n        }, 0)\r\n      },\r\n      avgCardPrice() {\r\n        if (this.totalCards === 0) return 0\r\n        return this.totalDeckPrice / this.totalCards\r\n      },\r\n      mostExpensiveCard() {\r\n        if (!this.deck?.cards) return { name: 'N/A' }\r\n        \r\n        let maxPrice = 0\r\n        let expensiveCard = null\r\n        \r\n        this.deck.cards.forEach(card => {\r\n          const price = parseFloat(card.prices?.usd || '0') || 0\r\n          if (price > maxPrice) {\r\n            maxPrice = price\r\n            expensiveCard = card\r\n          }\r\n        })\r\n        \r\n        return expensiveCard || { name: 'N/A' }\r\n      },\r\n      mostExpensiveCardPrice() {\r\n        return parseFloat(this.mostExpensiveCard.prices?.usd || '0') || 0\r\n      },\r\n      budgetChartData() {\r\n        if (!this.deck?.cards) return {\r\n          labels: [],\r\n          datasets: []\r\n        }\r\n        \r\n        let under1 = 0\r\n        let oneToFive = 0\r\n        let overFive = 0\r\n        \r\n        this.deck.cards.forEach(card => {\r\n          const price = parseFloat(card.prices?.usd || '0') || 0\r\n          const count = card.count || 1\r\n          \r\n          if (price < 1) under1 += count\r\n          else if (price <= 5) oneToFive += count\r\n          else overFive += count\r\n        })\r\n        \r\n        return {\r\n          labels: ['Under $1', '$1-$5', 'Over $5'],\r\n          datasets: [{\r\n            backgroundColor: ['#48BB78', '#4299E1', '#9F7AEA'],\r\n            data: [under1, oneToFive, overFive]\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      close() {\r\n        this.$emit('close')\r\n      },\r\n      viewCard(card) {\r\n        this.$emit('view-card', card)\r\n      },\r\n      getLandColors(card) {\r\n        return card.color_identity || []\r\n      },\r\n      getColorName(color) {\r\n        const names = {\r\n          'W': 'White',\r\n          'U': 'Blue',\r\n          'B': 'Black',\r\n          'R': 'Red',\r\n          'G': 'Green'\r\n        }\r\n        return names[color] || color\r\n      },\r\n      getColorHex(color) {\r\n        const colors = {\r\n          'W': '#F8F8F7',\r\n          'U': '#0E68AB',\r\n          'B': '#150B00',\r\n          'R': '#D3202A',\r\n          'G': '#00733E'\r\n        }\r\n        return colors[color] || '#CCCCCC'\r\n      },\r\n      getColorForIndex(index) {\r\n        return this.colorPalette[index % this.colorPalette.length]\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n<style scoped>\r\n\r\n.chart-container {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.cost-grid .chart-container {\r\n    grid-column: span 2;\r\n}\r\n\r\n.thematic-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n}\r\n/* Base Modal Styles */\r\n.stats-modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(3px);\r\n}\r\n\r\n.stats-modal-content {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 30px;\r\n  width: 900px;\r\n  max-width: 90%;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n  position: relative;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.8rem;\r\n  cursor: pointer;\r\n  color: #718096;\r\n  transition: color 0.2s;\r\n  padding: 5px 10px;\r\n}\r\n\r\n.close-btn:hover {\r\n  color: #e53e3e;\r\n}\r\n\r\n/* Section Structure */\r\n.stats-section {\r\n  margin-bottom: 30px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.stats-section:last-child {\r\n  border-bottom: none;\r\n  margin-bottom: 0;\r\n  padding-bottom: 0;\r\n}\r\n\r\n.section-title {\r\n  font-size: 1.3rem;\r\n  margin-bottom: 15px;\r\n  color: #2d3748;\r\n}\r\n\r\n.subtitle {\r\n  font-size: 1.1rem;\r\n  margin-bottom: 10px;\r\n  color: #4a5568;\r\n}\r\n\r\n/* Basic Info Section */\r\n.basic-info-grid {\r\n  display: inline-flex;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 30px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.info-label {\r\n  font-weight: 600;\r\n  margin-right: 8px;\r\n  color: #4a5568;\r\n}\r\n\r\n.info-value {\r\n  color: #2d3748;\r\n}\r\n\r\n.commander-item {\r\n  grid-column: span 2;\r\n}\r\n\r\n.commander-preview {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n  padding: 5px;\r\n  border-radius: 6px;\r\n}\r\n\r\n.commander-preview:hover {\r\n  transform: translateY(-2px);\r\n  background: #f7fafc;\r\n}\r\n\r\n.commander-preview img {\r\n  width: 50px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* Mana Curve Section */\r\n.curve-grid {\r\n  display: grid;\r\n  grid-template-columns: 150px 1fr 120px;\r\n  gap: 20px;\r\n  align-items: center;\r\n}\r\n\r\n.curve-metrics {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin-top: 10px;\r\n  gap: 10px;\r\n}\r\n\r\n\r\n.curve-metric:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.metric {\r\n  text-align: center;\r\n  padding: 8px 12px;\r\n  background: #f7fafc;\r\n  border-radius: 6px;\r\n  border: 1px solid #e2e8f0;\r\n  min-width: 100px;\r\n}\r\n\r\n.metric-value {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #2d3748;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.metric-label {\r\n  font-size: 0.8rem;\r\n  color: #4a5568;\r\n}\r\n\r\n.metric-subtext {\r\n  font-size: 0.8rem;\r\n  color: #718096;\r\n}\r\n\r\n.gauge {\r\n  height: 8px;\r\n  background: #e2e8f0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.gauge-fill {\r\n  height: 100%;\r\n  background: #4299e1;\r\n  transition: width 0.5s ease;\r\n}\r\n\r\n.curve-chart {\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.chart-title {\r\n  text-align: center;\r\n  font-weight: 600;\r\n  color: #4a5568;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.chart-bars {\r\n  display: flex;\r\n  height: 150px;\r\n  align-items: flex-end;\r\n  justify-content: space-around;\r\n  padding-top: 20px;\r\n}\r\n\r\n.bar-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  flex: 1;\r\n  max-width: 40px;\r\n}\r\n\r\n.bar {\r\n  width: 25px;\r\n  background: #4299e1;\r\n  border-radius: 4px 4px 0 0;\r\n  transition: height 0.5s ease, background-color 0.2s;\r\n  position: relative;\r\n}\r\n\r\n.bar:hover {\r\n  background: #3182ce;\r\n}\r\n\r\n.bar-count {\r\n  position: absolute;\r\n  top: -25px;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-size: 0.8rem;\r\n  color: #4a5568;\r\n}\r\n\r\n.bar-label {\r\n  margin-top: 5px;\r\n  font-size: 0.8rem;\r\n  color: #718096;\r\n}\r\n\r\n/* Card Type Composition */\r\n.type-chart-container {\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.type-chart {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.type-bar-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.type-label {\r\n  width: 120px;\r\n  font-weight: 500;\r\n  font-size: 0.9rem;\r\n  color: #4a5568;\r\n}\r\n\r\n.type-bar {\r\n  flex: 1;\r\n  height: 25px;\r\n  background: #e2e8f0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.type-bar-fill {\r\n  height: 100%;\r\n  transition: width 0.5s ease, transform 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  padding-right: 5px;\r\n}\r\n\r\n.type-bar-fill:hover {\r\n  transform: scaleY(1.1);\r\n  transform-origin: bottom;\r\n}\r\n\r\n.type-count {\r\n  color: white;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  text-shadow: 0 1px 2px rgba(0,0,0,0.3);\r\n}\r\n\r\n/* Mana Base Section */\r\n.mana-base-grid {\r\n  display: grid;\r\n  grid-template-columns: 200px 1fr;\r\n  gap: 20px;\r\n  align-items: center;\r\n}\r\n\r\n.land-count {\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n  text-align: center;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.land-count:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.land-breakdown {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin-top: 10px;\r\n}\r\n\r\n.land-type {\r\n  font-weight: 500;\r\n  color: #4a5568;\r\n}\r\n\r\n.land-count-value {\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n  margin-left: 5px;\r\n}\r\n\r\n.color-pips {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.color-pip {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: white;\r\n  border-radius: 20px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.color-pip:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.color-count {\r\n  font-weight: 600;\r\n  color: #2d3748;\r\n}\r\n\r\n.color-name {\r\n  font-size: 0.9rem;\r\n  color: #4a5568;\r\n}\r\n\r\n/* Color Identity Section */\r\n.color-identity {\r\n  display: flex;\r\n  gap: 30px;\r\n  align-items: center;\r\n}\r\n\r\n.color-pie-container {\r\n  width: 200px;\r\n  height: 200px;\r\n  position: relative;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.color-pie {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.pie-hover-info {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: rgba(255, 255, 255, 0.9);\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  font-weight: 600;\r\n  font-size: 0.9rem;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  pointer-events: none;\r\n}\r\n\r\n.color-legend {\r\n  flex: 1;\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 6px 10px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.legend-item:hover {\r\n  background-color: #f7fafc;\r\n}\r\n\r\n.legend-color {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 4px;\r\n  display: inline-block;\r\n}\r\n\r\n/* Cost & Value Section */\r\n.cost-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 15px;\r\n}\r\n\r\n.cost-metric {\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n  text-align: center;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.cost-metric:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.most-expensive {\r\n  padding: 15px;\r\n  background: #f7fafc;\r\n  border-radius: 8px;\r\n  border: 1px solid #e2e8f0;\r\n  grid-column: span 2;\r\n}\r\n\r\n.expensive-card {\r\n  cursor: pointer;\r\n  color: #4299e1;\r\n  text-decoration: underline;\r\n  margin-top: 5px;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.expensive-card:hover {\r\n  color: #3182ce;\r\n}\r\n\r\n.card-price {\r\n  color: #2d3748;\r\n  font-weight: 600;\r\n}\r\n\r\n.budget-chart {\r\n  height: 30px;\r\n  display: flex;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  grid-column: span 2;\r\n}\r\n\r\n.budget-bar {\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.budget-bar:hover {\r\n  transform: scaleY(1.1);\r\n  transform-origin: bottom;\r\n}\r\n\r\n.budget-under1 {\r\n  background: #48BB78;\r\n}\r\n\r\n.budget-1to5 {\r\n  background: #4299E1;\r\n}\r\n\r\n.budget-over5 {\r\n  background: #9F7AEA;\r\n}\r\n\r\n/* Thematic Content Section */\r\n.thematic-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 20px;\r\n}\r\n\r\n.creature-pie-container {\r\n  display: flex;\r\n  gap: 20px;\r\n  align-items: center;\r\n}\r\n\r\n.creature-pie {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  flex-shrink: 0;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.creature-legend {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.keyword-chart {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.keyword-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.keyword-name {\r\n  width: 120px;\r\n  font-weight: 500;\r\n  color: #4a5568;\r\n}\r\n\r\n.keyword-bar {\r\n  flex: 1;\r\n  height: 20px;\r\n  background: #e2e8f0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.keyword-bar-fill {\r\n  height: 100%;\r\n  background: #9F7AEA;\r\n  transition: width 0.5s ease, transform 0.2s;\r\n}\r\n\r\n.keyword-bar-fill:hover {\r\n  transform: scaleY(1.2);\r\n  transform-origin: bottom;\r\n}\r\n\r\n.keyword-count {\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 0.8rem;\r\n  color: white;\r\n  text-shadow: 0 1px 2px rgba(0,0,0,0.3);\r\n}\r\n\r\n/* Tooltip */\r\n.custom-tooltip {\r\n  position: fixed;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  color: white;\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n  pointer-events: none;\r\n  z-index: 1001;\r\n  max-width: 200px;\r\n  text-align: center;\r\n}\r\n\r\n/* Mana Symbols */\r\n.mana {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  vertical-align: middle;\r\n}\r\n\r\n.sw { background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"white\" stroke=\"black\" stroke-width=\"2\"/></svg>'); }\r\n.su { background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"blue\" stroke=\"black\" stroke-width=\"2\"/></svg>'); }\r\n.sb { background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"black\" stroke=\"black\" stroke-width=\"2\"/></svg>'); }\r\n.sr { background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"red\" stroke=\"black\" stroke-width=\"2\"/></svg>'); }\r\n.sg { background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"green\" stroke=\"black\" stroke-width=\"2\"/></svg>'); }\r\n\r\n/* Responsive Adjustments */\r\n@media (max-width: 768px) {\r\n  .curve-grid,\r\n  .mana-base-grid,\r\n  .cost-grid,\r\n  .thematic-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .budget-chart,\r\n  .most-expensive {\r\n    grid-column: span 1;\r\n  }\r\n  \r\n  .color-identity {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .creature-pie-container {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .color-pie-container {\r\n    margin-bottom: 20px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .stats-modal-content {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .commander-preview img {\r\n    width: 40px;\r\n  }\r\n  \r\n  .bar {\r\n    width: 18px;\r\n  }\r\n  \r\n  .type-label {\r\n    width: 90px;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .color-pips {\r\n    gap: 8px;\r\n  }\r\n  \r\n  .color-pip {\r\n    padding: 6px 8px;\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style>","import { render } from \"./StatsPopup.vue?vue&type=template&id=0e59be87&scoped=true\"\nimport script from \"./StatsPopup.vue?vue&type=script&lang=js\"\nexport * from \"./StatsPopup.vue?vue&type=script&lang=js\"\n\nimport \"./StatsPopup.vue?vue&type=style&index=0&id=0e59be87&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0e59be87\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"playtest-popup\">\r\n    <div v-if=\"isInitialized\" class=\"playtest-content\">\r\n      <div class=\"popup-header\">\r\n        <h2>Playtest</h2>\r\n        <button class=\"close-btn\" @click=\"closePopup\"></button>\r\n      </div>\r\n\r\n      <div v-if=\"phase === 'select'\" class=\"deck-selection\">\r\n        <h3>Select a deck to playtest</h3>\r\n        <div v-if=\"!decks || decks.length === 0\" class=\"no-decks-message\">\r\n          <p>No decks available. Please create a deck first.</p>\r\n          <p v-if=\"loading\">Loading decks...</p>\r\n        </div>\r\n        <div v-else>\r\n          <div v-for=\"deck in decks\" :key=\"deck.id\" class=\"deck-option\" @click=\"selectAndLoadDeck(deck.id)\">\r\n            {{ deck.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"phase === 'initialDraw'\" class=\"initial-draw\">\r\n        <h2>Your Opening Hand</h2>\r\n        <div class=\"initial-draw-hand-container\">\r\n          <div\r\n            v-for=\"(card, index) in initialHand\"\r\n            :key=\"index\"\r\n            class=\"card-wrapper\"\r\n            @click=\"toggleCardSelect(index)\"\r\n            :class=\"{ 'selected': selectedCards.includes(index) }\"\r\n          >\r\n            <img :src=\"getCardImage(card)\"\r\n                 :alt=\"card.name\"\r\n                 class=\"card-image\"\r\n                 draggable=\"false\">\r\n          </div>\r\n        </div>\r\n        <div class=\"action-buttons\">\r\n          <button @click=\"keepHand\" class=\"action-button keep\">Keep</button>\r\n          <button @click=\"mulligan\" class=\"action-button mulligan\">Mulligan</button>\r\n          <button @click=\"drawCard\" class=\"action-button draw\">Draw</button> </div>\r\n      </div>\r\n\r\n      <div v-if=\"phase === 'playtest'\" class=\"playtest-interface\">\r\n        <div class=\"top-row\">\r\n          <div class=\"command-zone\" @drop=\"dropCard($event, 'command')\" @dragover.prevent @click=\"!isZoneExpanded.command && toggleZoneExpansion('command')\">\r\n            <div class=\"zone-header\">\r\n              <h3>Command Zone</h3>\r\n              <div v-if=\"commandZone.some(c => c.isCommander)\" class=\"commander-tax-display\">\r\n                Commander Tax: {{ commanderTax }}\r\n              </div>\r\n            </div>\r\n\r\n            <div v-if=\"!isZoneExpanded.command\" class=\"zone-preview\">\r\n              <div v-if=\"commandZone.length > 0\">\r\n                <div v-for=\"(card, index) in commandZone\" :key=\"'command-preview-' + index\" class=\"card-wrapper\">\r\n                  <img :src=\"getCardImage(card)\"\r\n                      :alt=\"card.name\"\r\n                      class=\"card-image small\"\r\n                      draggable=\"true\"\r\n                      @dragstart=\"dragStart($event, card, 'command', index)\"\r\n                      @contextmenu.prevent=\"openCardMenu($event, card, 'command', index)\">\r\n                  </div>\r\n              </div>\r\n              <div v-else class=\"empty-zone-message\">\r\n                No commander\r\n              </div>\r\n            </div>\r\n\r\n            <div v-if=\"isZoneExpanded.command\" class=\"expanded-zone command-expanded\">\r\n              <div class=\"expanded-cards\">\r\n                <div v-for=\"(card, index) in commandZone\" :key=\"'command-expanded-' + index\" class=\"card-wrapper\">\r\n                  <img :src=\"getCardImage(card)\"\r\n                      :alt=\"card.name\"\r\n                      class=\"card-image\"\r\n                      draggable=\"true\"\r\n                      @dragstart=\"dragStart($event, card, 'command', index)\"\r\n                      @contextmenu.prevent=\"openCardMenu($event, card, 'command', index)\">\r\n                  </div>\r\n                <div v-if=\"commandZone.length === 0\" class=\"empty-zone-message\">\r\n                  Command zone is empty.\r\n                </div>\r\n              </div>\r\n              <button @click.stop=\"toggleZoneExpansion('command')\" class=\"collapse-button\">Collapse</button>\r\n            </div>\r\n          </div>\r\n\r\n\r\n          <div class=\"graveyard\" @drop=\"dropCard($event, 'graveyard')\" @dragover.prevent @click=\"!isZoneExpanded.graveyard && toggleZoneExpansion('graveyard')\">\r\n            <h3>Graveyard ({{ graveyard.length }})</h3>\r\n            <div v-if=\"!isZoneExpanded.graveyard\" class=\"zone-preview\">\r\n              <div v-for=\"(card, index) in graveyard.slice(0, 3)\" :key=\"'graveyard-preview-' + index\" class=\"card-wrapper\">\r\n                <img :src=\"getCardImage(card)\"\r\n                     :alt=\"card.name\"\r\n                     class=\"card-image small\" draggable=\"true\"\r\n                     @dragstart=\"dragStart($event, card, 'graveyard', index)\"\r\n                     @contextmenu.prevent=\"openCardMenu($event, card, 'graveyard', index)\">\r\n              </div>\r\n              <div v-if=\"graveyard.length > 3\" class=\"more-cards-indicator\">\r\n                +{{ graveyard.length - 3 }} more\r\n              </div>\r\n              <div v-if=\"graveyard.length === 0\" class=\"empty-zone-message\">\r\n                 Graveyard is empty.\r\n              </div>\r\n            </div>\r\n            <div v-if=\"isZoneExpanded.graveyard\" class=\"expanded-zone graveyard-expanded\">\r\n              <div class=\"expanded-cards\">\r\n                <div v-for=\"(card, index) in graveyard\" :key=\"'graveyard-expanded-' + index\" class=\"card-wrapper\">\r\n                  <img :src=\"getCardImage(card)\"\r\n                       :alt=\"card.name\"\r\n                       class=\"card-image\"\r\n                       draggable=\"true\"\r\n                       @dragstart=\"dragStart($event, card, 'graveyard', index)\"\r\n                       @contextmenu.prevent=\"openCardMenu($event, card, 'graveyard', index)\">\r\n                </div>\r\n                 <div v-if=\"graveyard.length === 0\" class=\"empty-zone-message\">\r\n                   Graveyard is empty.\r\n                </div>\r\n              </div>\r\n              <button @click.stop=\"toggleZoneExpansion('graveyard')\" class=\"collapse-button\">Collapse</button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"exile-zone\" @drop=\"dropCard($event, 'exile')\" @dragover.prevent @click=\"!isZoneExpanded.exile && toggleZoneExpansion('exile')\">\r\n             <h3>Exile ({{ exileZone.length }})</h3>\r\n             <div v-if=\"!isZoneExpanded.exile\" class=\"zone-preview\">\r\n               <div v-for=\"(card, index) in exileZone.slice(0, 3)\" :key=\"'exile-preview-' + index\" class=\"card-wrapper\">\r\n                 <img :src=\"getCardImage(card)\"\r\n                      :alt=\"card.name\"\r\n                      class=\"card-image small\" draggable=\"true\"\r\n                      @dragstart=\"dragStart($event, card, 'exile', index)\"\r\n                      @contextmenu.prevent=\"openCardMenu($event, card, 'exile', index)\">\r\n               </div>\r\n               <div v-if=\"exileZone.length > 3\" class=\"more-cards-indicator\">\r\n                 +{{ exileZone.length - 3 }} more\r\n               </div>\r\n               <div v-if=\"exileZone.length === 0\" class=\"empty-zone-message\">\r\n                 Exile is empty.\r\n               </div>\r\n             </div>\r\n             <div v-if=\"isZoneExpanded.exile\" class=\"expanded-zone exile-expanded\">\r\n               <div class=\"expanded-cards\">\r\n                 <div v-for=\"(card, index) in exileZone\" :key=\"'exile-expanded-' + index\" class=\"card-wrapper\">\r\n                   <img :src=\"getCardImage(card)\"\r\n                        :alt=\"card.name\"\r\n                        class=\"card-image\"\r\n                        draggable=\"true\"\r\n                        @dragstart=\"dragStart($event, card, 'exile', index)\"\r\n                        @contextmenu.prevent=\"openCardMenu($event, card, 'exile', index)\">\r\n                 </div>\r\n                  <div v-if=\"exileZone.length === 0\" class=\"empty-zone-message\">\r\n                    Exile is empty.\r\n                  </div>\r\n               </div>\r\n               <button @click.stop=\"toggleZoneExpansion('exile')\" class=\"collapse-button\">Collapse</button>\r\n             </div>\r\n           </div>\r\n        </div>\r\n\r\n        <div class=\"battlefield\" @drop=\"dropCard($event, 'battlefield')\" @dragover.prevent>\r\n          <h3>Battlefield</h3>\r\n          <div class=\"battlefield-cards\">\r\n            <div v-for=\"(card, index) in battlefield\" :key=\"'battlefield-' + (card.gameId || index)\" class=\"battlefield-card\"\r\n                 :style=\"{\r\n                   transform: card.tapped ? 'rotate(90deg)' : 'none', // Rotate if tapped\r\n                   left: card.position?.x + 'px', // Position based on drag/drop\r\n                   top: card.position?.y + 'px',\r\n                   position: 'absolute' // Absolute positioning for dragging\r\n                 }\"\r\n                 @mousedown=\"startDrag($event, card, index)\"\r\n                 @mouseup=\"stopDrag\"\r\n                 @mousemove=\"throttledHandleDrag($event)\">\r\n              <img :src=\"getCardImage(card)\"\r\n                   :alt=\"card.name\"\r\n                   class=\"card-image\"\r\n                   draggable=\"true\" @dragstart=\"dragStart($event, card, 'battlefield', index)\"\r\n                   @contextmenu.prevent=\"openCardMenu($event, card, 'battlefield', index)\">\r\n              <div v-if=\"card.counters > 0\" class=\"counter-badge\">\r\n                {{ card.counters }}\r\n              </div>\r\n              <div v-if=\"card.power !== undefined || card.toughness !== undefined\" class=\"pt-indicator\">\r\n                {{ card.power ?? '?' }}/{{ card.toughness ?? '?' }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button @click=\"addToken\" class=\"token-button\">Add Token</button>\r\n        </div>\r\n\r\n        <div class=\"bottom-row\">\r\n          <div class=\"library\" @drop=\"dropCard($event, 'library')\" @dragover.prevent>\r\n            <h3>Library ({{ library.length }})</h3>\r\n            <img :src=\"defaultCardBack\"\r\n                 alt=\"Library\"\r\n                 class=\"library-image\"\r\n                 @click=\"searchLibrary\"\r\n                 draggable=\"false\">\r\n            <button @click=\"drawCard\" class=\"draw-button\">Draw</button>\r\n          </div>\r\n          <div class=\"hand-zone\" @drop=\"dropCard($event, 'hand')\" @dragover.prevent>\r\n            <h3>Hand ({{ hand.length }})</h3>\r\n            <div class=\"hand-cards\">\r\n              <div v-for=\"(cardGroup, index) in groupedHand\" :key=\"'hand-' + (cardGroup.card.gameId || index)\" class=\"card-wrapper\">\r\n                <img :src=\"getCardImage(cardGroup.card)\"\r\n                     :alt=\"cardGroup.card.name\"\r\n                     class=\"card-image\"\r\n                     draggable=\"true\"\r\n                     @dragstart=\"dragStart($event, cardGroup.card, 'hand', findCardIndexInHand(cardGroup.card))\" @contextmenu.prevent=\"openCardMenu($event, cardGroup.card, 'hand', findCardIndexInHand(cardGroup.card))\">\r\n                <div v-if=\"cardGroup.count > 1\" class=\"quantity-badge\">\r\n                  {{ cardGroup.count }}\r\n                </div>\r\n              </div>\r\n               <div v-if=\"hand.length === 0\" class=\"empty-zone-message\">\r\n                 Hand is empty.\r\n               </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"showContextMenu && contextCard\"\r\n             class=\"context-menu\"\r\n             :style=\"{ top: contextMenuPosition.y + 'px', left: contextMenuPosition.x + 'px' }\"\r\n             @click.stop>\r\n          <div v-if=\"contextZone !== 'battlefield'\" class=\"context-menu-item\" @click=\"moveToZone('battlefield')\">Move to Battlefield</div>\r\n          <div v-if=\"contextZone !== 'exile'\" class=\"context-menu-item\" @click=\"moveToZone('exile')\">Move to Exile</div>\r\n          <div v-if=\"contextZone !== 'graveyard'\" class=\"context-menu-item\" @click=\"moveToZone('graveyard')\">Move to Graveyard</div>\r\n          <div v-if=\"contextZone !== 'command' && !contextCard?.isToken\" class=\"context-menu-item\" @click=\"moveToZone('command')\">Move to Command Zone</div>\r\n          <div v-if=\"contextZone !== 'hand' && !contextCard?.isToken\" class=\"context-menu-item\" @click=\"moveToZone('hand')\">Move to Hand</div>\r\n          <div v-if=\"contextZone !== 'library' && !contextCard?.isToken\" class=\"context-menu-item\" @click=\"moveToTopOfLibrary\">Put on Top of Library</div>\r\n          <div v-if=\"contextZone !== 'library' && !contextCard?.isToken\" class=\"context-menu-item\" @click=\"moveToBottomOfLibrary\">Put on Bottom of Library</div>\r\n          <div v-if=\"contextCard?.isCommander\" class=\"context-menu-item\" @click=\"increaseCommanderTax\">Increase Commander Tax (+2)</div>\r\n          <div class=\"context-menu-divider\"></div>\r\n          <div v-if=\"contextCard?.card_faces?.length > 1\" class=\"context-menu-item\" @click=\"flipCard\">Flip Card</div>\r\n          <div v-if=\"contextZone === 'battlefield'\" class=\"context-menu-item\" @click=\"tapCard\">{{ contextCard.tapped ? 'Untap' : 'Tap' }}</div>\r\n          <div v-if=\"contextZone === 'battlefield'\" class=\"context-menu-item\" @click=\"addCounter\">Add Counter</div>\r\n          <div v-if=\"contextZone === 'battlefield' && contextCard?.counters > 0\" class=\"context-menu-item\" @click=\"removeCounter\">Remove Counter</div>\r\n          <div v-if=\"contextZone === 'battlefield'\" class=\"context-menu-item\" @click=\"setPowerToughness\">Set Power/Toughness</div>\r\n          <div v-if=\"contextZone === 'battlefield'\" class=\"context-menu-item\" @click=\"createTokenCopy\">Create Token Copy</div>\r\n        </div>\r\n\r\n        <div v-if=\"showTokenModal\" class=\"modal-overlay\" @click=\"cancelTokenCreation\">\r\n          <div class=\"modal-content token-modal\" @click.stop>\r\n            <h3>Create Token</h3>\r\n            <div class=\"token-form\">\r\n              <label> Token Name: <input v-model=\"tokenName\" type=\"text\" placeholder=\"E.g., Soldier, Goblin\"> </label>\r\n              <label> Quantity: <input v-model.number=\"tokenQuantity\" type=\"number\" min=\"1\" max=\"100\"> </label>\r\n              <label> Image URL (optional): <input v-model=\"tokenImageUrl\" type=\"text\" placeholder=\"Paste image URL\"> </label>\r\n              <div class=\"modal-buttons token-modal-buttons\">\r\n                <button @click=\"createToken\" class=\"confirm-button\">Create</button>\r\n                <button @click=\"cancelTokenCreation\" class=\"cancel-button\">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"showPTModal\" class=\"modal-overlay\" @click=\"cancelPT\">\r\n          <div class=\"modal-content pt-modal\" @click.stop>\r\n            <h3>Set Power/Toughness for {{ contextCard?.name }}</h3>\r\n            <div class=\"pt-form\">\r\n              <label> Power: <input v-model.number=\"newPower\" type=\"number\"> </label>\r\n              <label> Toughness: <input v-model.number=\"newToughness\" type=\"number\"> </label>\r\n              <div class=\"modal-buttons pt-modal-buttons\">\r\n                <button @click=\"savePT\" class=\"confirm-button\">Save</button>\r\n                <button @click=\"cancelPT\" class=\"cancel-button\">Cancel</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"showLibrarySearch\" class=\"modal-overlay\" @click=\"closeLibrarySearch\">\r\n          <div class=\"modal-content library-search-modal\" @click.stop>\r\n            <h3>Search Library ({{ library.length }} cards)</h3>\r\n            <input v-model=\"librarySearchQuery\"\r\n                   type=\"text\"\r\n                   placeholder=\"Search for a card...\"\r\n                   @input=\"searchLibraryCards\"\r\n                   class=\"library-search-input\">\r\n            <div class=\"search-results\">\r\n              <div v-for=\"card in librarySearchResults\"\r\n                   :key=\"'search-' + (card.gameId || card.id)\" class=\"search-result-card\"\r\n                   @click=\"moveSearchedCardToHand(card)\">\r\n                 <img :src=\"getCardImage(card)\"\r\n                     :alt=\"card.name\"\r\n                     class=\"search-card-image\">\r\n                 <span>{{ card.name }}</span>\r\n              </div>\r\n               <div v-if=\"librarySearchResults.length === 0 && librarySearchQuery\" class=\"empty-zone-message\">\r\n                 No matching cards found.\r\n               </div>\r\n               <div v-if=\"librarySearchResults.length === 0 && !librarySearchQuery && library.length > 0\" class=\"empty-zone-message\">\r\n                 Library contains {{ library.length }} cards. (Showing in current library order)\r\n               </div>\r\n               <div v-if=\"library.length === 0\" class=\"empty-zone-message\">\r\n                 Library is empty.\r\n               </div>\r\n            </div>\r\n            <div class=\"modal-buttons library-search-buttons\">\r\n              <button @click=\"shuffleLibrary\" class=\"action-button mulligan\">Shuffle Library</button>\r\n              <button @click=\"closeLibrarySearch\" class=\"cancel-button\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"loading\">\r\n      Loading...\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// Helper function to limit the rate at which a function can fire.\r\nfunction throttle(func, limit) {\r\n  let inThrottle;\r\n  return function() {\r\n    const args = arguments;\r\n    const context = this;\r\n    if (!inThrottle) {\r\n      func.apply(context, args);\r\n      inThrottle = true;\r\n      setTimeout(() => inThrottle = false, limit);\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: 'PlaytestPopup',\r\n  props: {\r\n    // Array of available decks passed from the parent component.\r\n    decks: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedDeckId: null, // ID of the deck chosen for playtesting\r\n      phase: 'select', // Current phase: 'select', 'initialDraw', 'playtest', 'loading'\r\n      loading: true, // Indicates if decks are still loading\r\n      isInitialized: false, // Flag to ensure component is ready before rendering main content\r\n\r\n      // Game state arrays\r\n      library: [],\r\n      initialHand: [], // Stores the hand during the initial draw/mulligan phase\r\n      hand: [],\r\n      battlefield: [],\r\n      graveyard: [],\r\n      exileZone: [],\r\n      commandZone: [],\r\n\r\n      selectedCards: [], // Indices of cards selected for mulligan in initialHand\r\n      isZoneExpanded: { // State for expanded zone views\r\n        command: false,\r\n        exile: false,\r\n        graveyard: false,\r\n      },\r\n\r\n      // Drag and drop state\r\n      draggedCard: null, // The card object being dragged\r\n      draggedFromZone: null, // The name of the zone the card came from\r\n      draggedFromIndex: null, // The index within the source zone array\r\n      isDraggingBattlefieldCard: false, // Flag for dragging specifically on the battlefield\r\n      draggedBattlefieldCardIndex: -1, // Index of the card being dragged on the battlefield\r\n      dragStartOffset: { x: 0, y: 0 }, // Offset for smooth battlefield dragging\r\n      throttledHandleDrag: null, // Throttled version of the drag handler\r\n\r\n      // Context menu state\r\n      showContextMenu: false, // Whether the right-click menu is visible\r\n      contextMenuPosition: { x: 0, y: 0 }, // Position of the context menu\r\n      contextCard: null, // The card the context menu is for\r\n      contextZone: null, // The zone the context card is in\r\n      contextIndex: null, // The index of the context card in its zone\r\n      contextMenuCloseHandler: null, // Handler to close the menu on outside click\r\n\r\n      // Modal states\r\n      showTokenModal: false, // Visibility for the create token modal\r\n      tokenName: '', // Name for the new token\r\n      tokenQuantity: 1, // Quantity of tokens to create\r\n      tokenImageUrl: '', // Optional image URL for the token\r\n      showPTModal: false, // Visibility for the set power/toughness modal\r\n      newPower: 0, // New power value\r\n      newToughness: 0, // New toughness value\r\n      showLibrarySearch: false, // Visibility for the library search modal\r\n      librarySearchQuery: '', // Search term for the library\r\n      librarySearchResults: [], // Results for library search (now reversed for display)\r\n\r\n      // Game counters/state\r\n      commanderTax: 0, // Additional cost to cast the commander\r\n      mulliganCount: 0, // Number of times the player has mulliganed\r\n\r\n      // Asset URLs\r\n      defaultCardBack: new URL('@/assets/cards/mtg-card-back.jpg', import.meta.url).href,\r\n      defaultTokenImage: new URL('@/assets/cards/mtg-token-default.jpg', import.meta.url).href,\r\n    };\r\n  },\r\n  computed: {\r\n    // Groups cards in hand by name/ID for display purposes.\r\n    groupedHand() {\r\n      const groups = [];\r\n      const cardMap = new Map(); // Use a Map for efficient lookup by unique ID or name\r\n      this.hand.forEach(card => {\r\n        // Use gameId if available (unique instance), otherwise fallback to id or name\r\n        const key = card.gameId || card.id || card.name;\r\n        if (cardMap.has(key)) {\r\n          // Increment count if this card is already in a group\r\n          cardMap.get(key).count++;\r\n        } else {\r\n          // Create a new group for this card\r\n          const group = { card: card, count: 1 };\r\n          cardMap.set(key, group);\r\n          groups.push(group);\r\n        }\r\n      });\r\n      return groups;\r\n    },\r\n  },\r\n  created() {\r\n    // Initialize the throttled drag handler on component creation.\r\n    this.throttledHandleDrag = throttle(this.handleDrag, 16); // Throttle to ~60fps\r\n  },\r\n  mounted() {\r\n    console.log('PlaytestPopup mounted');\r\n    // Ensure the DOM is ready before setting initialized flag.\r\n    this.$nextTick(() => {\r\n        this.isInitialized = true;\r\n        this.loading = false; // Assume decks passed as props are loaded\r\n    });\r\n\r\n    // Add a global click listener to close the context menu when clicking outside it.\r\n    this.contextMenuCloseHandler = (event) => {\r\n      // Check if the context menu is shown and the click was not inside the menu itself\r\n      if (this.showContextMenu && !event.target.closest('.context-menu')) {\r\n        this.closeContextMenu();\r\n      }\r\n    };\r\n    document.addEventListener('click', this.contextMenuCloseHandler);\r\n  },\r\n  beforeUnmount() {\r\n    console.log('PlaytestPopup unmounting');\r\n    // Clean up event listeners to prevent memory leaks.\r\n    document.removeEventListener('click', this.contextMenuCloseHandler);\r\n    document.removeEventListener('mousemove', this.throttledHandleDrag);\r\n    document.removeEventListener('mouseup', this.stopDrag);\r\n    // Reset all component state.\r\n    this.cleanup();\r\n  },\r\n  methods: {\r\n    // Closes the popup and emits an event to the parent component.\r\n    closePopup() {\r\n      this.cleanup(); // Reset state before closing\r\n      this.$emit('close');\r\n    },\r\n\r\n    // Resets all game state variables to their initial values.\r\n    cleanup() {\r\n      console.log('Cleaning up PlaytestPopup state');\r\n      this.library = [];\r\n      this.initialHand = [];\r\n      this.hand = [];\r\n      this.battlefield = [];\r\n      this.graveyard = [];\r\n      this.exileZone = [];\r\n      this.commandZone = [];\r\n      this.selectedCards = [];\r\n      this.selectedDeckId = null;\r\n      this.phase = 'select'; // Go back to deck selection phase\r\n      this.commanderTax = 0;\r\n      this.mulliganCount = 0;\r\n      this.closeContextMenu(); // Ensure context menu is closed\r\n      // Reset modal states\r\n      this.showTokenModal = false;\r\n      this.showPTModal = false;\r\n      this.showLibrarySearch = false;\r\n      // Reset expanded zone states\r\n      this.isZoneExpanded = { command: false, exile: false, graveyard: false };\r\n      // Reset drag states\r\n      this.isDraggingBattlefieldCard = false;\r\n      this.draggedBattlefieldCardIndex = -1;\r\n      this.draggedCard = null;\r\n      this.draggedFromZone = null;\r\n      this.draggedFromIndex = null;\r\n    },\r\n\r\n    // Sets the selected deck ID and triggers loading the deck.\r\n    selectAndLoadDeck(deckId) {\r\n      this.selectedDeckId = deckId;\r\n      this.loadDeck();\r\n    },\r\n\r\n    // Loads the selected deck, initializes game zones, shuffles, and draws the initial hand.\r\n    loadDeck() {\r\n      try {\r\n        if (!this.selectedDeckId) { console.error('No deck selected'); return; }\r\n        // Find the deck data from the props using the selected ID.\r\n        const deck = this.decks.find(d => d.id === this.selectedDeckId);\r\n        if (!deck) { console.error('Selected deck not found:', this.selectedDeckId); return; }\r\n        console.log('Loading deck:', deck.name);\r\n        this.cleanup(); // Reset previous game state first\r\n        this.phase = 'loading'; // Show loading state\r\n\r\n        // Deep copy the deck data to avoid modifying the original prop.\r\n        const deckData = JSON.parse(JSON.stringify(deck));\r\n        const libraryCards = [];\r\n\r\n        // Populate the library, excluding the commander.\r\n        if (deckData.cards && Array.isArray(deckData.cards)) {\r\n          deckData.cards.forEach((cardData, cardIndex) => {\r\n            // Skip if this card is the designated commander.\r\n            if (deckData.commander && cardData.id === deckData.commander.id) return;\r\n            // Determine the quantity of this card.\r\n            const count = cardData.count || cardData.quantity || 1;\r\n            // Add each copy to the library with initial game state properties.\r\n            for (let i = 0; i < count; i++) {\r\n              libraryCards.push({\r\n                ...cardData,\r\n                // Generate a unique ID for this specific instance of the card in the game.\r\n                gameId: `card-${cardData.id}-${cardIndex}-${i}-${Date.now()}`,\r\n                tapped: false,\r\n                flipped: false,\r\n                counters: 0,\r\n                position: null, // Position on battlefield (null initially)\r\n                power: cardData.power, // Keep original P/T if available\r\n                toughness: cardData.toughness,\r\n              });\r\n            }\r\n          });\r\n          this.library = libraryCards;\r\n          console.log(`Library initialized with ${this.library.length} cards. First few:`, this.library.slice(0, 5).map(c => c.name));\r\n        } else {\r\n          console.warn('Deck has no cards or cards is not an array:', deckData);\r\n          this.library = [];\r\n        }\r\n\r\n        // Set up the command zone if a commander exists.\r\n        if (deckData.commander) {\r\n          this.commandZone = [{\r\n            ...deckData.commander,\r\n            isCommander: true, // Mark this card as the commander\r\n            gameId: `commander-${deckData.commander.id}-${Date.now()}`, // Unique game ID\r\n            tapped: false,\r\n            flipped: false,\r\n            counters: 0,\r\n            position: null,\r\n            power: deckData.commander.power,\r\n            toughness: deckData.commander.toughness,\r\n          }];\r\n        } else {\r\n          this.commandZone = [];\r\n        }\r\n\r\n        // Shuffle the newly created library.\r\n        this.shuffleDeck();\r\n        // Draw the starting hand.\r\n        this.drawInitialHand();\r\n        // Move to the initial draw phase.\r\n        this.phase = 'initialDraw';\r\n        console.log('Deck loaded:', { library: this.library.length, hand: this.initialHand.length, commander: this.commandZone.length });\r\n\r\n      } catch (error) {\r\n        console.error('Error in loadDeck:', error);\r\n        this.phase = 'select'; // Revert to selection phase on error\r\n      }\r\n    },\r\n\r\n    // Draws the initial hand of 7 cards.\r\n    drawInitialHand() {\r\n      this.initialHand = [];\r\n      this.selectedCards = []; // Clear any previous selections\r\n      const handSize = 7;\r\n      for (let i = 0; i < handSize; i++) {\r\n        if (this.library.length > 0) {\r\n          // Draw from the 'top' (end) of the library.\r\n          this.initialHand.push(this.library.pop());\r\n        } else {\r\n          console.warn(\"Library empty during initial draw\");\r\n          break; // Stop drawing if library is empty\r\n        }\r\n      }\r\n    },\r\n\r\n    // Toggles the selection state of a card in the initial hand (for mulligan).\r\n    toggleCardSelect(index) {\r\n      const idx = this.selectedCards.indexOf(index);\r\n      if (idx === -1) {\r\n        // Add index to selection if not already selected.\r\n        this.selectedCards.push(index);\r\n      } else {\r\n        // Remove index from selection if already selected.\r\n        this.selectedCards.splice(idx, 1);\r\n      }\r\n    },\r\n\r\n    // Finalizes the hand and moves to the main playtest phase.\r\n    keepHand() {\r\n      this.hand = [...this.initialHand]; // Move cards from initialHand to the actual hand\r\n      this.initialHand = []; // Clear the temporary initial hand\r\n      this.phase = 'playtest'; // Start the game!\r\n    },\r\n\r\n    // Handles the mulligan process.\r\n    mulligan() {\r\n        this.mulliganCount++; // Track mulligans\r\n        const newHandSize = 7; // Always draw 7 (standard mulligan)\r\n\r\n        // Put the current initial hand back into the library.\r\n        this.library.push(...this.initialHand);\r\n        this.initialHand = []; // Clear the hand\r\n\r\n        // Reshuffle the library.\r\n        this.shuffleDeck();\r\n\r\n        // Draw a new hand of 7 cards.\r\n        for (let i = 0; i < newHandSize; i++) {\r\n            if (this.library.length > 0) {\r\n                this.initialHand.push(this.library.pop()); // Draw from top (end)\r\n            } else {\r\n                console.warn(\"Library empty during mulligan draw\");\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Inform the user about the mulligan and the need to put cards back manually.\r\n        alert(`Mulligan ${this.mulliganCount}. Drawn ${this.initialHand.length} cards. You must manually put ${this.mulliganCount} card(s) on the bottom of your library using the context menu after keeping.`);\r\n\r\n        this.phase = 'initialDraw'; // Stay in the initial draw phase\r\n        this.selectedCards = []; // Reset selections for the new hand\r\n    },\r\n\r\n    // Draws a single card from the library to the hand.\r\n    drawCard() {\r\n      if (this.library.length > 0) {\r\n        const drawnCard = this.library.pop(); // Get card from the end (top)\r\n        if (this.phase === 'initialDraw') {\r\n           // If still in mulligan phase, add to initialHand\r\n           this.initialHand.push(drawnCard);\r\n        } else if (this.phase === 'playtest') {\r\n           // Otherwise, add to the main hand\r\n           this.hand.push(drawnCard);\r\n        }\r\n      } else {\r\n        console.warn('Cannot draw, library is empty!'); // Prevent drawing from empty library\r\n      }\r\n    },\r\n\r\n    // Shuffles the library array using the Fisher-Yates (Knuth) algorithm.\r\n    shuffleDeck() {\r\n      console.log('Shuffling deck. Library size:', this.library.length);\r\n      if (this.library.length > 1) {\r\n          // Log the cards at the end of the array (top of the library)\r\n          console.log('Library order BEFORE shuffle (top 5):', this.library.slice(-5).map(c => c.name));\r\n      }\r\n\r\n      // Standard Fisher-Yates shuffle algorithm\r\n      for (let i = this.library.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1)); // Random index from 0 to i\r\n        // Swap elements at indices i and j\r\n        [this.library[i], this.library[j]] = [this.library[j], this.library[i]];\r\n      }\r\n\r\n      if (this.library.length > 1) {\r\n           // Log the cards at the end of the array (top of the library) again\r\n          console.log('Library order AFTER shuffle (top 5):', this.library.slice(-5).map(c => c.name));\r\n      }\r\n      console.log('Deck shuffle complete.');\r\n    },\r\n\r\n    // Shuffles the library, typically called from the library search modal.\r\n    shuffleLibrary() {\r\n        console.log('Attempting to shuffle library via button...');\r\n        this.shuffleDeck(); // Reuse the main shuffle logic\r\n        // If the search modal is open, refresh the displayed results to show new order.\r\n        if (this.showLibrarySearch) {\r\n            this.searchLibraryCards();\r\n        }\r\n    },\r\n\r\n    // Increases the commander tax by 2.\r\n    increaseCommanderTax() {\r\n      this.commanderTax += 2; // Standard tax increase\r\n      console.log(`Commander tax increased to ${this.commanderTax}`);\r\n      this.closeContextMenu(); // Close menu if called from there\r\n    },\r\n\r\n    // Toggles the expanded view for a specific zone (command, graveyard, exile).\r\n    toggleZoneExpansion(zone) {\r\n      // Collapse other zones when expanding one.\r\n      Object.keys(this.isZoneExpanded).forEach(key => {\r\n          if (key !== zone) {\r\n              this.isZoneExpanded[key] = false;\r\n          }\r\n      });\r\n      // Toggle the state for the clicked zone.\r\n      this.isZoneExpanded[zone] = !this.isZoneExpanded[zone];\r\n      console.log(`Toggled ${zone} expansion to:`, this.isZoneExpanded[zone]);\r\n    },\r\n\r\n    // Removes a card from a specified zone at a given index. Returns the removed card or null.\r\n    removeCardFromZone(zoneName, index) {\r\n        const zoneArray = this.getZoneArray(zoneName);\r\n        if (!zoneArray || index < 0 || index >= zoneArray.length) {\r\n            console.error(`Cannot remove card from ${zoneName} at invalid index ${index}`);\r\n            return null; // Invalid index or zone\r\n        }\r\n        // Remove the card using splice and return the removed card (first element of the returned array).\r\n        return zoneArray.splice(index, 1)[0];\r\n    },\r\n\r\n    // Handles the start of a drag operation. Stores card data in the dataTransfer object.\r\n    dragStart(event, card, zone, index) {\r\n        console.log(`Drag Start: ${card.name} from ${zone}[${index}]`);\r\n        // Store card identifier, source zone, and index for the drop event.\r\n        event.dataTransfer.setData('text/plain', JSON.stringify({ cardId: card.gameId || card.id, zone, index }));\r\n        event.dataTransfer.effectAllowed = 'move'; // Indicate that the card will be moved.\r\n        // Keep track of the dragged card details locally as well.\r\n        this.draggedCard = card;\r\n        this.draggedFromZone = zone;\r\n        this.draggedFromIndex = index; // Note: This index might become stale if the array changes before drop.\r\n    },\r\n\r\n    // Handles the drop event when a card is dropped onto a zone.\r\n    dropCard(event, targetZone) {\r\n        event.preventDefault(); // Prevent default browser drop behavior.\r\n        console.log(`Drop on: ${targetZone}`);\r\n        try {\r\n            // Retrieve the data stored during dragStart.\r\n            const data = JSON.parse(event.dataTransfer.getData('text/plain'));\r\n            const { cardId, zone: sourceZone } = data; // Original index might be unreliable, use cardId.\r\n            console.log(`Dropped card ID: ${cardId} from ${sourceZone} to ${targetZone}`);\r\n\r\n            let cardToMove;\r\n            let actualSourceIndex = -1; // We need to find the card's current index.\r\n\r\n            const sourceArray = this.getZoneArray(sourceZone);\r\n            if (!sourceArray) { console.error(\"Invalid source zone:\", sourceZone); return; }\r\n\r\n            // Find the card in the source array using its unique gameId or fallback ID.\r\n            actualSourceIndex = sourceArray.findIndex(c => (c.gameId || c.id) === cardId);\r\n\r\n            if (actualSourceIndex === -1) {\r\n                // This can happen if the card was already moved (e.g., via context menu) or state changed.\r\n                console.error(`Card ${cardId} not found in source zone ${sourceZone}. Drag might be stale.`);\r\n                return;\r\n            }\r\n\r\n            // Remove the card from the source zone using the found index.\r\n            cardToMove = sourceArray.splice(actualSourceIndex, 1)[0];\r\n            if (!cardToMove) { console.error(\"Failed to extract card from source zone.\"); return; }\r\n\r\n            // Handle token behavior: Tokens cease to exist when leaving the battlefield (except to command zone potentially, though usually not).\r\n            if (cardToMove.isToken && sourceZone === 'battlefield') {\r\n                if (targetZone === 'hand' || targetZone === 'library' || targetZone === 'graveyard' || targetZone === 'exile') {\r\n                    console.log(`Token ${cardToMove.name} removed (moved from battlefield to ${targetZone})`);\r\n                    this.draggedCard = null; // Clear drag state\r\n                    return; // Do not add the token to the target zone.\r\n                }\r\n            }\r\n\r\n            // Get the target zone array.\r\n            const targetArray = this.getZoneArray(targetZone);\r\n            if (!targetArray) {\r\n                console.error(\"Invalid target zone:\", targetZone);\r\n                // Put the card back in the source zone if the target is invalid.\r\n                sourceArray.splice(actualSourceIndex, 0, cardToMove);\r\n                return;\r\n            }\r\n\r\n            // Reset card state when moving zones (untap, clear position).\r\n            cardToMove.tapped = false;\r\n            cardToMove.position = null;\r\n\r\n            // Add the card to the target zone.\r\n            if (targetZone === 'battlefield') {\r\n                // Calculate position relative to the battlefield container.\r\n                const battlefieldRect = event.currentTarget.getBoundingClientRect();\r\n                cardToMove.position = {\r\n                    x: event.clientX - battlefieldRect.left,\r\n                    y: event.clientY - battlefieldRect.top,\r\n                };\r\n                targetArray.push(cardToMove); // Add to the end of the battlefield array.\r\n            } else if (targetZone === 'library') {\r\n                 // Drop onto library puts on TOP (end of array)\r\n                 targetArray.push(cardToMove); // Add to end (top, drawn by pop)\r\n                 console.log(`Moved ${cardToMove.name} to TOP of library via drop`);\r\n            } else {\r\n                // For hand, graveyard, exile, command zone, add to the end.\r\n                targetArray.push(cardToMove);\r\n            }\r\n\r\n            console.log(`Moved ${cardToMove.name} from ${sourceZone} to ${targetZone}`);\r\n        } catch (e) {\r\n            console.error(\"Error processing drop event:\", e);\r\n        } finally {\r\n             // Clear drag state regardless of success or failure.\r\n             this.draggedCard = null;\r\n             this.draggedFromZone = null;\r\n             this.draggedFromIndex = null;\r\n        }\r\n    },\r\n\r\n    // --- Battlefield Dragging (Mouse Down/Move/Up) ---\r\n\r\n    // Initiates dragging a card within the battlefield using mouse events.\r\n    startDrag(event, card, index) {\r\n        // Only respond to left mouse button clicks.\r\n        if (event.button !== 0) return;\r\n        // Ensure the click started on the card itself.\r\n        if (!event.target.closest('.battlefield-card')) return;\r\n\r\n        console.log(`Battlefield Drag Start: ${card.name}`);\r\n        this.isDraggingBattlefieldCard = true; // Set flag\r\n        this.draggedBattlefieldCardIndex = index; // Store index\r\n\r\n        // Initialize position if it doesn't exist (e.g., first drag).\r\n        if (!card.position) {\r\n            card.position = { x: 50, y: 50 };\r\n        }\r\n\r\n        // Calculate the offset between the mouse click and the card's top-left corner.\r\n        const cardRect = event.target.closest('.battlefield-card').getBoundingClientRect();\r\n        this.dragStartOffset = {\r\n            x: event.clientX - cardRect.left,\r\n            y: event.clientY - cardRect.top\r\n        };\r\n\r\n        // Add listeners to the document to track mouse movement and release.\r\n        document.addEventListener('mousemove', this.throttledHandleDrag);\r\n        document.addEventListener('mouseup', this.stopDrag);\r\n        event.preventDefault(); // Prevent default text selection or other drag behaviors.\r\n    },\r\n\r\n    // Handles mouse movement while dragging a battlefield card. Updates card position.\r\n    handleDrag(event) {\r\n        // Only proceed if currently dragging a battlefield card.\r\n        if (!this.isDraggingBattlefieldCard || this.draggedBattlefieldCardIndex < 0) return;\r\n        const card = this.battlefield[this.draggedBattlefieldCardIndex];\r\n        if (!card) return; // Safety check\r\n\r\n        // Get the bounding box of the battlefield card container area.\r\n        const battlefieldCardsRect = this.$el.querySelector('.battlefield-cards').getBoundingClientRect();\r\n\r\n        // Calculate the new top-left position based on mouse position, container offset, and initial click offset.\r\n        const newX = event.clientX - battlefieldCardsRect.left - this.dragStartOffset.x;\r\n        const newY = event.clientY - battlefieldCardsRect.top - this.dragStartOffset.y;\r\n\r\n        // Update the card's position state. Vue reactivity will update the style.\r\n        card.position = { x: newX, y: newY };\r\n    },\r\n\r\n    // Handles mouse button release, ending the battlefield drag operation.\r\n    stopDrag() {\r\n        if (this.isDraggingBattlefieldCard) {\r\n            console.log(`Battlefield Drag End: ${this.battlefield[this.draggedBattlefieldCardIndex]?.name}`);\r\n            this.isDraggingBattlefieldCard = false; // Clear flag\r\n            this.draggedBattlefieldCardIndex = -1; // Clear index\r\n            // Remove the document-level listeners.\r\n            document.removeEventListener('mousemove', this.throttledHandleDrag);\r\n            document.removeEventListener('mouseup', this.stopDrag);\r\n        }\r\n    },\r\n\r\n    // --- Context Menu Logic ---\r\n\r\n    // Opens the right-click context menu for a card.\r\n    openCardMenu(event, card, zone, index) {\r\n      event.preventDefault(); // Prevent default browser context menu.\r\n      event.stopPropagation(); // Prevent triggering other click listeners (like zone expansion).\r\n\r\n      let actualIndex = index; // The provided index might be visual (e.g., grouped hand)\r\n      const zoneArray = this.getZoneArray(zone);\r\n      if (!zoneArray) { console.error(`Invalid zone ${zone} for context menu`); return; }\r\n\r\n      // For hand, need to find the actual index in the underlying `hand` array.\r\n      if (zone === 'hand') {\r\n        actualIndex = this.findCardIndexInHand(card);\r\n      } else {\r\n          // Verify the index still points to the correct card, find it if necessary.\r\n          // This handles cases where the array might have changed since rendering.\r\n          if (index >= zoneArray.length || (zoneArray[index].gameId || zoneArray[index].id) !== (card.gameId || card.id)) {\r\n              actualIndex = zoneArray.findIndex(c => (c.gameId || c.id) === (card.gameId || card.id));\r\n          }\r\n      }\r\n\r\n      if (actualIndex === -1) {\r\n          console.error(`Context menu card ${card.name} not found in ${zone}`); return;\r\n      }\r\n\r\n      // Store context information before calculating position.\r\n      this.contextCard = card;\r\n      this.contextZone = zone;\r\n      this.contextIndex = actualIndex; // Store the verified index.\r\n\r\n      // *** MODIFIED: Calculate context menu position dynamically ***\r\n      const clickX = event.clientX;\r\n      const clickY = event.clientY;\r\n      const viewportHeight = window.innerHeight;\r\n      const estimatedMenuHeight = 300; // Estimate menu height (adjust if needed)\r\n      const spaceBelow = viewportHeight - clickY;\r\n      const padding = 5; // Small gap from cursor\r\n\r\n      let yPos;\r\n\r\n      // If not enough space below, position above the cursor.\r\n      if (spaceBelow < estimatedMenuHeight) {\r\n          yPos = clickY - estimatedMenuHeight - padding;\r\n          // Prevent menu going off the top of the screen\r\n          if (yPos < padding) {\r\n              yPos = padding;\r\n          }\r\n      } else {\r\n          // Otherwise, position below the cursor (default).\r\n          yPos = clickY + padding;\r\n      }\r\n\r\n      // Keep horizontal position simple for now (right of cursor)\r\n      const xPos = clickX + padding;\r\n\r\n      // Set the calculated position\r\n      this.contextMenuPosition = { x: xPos, y: yPos };\r\n      // *** END MODIFICATION ***\r\n\r\n      this.showContextMenu = true; // Make the menu visible *after* setting position.\r\n      console.log(`Context menu opened for ${card.name} in ${zone}[${actualIndex}] at (${xPos}, ${yPos})`);\r\n    },\r\n\r\n    // Closes the context menu and resets related state.\r\n    closeContextMenu() {\r\n      this.showContextMenu = false;\r\n      this.contextCard = null;\r\n      this.contextZone = null;\r\n      this.contextIndex = null;\r\n    },\r\n\r\n    // Core logic to move the card currently targeted by the context menu.\r\n    moveCardFromContext(targetZone, libraryPosition = 'top') { // Default libraryPosition is 'top'\r\n      const card = this.getCardFromContext(); // Get the card details from context state\r\n      if (!card) {\r\n        console.error(\"Cannot move card, context invalid or lost.\");\r\n        this.closeContextMenu();\r\n        return;\r\n      }\r\n\r\n      const sourceZone = this.contextZone; // Get source zone from context\r\n      const sourceIndex = this.contextIndex; // Get source index from context\r\n\r\n      // Handle token removal when moving from battlefield to non-battlefield zones.\r\n      if (card.isToken && sourceZone === 'battlefield') {\r\n        if (targetZone === 'hand' || targetZone === 'library' || targetZone === 'graveyard' || targetZone === 'exile') {\r\n          console.log(`Token ${card.name} removed (moved from ${sourceZone} to ${targetZone})`);\r\n          this.removeCardFromZone(sourceZone, sourceIndex); // Remove from source\r\n          this.closeContextMenu();\r\n          return; // Don't add to target\r\n        }\r\n      }\r\n\r\n      // Handle commander movement and tax increase.\r\n      if (card.isCommander) {\r\n        // Log potential game rule interactions.\r\n        if (targetZone === 'graveyard' || targetZone === 'exile' || targetZone === 'hand' || targetZone === 'library') {\r\n          console.warn(`Commander ${card.name} moved to ${targetZone}. In a real game, you could choose the Command Zone instead.`);\r\n        }\r\n        // If moving back to the command zone from elsewhere, increase the tax.\r\n        if(targetZone === 'command' && sourceZone !== 'command') {\r\n          this.increaseCommanderTax(); // This also closes the context menu.\r\n        }\r\n      }\r\n\r\n      // Remove the card from its original zone.\r\n      const removedCard = this.removeCardFromZone(sourceZone, sourceIndex);\r\n      if (!removedCard) {\r\n        console.error(`Failed to remove ${card.name} from ${sourceZone}`);\r\n        this.closeContextMenu();\r\n        return;\r\n      }\r\n\r\n      // Get the array for the target zone.\r\n      const targetArray = this.getZoneArray(targetZone);\r\n      if (!targetArray) {\r\n        console.error(\"Invalid target zone for move:\", targetZone);\r\n        // Put the card back if the target zone is invalid.\r\n        this.getZoneArray(sourceZone)?.splice(sourceIndex, 0, removedCard);\r\n        this.closeContextMenu();\r\n        return;\r\n      }\r\n\r\n      // Reset card state for the new zone.\r\n      removedCard.tapped = false;\r\n      removedCard.position = null; // Clear absolute position\r\n\r\n      // Add the card to the target zone based on the zone type.\r\n      if (targetZone === 'battlefield') {\r\n        removedCard.position = { x: 50, y: 50 }; // Default position\r\n        targetArray.push(removedCard);\r\n      } else if (targetZone === 'library') {\r\n        // Logic for top/bottom placement (corrected in previous step)\r\n        if (libraryPosition === 'bottom') {\r\n           targetArray.unshift(removedCard); // Add to beginning (bottom)\r\n           console.log(`Moved ${removedCard.name} to BOTTOM of library`);\r\n        } else { // 'top' or default\r\n           targetArray.push(removedCard); // Add to end (top, drawn by pop)\r\n           console.log(`Moved ${removedCard.name} to TOP of library`);\r\n        }\r\n      } else {\r\n        // Add to the end for hand, graveyard, exile, command zone.\r\n        targetArray.push(removedCard);\r\n      }\r\n\r\n      console.log(`Moved ${removedCard.name} from ${sourceZone} to ${targetZone}`);\r\n      this.closeContextMenu(); // Close the menu after the action.\r\n    },\r\n\r\n    // Context menu action: Move card to the specified zone.\r\n    moveToZone(targetZone) {\r\n      this.moveCardFromContext(targetZone);\r\n    },\r\n\r\n    // Context menu action: Move card to the top of the library.\r\n    moveToTopOfLibrary() {\r\n      this.moveCardFromContext('library', 'top'); // Pass 'top' explicitly\r\n    },\r\n\r\n    // Context menu action: Move card to the bottom of the library.\r\n    moveToBottomOfLibrary() {\r\n      this.moveCardFromContext('library', 'bottom'); // Pass 'bottom' explicitly\r\n    },\r\n\r\n    // Context menu action: Flip a double-faced card.\r\n    flipCard() {\r\n      const card = this.getCardFromContext();\r\n      // Check if the card exists and has multiple faces.\r\n      if (card && card.card_faces?.length > 1) {\r\n         card.flipped = !card.flipped; // Toggle the flipped state\r\n         console.log(`${card.name} flipped to ${card.flipped ? 'back' : 'front'}`);\r\n      }\r\n      this.closeContextMenu();\r\n    },\r\n\r\n    // Context menu action: Tap or untap a card on the battlefield.\r\n    tapCard() {\r\n      const card = this.getCardFromContext();\r\n      // Only makes sense on the battlefield.\r\n      if (card && this.contextZone === 'battlefield') {\r\n         card.tapped = !card.tapped; // Toggle tapped state\r\n         console.log(`${card.name} ${card.tapped ? 'tapped' : 'untapped'}`);\r\n      }\r\n      this.closeContextMenu();\r\n    },\r\n\r\n    // Context menu action: Add a counter to a card on the battlefield.\r\n    addCounter() {\r\n      const card = this.getCardFromContext();\r\n      if (card && this.contextZone === 'battlefield') {\r\n         // Initialize counters if undefined/null.\r\n         if (card.counters === undefined || card.counters === null) card.counters = 0;\r\n         card.counters++; // Increment counter\r\n         console.log(`Added counter to ${card.name} (${card.counters} total)`);\r\n      }\r\n      this.closeContextMenu();\r\n    },\r\n\r\n    // Context menu action: Remove a counter from a card on the battlefield.\r\n    removeCounter() {\r\n      const card = this.getCardFromContext();\r\n      // Check if card exists, is on battlefield, and has counters.\r\n      if (card && this.contextZone === 'battlefield' && card.counters > 0) {\r\n         card.counters--; // Decrement counter\r\n         console.log(`Removed counter from ${card.name} (${card.counters} total)`);\r\n      }\r\n      this.closeContextMenu();\r\n    },\r\n\r\n    // Context menu action: Open the modal to set power/toughness.\r\n    setPowerToughness() {\r\n      const card = this.getCardFromContext();\r\n      if (card && this.contextZone === 'battlefield') {\r\n        // Pre-fill the modal inputs with current P/T or empty string.\r\n        this.newPower = card.power ?? '';\r\n        this.newToughness = card.toughness ?? '';\r\n        this.showPTModal = true; // Show the modal\r\n      } else {\r\n         this.closeContextMenu(); // Close if not applicable\r\n      }\r\n    },\r\n\r\n    // Context menu action: Open the token modal pre-filled to copy the card.\r\n    createTokenCopy() {\r\n      const card = this.getCardFromContext();\r\n      if (card && this.contextZone === 'battlefield') {\r\n        this.tokenName = `${card.name} Token`; // Append \"Token\" to the name\r\n        this.tokenImageUrl = this.getCardImage(card); // Use the card's image\r\n        this.tokenQuantity = 1; // Default to creating one copy\r\n        this.showTokenModal = true; // Show the token modal\r\n      } else {\r\n          this.closeContextMenu();\r\n      }\r\n    },\r\n\r\n    // --- Token Creation Logic ---\r\n\r\n    // Opens the modal to create a generic token.\r\n    addToken() {\r\n      // Reset token form fields.\r\n      this.tokenName = '';\r\n      this.tokenQuantity = 1;\r\n      this.tokenImageUrl = '';\r\n      this.showTokenModal = true; // Show the modal\r\n    },\r\n\r\n    // Creates token(s) based on the modal form input and adds them to the battlefield.\r\n    createToken() {\r\n      // Sanitize inputs.\r\n      const quantity = Math.max(1, Number(this.tokenQuantity) || 1);\r\n      const name = this.tokenName.trim() || 'Token'; // Default name if empty\r\n      const imageUrl = this.tokenImageUrl.trim() || this.defaultTokenImage; // Default image if empty\r\n\r\n      // Create the specified number of tokens.\r\n      for (let i = 0; i < quantity; i++) {\r\n        const newToken = {\r\n          name: name,\r\n          isToken: true, // Mark as a token\r\n          // Generate a unique ID for the token instance.\r\n          gameId: `token-${name.replace(/\\s+/g, '-')}-${Date.now()}-${i}`,\r\n          // Use provided image URL or default.\r\n          image_uris: { normal: imageUrl },\r\n          // Initial state for tokens.\r\n          tapped: false,\r\n          flipped: false, // Tokens typically don't flip\r\n          counters: 0,\r\n          position: { x: 50 + i * 10, y: 50 + i * 10 }, // Stagger position slightly\r\n          power: undefined, // Tokens often need P/T set manually unless copied\r\n          toughness: undefined,\r\n        };\r\n        this.battlefield.push(newToken); // Add to battlefield\r\n      }\r\n      console.log(`Created ${quantity} \"${name}\" token(s)`);\r\n      this.cancelTokenCreation(); // Close the modal\r\n    },\r\n\r\n    // Closes the token creation modal.\r\n    cancelTokenCreation() {\r\n      this.showTokenModal = false;\r\n      this.closeContextMenu(); // Ensure context menu is closed if it was open\r\n    },\r\n\r\n    // --- Power/Toughness Setting Logic ---\r\n\r\n    // Saves the new power/toughness from the modal to the context card.\r\n    savePT() {\r\n      // Re-fetch the card from context state as it might have changed.\r\n      const card = this.getCardFromContext();\r\n      if (card && this.contextZone === 'battlefield') { // Check context again\r\n          // Convert empty string to undefined, otherwise parse as number.\r\n          const power = this.newPower === '' ? undefined : Number(this.newPower);\r\n          const toughness = this.newToughness === '' ? undefined : Number(this.newToughness);\r\n          // Update the card's properties.\r\n          card.power = power;\r\n          card.toughness = toughness;\r\n          console.log(`Set P/T for ${card.name} to ${power ?? '?'}/${toughness ?? '?'}`);\r\n      } else {\r\n          console.warn(\"Could not save P/T, context lost or invalid.\");\r\n      }\r\n      this.cancelPT(); // Close the modal\r\n    },\r\n\r\n    // Closes the power/toughness modal.\r\n    cancelPT() {\r\n      this.showPTModal = false;\r\n      this.closeContextMenu(); // Ensure context menu is closed\r\n    },\r\n\r\n    // --- Library Search Logic ---\r\n\r\n    // Opens the library search modal and populates initial results (reversed library order).\r\n    searchLibrary() {\r\n      this.librarySearchQuery = ''; // Clear previous search term\r\n      // Populate results with a reversed copy of the current library array.\r\n      // This shows the top card (last element) first in the modal.\r\n      this.librarySearchResults = [...this.library].reverse();\r\n      this.showLibrarySearch = true; // Show the modal\r\n    },\r\n\r\n    // Filters the library search results based on user input, preserving library order then reversing for display.\r\n    searchLibraryCards() {\r\n      const query = this.librarySearchQuery.toLowerCase().trim();\r\n      if (!query) {\r\n        // If query is empty, show all library cards, reversed for top-first display.\r\n        this.librarySearchResults = [...this.library].reverse();\r\n      } else {\r\n        // Filter the library based on the query, then reverse the filtered results.\r\n        this.librarySearchResults = this.library\r\n            .filter(card => card.name.toLowerCase().includes(query))\r\n            .reverse(); // Reverse the filtered array\r\n      }\r\n    },\r\n\r\n    // Moves a card selected from the search results to the hand and shuffles the library.\r\n    moveSearchedCardToHand(card) {\r\n      // Find the actual index of the card in the main library array.\r\n      // NOTE: We search the original `this.library`, not the reversed `librarySearchResults`.\r\n      const index = this.library.findIndex(c => (c.gameId || c.id) === (card.gameId || card.id));\r\n      if (index !== -1) {\r\n        // Remove the card from the library.\r\n        const [movedCard] = this.library.splice(index, 1);\r\n        // Add the card to the hand.\r\n        this.hand.push(movedCard);\r\n        console.log(`Moved \"${movedCard.name}\" from library to hand.`);\r\n        // Per game rules, shuffle the library after searching.\r\n        console.log('Shuffling library after search...');\r\n        this.shuffleDeck();\r\n        this.closeLibrarySearch(); // Close the modal\r\n      } else {\r\n        // This should ideally not happen if the card came from librarySearchResults\r\n        console.error(`Card \"${card.name}\" not found in library during search move.`);\r\n      }\r\n    },\r\n\r\n    // Closes the library search modal and resets search state.\r\n    closeLibrarySearch() {\r\n      this.showLibrarySearch = false;\r\n      this.librarySearchQuery = '';\r\n      this.librarySearchResults = [];\r\n    },\r\n\r\n    // --- Utility Methods ---\r\n\r\n    // Determines the correct image URL for a card, handling flipped state and defaults.\r\n    getCardImage(card) {\r\n      if (!card) return this.defaultCardBack; // Default if no card data\r\n\r\n      try {\r\n          // Check for flipped state and back face image.\r\n          if (card.flipped && card.card_faces && card.card_faces.length > 1 && card.card_faces[1].image_uris) {\r\n              return card.card_faces[1].image_uris.normal || card.card_faces[1].image_uris.large || this.defaultCardBack;\r\n          }\r\n          // Check for standard image URIs.\r\n          if (card.image_uris) {\r\n              return card.image_uris.normal || card.image_uris.large || this.defaultCardBack;\r\n          }\r\n          // Check for front face image if no standard URI (might be first face of MDFC).\r\n          if (card.card_faces && card.card_faces.length > 0 && card.card_faces[0].image_uris) {\r\n              return card.card_faces[0].image_uris.normal || card.card_faces[0].image_uris.large || this.defaultCardBack;\r\n          }\r\n          // Handle tokens specifically.\r\n          if (card.isToken) {\r\n              return card.image_uris?.normal || this.defaultTokenImage; // Use token image or default token placeholder\r\n          }\r\n      } catch (e) {\r\n          console.error(\"Error getting card image for:\", card?.name, e);\r\n      }\r\n\r\n      // Fallback if no suitable image found.\r\n      console.warn(\"Using default card back for card:\", card?.name);\r\n      return this.defaultCardBack;\r\n    },\r\n\r\n    // Returns the corresponding state array based on a zone name string.\r\n    getZoneArray(zoneName) {\r\n      switch (zoneName) {\r\n        case 'hand': return this.hand;\r\n        case 'library': return this.library;\r\n        case 'graveyard': return this.graveyard;\r\n        case 'exile': return this.exileZone;\r\n        case 'command': return this.commandZone;\r\n        case 'battlefield': return this.battlefield;\r\n        case 'initialDraw': return this.initialHand; // Include initial hand for mulligan phase actions\r\n        default:\r\n          console.error(`Invalid zone name: ${zoneName}`);\r\n          return null; // Return null for invalid zone names\r\n      }\r\n    },\r\n\r\n    // Finds the index of a specific card instance within the `hand` array.\r\n    findCardIndexInHand(cardToFind) {\r\n      if (!cardToFind) return -1;\r\n      // Use the unique gameId if available, otherwise fallback to card ID.\r\n      return this.hand.findIndex(card => (card.gameId || card.id) === (cardToFind.gameId || cardToFind.id));\r\n    },\r\n\r\n    // Retrieves the card object currently targeted by the context menu.\r\n    getCardFromContext() {\r\n        // Check if context state is valid.\r\n        if (!this.contextZone || this.contextIndex === null || this.contextIndex < 0) {\r\n            return null; // Invalid context\r\n        }\r\n        const zoneArray = this.getZoneArray(this.contextZone);\r\n        // Check if index is within bounds.\r\n        if (!zoneArray || this.contextIndex >= zoneArray.length) {\r\n            console.error(`Context index ${this.contextIndex} out of bounds for zone ${this.contextZone} (size ${zoneArray?.length})`);\r\n            return null;\r\n        }\r\n        // Return the card at the stored context index.\r\n        return zoneArray[this.contextIndex];\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* --- Main Popup --- */\r\n.playtest-popup {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(255, 255, 255, 0.9); /* Light semi-transparent overlay */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.playtest-content {\r\n  background-color: #f8f9fa; /* Light gray background */\r\n  padding: 25px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); /* Softer shadow */\r\n  width: 95vw;\r\n  height: 95vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  border: 1px solid #dee2e6; /* Light gray border */\r\n}\r\n\r\n.popup-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 1px solid #dee2e6; /* Light gray border */\r\n  flex-shrink: 0;\r\n}\r\n\r\n.popup-header h2 {\r\n  margin: 0;\r\n  color: #495057; /* Dark gray text */\r\n  font-size: 1.8rem;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 2rem;\r\n  color: #6c757d; /* Medium gray */\r\n  cursor: pointer;\r\n  padding: 0 10px;\r\n  line-height: 1;\r\n  transition: color 0.2s ease;\r\n}\r\n.close-btn:hover {\r\n  color: #dc3545; /* Red hover */\r\n}\r\n\r\n/* --- Deck Selection --- */\r\n.deck-selection {\r\n  text-align: center;\r\n  margin: auto; /* Center vertically and horizontally */\r\n  padding: 20px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  max-width: 500px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n}\r\n.deck-selection h3 {\r\n  margin-top: 0;\r\n  margin-bottom: 15px;\r\n  color: #495057;\r\n}\r\n.no-decks-message {\r\n  color: #adb5bd; /* Light gray */\r\n}\r\n.deck-option {\r\n  padding: 12px 20px;\r\n  margin: 8px 0;\r\n  background-color: white;\r\n  border-radius: 5px;\r\n  border: 1px solid #dee2e6;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  color: #495057;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\r\n}\r\n.deck-option:hover {\r\n  background-color: #f8f9fa;\r\n  border-color: #0d6efd; /* Blue border */\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* --- Initial Draw / Mulligan --- */\r\n.initial-draw {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  height: 100%; /* Take available height */\r\n  justify-content: center; /* Center content vertically */\r\n  flex-grow: 1; /* Allow it to grow */\r\n}\r\n.initial-draw h2 {\r\n  margin-bottom: 20px;\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n  color: #495057;\r\n}\r\n.initial-draw-hand-container {\r\n  display: flex;\r\n  flex-wrap: wrap; /* Allow cards to wrap */\r\n  justify-content: center;\r\n  gap: 15px;\r\n  margin-bottom: 25px;\r\n  max-width: 90%; /* Limit width */\r\n  padding: 15px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n  overflow-y: auto; /* Allow vertical scrolling if needed */\r\n  max-height: 60vh; /* Limit height */\r\n}\r\n.initial-draw .card-wrapper {\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n  border: 3px solid transparent; /* Border for selection indicator */\r\n  /* Ensure border radius includes the border width */\r\n  border-radius: calc(var(--card-border-radius, 8px) + 3px);\r\n  flex-shrink: 0; /* Prevent cards from shrinking */\r\n}\r\n.initial-draw .card-wrapper:hover {\r\n  transform: translateY(-5px) scale(1.03); /* Slight lift and scale effect */\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n.initial-draw .card-wrapper.selected {\r\n  border-color: #0d6efd; /* Blue selection indicator */\r\n  box-shadow: 0 0 15px rgba(13, 110, 253, 0.3); /* Glow effect */\r\n}\r\n.initial-draw .card-image {\r\n  width: 120px; /* Card size */\r\n  height: auto;\r\n  display: block;\r\n  border-radius: var(--card-border-radius, 8px); /* Use CSS variable or default */\r\n}\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n  margin-top: 15px; /* Space above buttons */\r\n}\r\n.action-button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  color: white;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.action-button:hover {\r\n  transform: translateY(-2px); /* Lift effect */\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n.action-button.keep { background-color: #198754; } /* Green */\r\n.action-button.keep:hover { background-color: #157347; }\r\n.action-button.mulligan { background-color: #dc3545; } /* Red */\r\n.action-button.mulligan:hover { background-color: #bb2d3b; }\r\n.action-button.draw { background-color: #0d6efd; } /* Blue */\r\n.action-button.draw:hover { background-color: #0b5ed7; }\r\n\r\n/* --- Main Playtest Interface Layout --- */\r\n.playtest-interface {\r\n  display: grid;\r\n  grid-template-areas:\r\n    \"top top top\"\r\n    \"battlefield battlefield battlefield\"\r\n    \"library hand hand\"; /* Library takes 1 column, Hand takes 2 */\r\n  grid-template-rows: auto 1fr auto; /* Top/Bottom auto height, Battlefield flexible */\r\n  grid-template-columns: auto 1fr; /* Library auto width, Hand flexible */\r\n  gap: 15px;\r\n  flex-grow: 1; /* Take remaining space */\r\n  overflow: hidden; /* Prevent content overflow */\r\n  padding: 10px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n/* --- Top Row Zones (Command, Graveyard, Exile) --- */\r\n.top-row {\r\n  grid-area: top;\r\n  display: flex;\r\n  gap: 15px;\r\n  height: 150px; /* Fixed height for the top row */\r\n  overflow: hidden; /* Hide overflow within the row */\r\n}\r\n.command-zone, .graveyard, .exile-zone {\r\n  flex: 1; /* Distribute space equally */\r\n  background-color: white;\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden; /* Hide internal overflow */\r\n  border: 1px solid #dee2e6;\r\n  cursor: pointer; /* Indicate clickable for expansion */\r\n  transition: all 0.2s;\r\n  position: relative; /* For absolute positioning of messages */\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\r\n}\r\n.top-row h3 {\r\n  margin: 0 0 8px 0;\r\n  text-align: center;\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  border-bottom: 1px solid #dee2e6;\r\n  padding-bottom: 5px;\r\n  flex-shrink: 0; /* Prevent title from shrinking */\r\n}\r\n\r\n.zone-header { /* Container for title and tax */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  padding: 0 5px; /* Add some padding */\r\n}\r\n\r\n.zone-header h3 {\r\n  margin: 0; /* Remove default margins */\r\n  border-bottom: none; /* Remove border from h3 */\r\n  padding-bottom: 0;\r\n  flex-grow: 1; /* Allow title to take space */\r\n  text-align: left; /* Align title left */\r\n}\r\n\r\n\r\n.commander-tax-display {\r\n  background-color: #e9ecef; /* Light gray background */\r\n  color: #495057; /* Darker text */\r\n  padding: 3px 8px;\r\n  border-radius: 12px; /* Pill shape */\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n  border: 1px solid #ced4da; /* Slightly darker border */\r\n  box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Inner shadow */\r\n  margin-left: 10px; /* Space from title */\r\n  white-space: nowrap; /* Prevent wrapping */\r\n}\r\n\r\n.zone-preview {\r\n  display: flex;\r\n  gap: 5px;\r\n  align-items: center; /* Align items vertically */\r\n  justify-content: center; /* Center items horizontally */\r\n  flex-grow: 1; /* Take available space */\r\n  position: relative; /* For empty message positioning */\r\n  min-height: 50px; /* Ensure minimum height */\r\n  padding: 5px; /* Add padding */\r\n  flex-wrap: wrap; /* Allow wrapping if many cards */\r\n}\r\n.zone-preview .card-wrapper {\r\n  position: relative; /* For potential badges */\r\n  line-height: 0; /* Prevent extra space below images */\r\n}\r\n.card-image.small {\r\n  width: 50px; /* Smaller card images for preview */\r\n  height: auto;\r\n  border-radius: 4px;\r\n  display: block;\r\n  border: 1px solid #eee; /* Faint border */\r\n}\r\n.more-cards-indicator {\r\n  font-size: 0.8rem;\r\n  color: #adb5bd; /* Light gray */\r\n  margin-left: 5px;\r\n  align-self: flex-end; /* Align to bottom */\r\n  padding-bottom: 5px;\r\n}\r\n.empty-zone-message {\r\n  font-size: 0.85rem;\r\n  color: #adb5bd; /* Light gray */\r\n  text-align: center;\r\n  width: 100%;\r\n  position: absolute; /* Center absolutely */\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 0 5px; /* Prevent text touching edges */\r\n}\r\n\r\n/* --- Expanded Zone View (Modal-like) --- */\r\n.expanded-zone {\r\n  position: fixed; /* Overlay on top */\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 80vw; /* Responsive width */\r\n  max-width: 900px; /* Max width */\r\n  height: 70vh; /* Responsive height */\r\n  background-color: white;\r\n  border: 2px solid #0d6efd; /* Blue border */\r\n  border-radius: 10px;\r\n  z-index: 1100; /* Above other elements */\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\r\n}\r\n.expanded-zone .zone-header { /* Reuse zone-header style */\r\n  padding: 0 10px 10px; /* Adjust padding */\r\n  border-bottom: 1px solid #dee2e6; /* Add border */\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n}\r\n.expanded-zone .commander-tax-display { /* Style tax display in expanded view */\r\n  font-size: 0.9rem;\r\n  padding: 4px 10px;\r\n}\r\n.expanded-cards {\r\n  flex-grow: 1; /* Take available space */\r\n  overflow-y: auto; /* Enable vertical scrolling */\r\n  display: flex;\r\n  flex-wrap: wrap; /* Allow cards to wrap */\r\n  gap: 15px; /* Space between cards */\r\n  padding: 15px; /* Padding inside the scroll area */\r\n  background-color: #f8f9fa; /* Light background for contrast */\r\n  border-radius: 6px;\r\n  justify-content: center; /* Center cards horizontally */\r\n  align-content: flex-start; /* Align wrapped lines to the top */\r\n}\r\n.expanded-zone .card-wrapper {\r\n  position: relative; /* For potential future elements */\r\n  line-height: 0;\r\n}\r\n.expanded-zone .card-image {\r\n  width: 130px; /* Larger cards in expanded view */\r\n  height: auto;\r\n  border-radius: 6px;\r\n  display: block;\r\n  cursor: grab; /* Indicate draggable */\r\n  border: 1px solid #dee2e6;\r\n}\r\n.expanded-zone .card-image:active {\r\n  cursor: grabbing; /* Indicate dragging */\r\n}\r\n.collapse-button {\r\n  margin-top: 15px; /* Space above button */\r\n  padding: 8px 15px;\r\n  background-color: #0d6efd; /* Blue */\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  align-self: center; /* Center button horizontally */\r\n  transition: all 0.2s;\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.collapse-button:hover {\r\n  background-color: #0b5ed7;\r\n  transform: translateY(-2px);\r\n}\r\n.expanded-zone .empty-zone-message {\r\n  position: static; /* Reset absolute positioning */\r\n  transform: none;\r\n  font-size: 1rem;\r\n  color: #adb5bd;\r\n  margin: auto; /* Center within the flex container */\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n/* Removed absolute positioned commander tax in expanded view, handled in header */\r\n\r\n/* --- Battlefield --- */\r\n.battlefield {\r\n  grid-area: battlefield;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  position: relative; /* For absolute positioning of cards and button */\r\n  overflow: hidden; /* Hide overflow */\r\n  border: 1px solid #dee2e6;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\r\n  background-color: #e9ecef; /* Slightly different background */\r\n}\r\n.battlefield h3 {\r\n  margin: 0 0 10px 0;\r\n  text-align: center;\r\n  color: #495057;\r\n  flex-shrink: 0; /* Prevent title shrinking */\r\n}\r\n.battlefield-cards {\r\n  position: relative; /* Container for absolutely positioned cards */\r\n  width: 100%;\r\n  flex-grow: 1; /* Take available space */\r\n  overflow: auto; /* Allow scrolling if cards overflow */\r\n  min-height: 200px; /* Ensure minimum height */\r\n  border-radius: 4px;\r\n  background-color: white; /* White background for card area */\r\n  border: 1px solid #ced4da;\r\n}\r\n.battlefield-card {\r\n  /* Use !important cautiously, ensure it's necessary for overriding */\r\n  position: absolute !important;\r\n  cursor: grab; /* Indicate draggable */\r\n  transition: transform 0.2s ease-in-out; /* Smooth rotation for tapping */\r\n  z-index: 1; /* Base z-index */\r\n  width: 100px; /* Set width here */\r\n  height: auto; /* Maintain aspect ratio */\r\n  line-height: 0; /* Prevent extra space */\r\n}\r\n.battlefield-card:active {\r\n  cursor: grabbing; /* Indicate dragging */\r\n  z-index: 10; /* Bring to front when dragging */\r\n}\r\n.battlefield-card .card-image {\r\n  width: 100%; /* Image takes full width of wrapper */\r\n  height: auto;\r\n  border-radius: 5px;\r\n  display: block;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n  user-select: none; /* Prevent image selection */\r\n  -webkit-user-drag: none; /* Prevent native image dragging */\r\n  border: 1px solid rgba(0,0,0,0.1); /* Faint border */\r\n}\r\n.counter-badge {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background-color: #dc3545; /* Red */\r\n  color: white;\r\n  border-radius: 50%; /* Circle shape */\r\n  width: 20px;\r\n  height: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n  z-index: 2; /* Above card image */\r\n  pointer-events: none; /* Allow clicks through to card */\r\n}\r\n.pt-indicator {\r\n  position: absolute;\r\n  bottom: 3px;\r\n  left: 3px;\r\n  background-color: rgba(248, 249, 250, 0.9); /* Semi-transparent light background */\r\n  color: #495057; /* Dark text */\r\n  font-size: 0.8rem;\r\n  padding: 2px 4px;\r\n  border-radius: 3px;\r\n  font-weight: bold;\r\n  z-index: 2; /* Above card image */\r\n  border: 1px solid #dee2e6;\r\n  pointer-events: none; /* Allow clicks through */\r\n}\r\n.token-button {\r\n  position: absolute; /* Position relative to battlefield */\r\n  bottom: 10px;\r\n  right: 10px;\r\n  padding: 6px 12px;\r\n  background-color: #6f42c1; /* Purple */\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  z-index: 20; /* Above cards */\r\n  font-size: 0.9rem;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.token-button:hover {\r\n  background-color: #5a32a3;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* --- Bottom Row (Library, Hand) --- */\r\n.bottom-row {\r\n  /* Spans the grid areas defined in playtest-interface */\r\n  grid-area: library / library / hand / hand;\r\n  display: flex;\r\n  gap: 15px;\r\n  height: 180px; /* Fixed height for the bottom row */\r\n}\r\n.library {\r\n  grid-area: library; /* Assign to grid area */\r\n  background-color: white;\r\n  padding: 10px; /* Consistent padding */\r\n  border-radius: 6px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between; /* Space out title, image, button */\r\n  width: 150px; /* Fixed width */\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n  border: 1px solid #dee2e6;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\r\n}\r\n.library h3 {\r\n  margin: 0 0 5px 0;\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  width: 100%;\r\n  text-align: center;\r\n  flex-shrink: 0;\r\n}\r\n.library-image {\r\n  width: 80px; /* Size of the deck image */\r\n  height: auto;\r\n  border-radius: 5px;\r\n  cursor: pointer; /* Indicate clickable for search */\r\n  margin-bottom: 5px;\r\n  transition: all 0.2s;\r\n  flex-shrink: 0;\r\n  border: 1px solid #dee2e6;\r\n}\r\n.library-image:hover {\r\n  transform: scale(1.05); /* Slight scale effect */\r\n  box-shadow: 0 0 10px rgba(13, 110, 253, 0.2); /* Blue glow */\r\n}\r\n.draw-button {\r\n  padding: 6px 10px;\r\n  width: 80%; /* Relative width */\r\n  font-size: 0.9rem;\r\n  background-color: #0d6efd; /* Blue */\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  flex-shrink: 0;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.draw-button:hover {\r\n  background-color: #0b5ed7;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.hand-zone {\r\n  grid-area: hand; /* Assign to grid area */\r\n  background-color: white;\r\n  padding: 10px;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1; /* Take remaining horizontal space */\r\n  overflow: hidden; /* Hide overflow */\r\n  border: 1px solid #dee2e6;\r\n  position: relative; /* For empty message */\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\r\n}\r\n.hand-zone h3 {\r\n  margin: 0 0 8px 0;\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  text-align: center;\r\n  flex-shrink: 0;\r\n}\r\n.hand-cards {\r\n  display: flex;\r\n  gap: 10px; /* Space between cards/groups */\r\n  padding-bottom: 10px; /* Space at the bottom */\r\n  align-items: flex-start; /* Align cards to the top */\r\n  flex-grow: 1; /* Take available vertical space */\r\n  overflow-x: auto; /* Enable horizontal scrolling */\r\n  overflow-y: hidden; /* Disable vertical scrolling */\r\n  min-height: 120px; /* Minimum height for the card area */\r\n}\r\n.hand-zone .card-wrapper {\r\n  position: relative; /* For quantity badge */\r\n  flex-shrink: 0; /* Prevent cards from shrinking */\r\n  line-height: 0;\r\n}\r\n.hand-zone .card-image {\r\n  width: 90px; /* Card size in hand */\r\n  height: auto;\r\n  border-radius: 5px;\r\n  display: block;\r\n  cursor: grab; /* Indicate draggable */\r\n  transition: all 0.1s ease;\r\n  border: 1px solid rgba(0,0,0,0.1); /* Faint border */\r\n}\r\n.hand-zone .card-image:active {\r\n  cursor: grabbing;\r\n  transform: scale(0.95); /* Slight shrink effect when grabbed */\r\n}\r\n.quantity-badge {\r\n  position: absolute;\r\n  top: -5px;\r\n  left: -5px;\r\n  background-color: #0d6efd; /* Blue */\r\n  color: white;\r\n  border-radius: 50%; /* Circle */\r\n  width: 18px;\r\n  height: 18px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.75rem;\r\n  font-weight: bold;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n  z-index: 2; /* Above card */\r\n  pointer-events: none; /* Allow clicks through */\r\n}\r\n.hand-zone .empty-zone-message {\r\n  position: absolute; /* Center message */\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  font-size: 0.9rem;\r\n  color: #adb5bd;\r\n}\r\n\r\n/* --- Context Menu --- */\r\n.context-menu {\r\n  position: fixed; /* Position relative to viewport */\r\n  background-color: white;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 5px;\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Soft shadow */\r\n  z-index: 1200; /* Above expanded zones */\r\n  padding: 5px 0; /* Vertical padding */\r\n  min-width: 180px; /* Minimum width */\r\n}\r\n.context-menu-item {\r\n  padding: 8px 15px; /* Padding within items */\r\n  color: #495057; /* Text color */\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: all 0.15s ease;\r\n  white-space: nowrap; /* Prevent text wrapping */\r\n}\r\n.context-menu-item:hover {\r\n  background-color: #f8f9fa; /* Light gray hover */\r\n  color: #0d6efd; /* Blue text hover */\r\n}\r\n.context-menu-divider {\r\n  height: 1px;\r\n  background-color: #dee2e6; /* Separator line */\r\n  margin: 5px 0; /* Space around divider */\r\n}\r\n\r\n/* --- Modals (Token, P/T, Library Search) --- */\r\n.modal-overlay {\r\n  position: fixed; /* Full screen overlay */\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1050; /* Below context menu, above most content */\r\n  padding: 20px; /* Padding for smaller screens */\r\n}\r\n.modal-content {\r\n  background-color: white;\r\n  padding: 25px 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);\r\n  border: 1px solid #dee2e6;\r\n  color: #495057;\r\n  max-height: 85vh; /* Limit height */\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 90%; /* Responsive width */\r\n  max-width: 600px; /* Max width for general modals */\r\n}\r\n.modal-content h3 {\r\n  margin: 0 0 20px 0;\r\n  text-align: center;\r\n  color: #0d6efd; /* Blue title */\r\n  border-bottom: 1px solid #dee2e6;\r\n  padding-bottom: 10px;\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n}\r\n.token-form, .pt-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px; /* Space between form elements */\r\n  overflow-y: auto; /* Allow scrolling if form is long */\r\n  padding-right: 5px; /* Space for scrollbar */\r\n}\r\n.modal-content label {\r\n  display: flex;\r\n  flex-direction: column; /* Stack label text above input */\r\n  align-items: flex-start;\r\n  gap: 5px; /* Space between label text and input */\r\n  font-size: 0.95rem;\r\n}\r\n.modal-content input[type=\"text\"],\r\n.modal-content input[type=\"number\"] {\r\n  width: 100%;\r\n  padding: 8px 10px;\r\n  border: 1px solid #dee2e6;\r\n  background-color: white;\r\n  color: #495057;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n  box-sizing: border-box; /* Include padding/border in width */\r\n}\r\n.modal-buttons {\r\n  display: flex;\r\n  justify-content: flex-end; /* Align buttons to the right */\r\n  gap: 12px; /* Space between buttons */\r\n  margin-top: 25px; /* Space above buttons */\r\n  padding-top: 15px; /* Space below form */\r\n  border-top: 1px solid #dee2e6; /* Separator line */\r\n  flex-shrink: 0; /* Prevent shrinking */\r\n}\r\n.modal-buttons button {\r\n  padding: 9px 18px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 0.95rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  color: #fff;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n.modal-buttons button:hover {\r\n  transform: translateY(-1px); /* Slight lift */\r\n}\r\n.confirm-button { background-color: #198754; } /* Green */\r\n.confirm-button:hover { background-color: #157347; }\r\n.cancel-button { background-color: #6c757d; } /* Gray */\r\n.cancel-button:hover { background-color: #5c636a; }\r\n\r\n/* --- Library Search Modal Specific Styles --- */\r\n.library-search-modal {\r\n  width: 85vw; /* Wider modal for search results */\r\n  max-width: 1000px;\r\n}\r\n.library-search-input {\r\n  width: 100%;\r\n  margin-bottom: 15px;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  flex-shrink: 0;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n.search-results {\r\n  flex-grow: 1; /* Take available space */\r\n  overflow-y: auto; /* Vertical scroll */\r\n  background-color: white;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 6px;\r\n  padding: 15px;\r\n  display: grid; /* Grid layout for results */\r\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); /* Responsive columns */\r\n  gap: 1rem; /* Space between grid items */\r\n  margin-bottom: 1rem; /* Space below results */\r\n  max-height: 55vh; /* Limit height */\r\n  min-height: 150px; /* Minimum height */\r\n  position: relative; /* For empty message */\r\n}\r\n.search-result-card {\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  text-align: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 0.5rem; /* Space between image and name */\r\n  background-color: white;\r\n  padding: 5px;\r\n  border-radius: 4px;\r\n}\r\n.search-result-card:hover {\r\n  transform: scale(1.04); /* Scale effect */\r\n  box-shadow: 0 4px 10px rgba(0,0,0,0.1); /* Shadow on hover */\r\n  background-color: #f8f9fa; /* Light background hover */\r\n}\r\n.search-card-image {\r\n  width: 100%; /* Image takes full width of card */\r\n  height: auto;\r\n  border-radius: 6px;\r\n  display: block;\r\n  border: 1px solid #dee2e6;\r\n}\r\n.search-result-card span {\r\n  font-size: 0.8rem; /* Smaller text for card name */\r\n  color: #495057;\r\n  word-break: break-word; /* Allow long names to wrap */\r\n  margin-top: 4px;\r\n}\r\n.library-search-buttons {\r\n  justify-content: space-between; /* Space out Shuffle and Close buttons */\r\n}\r\n.library-search-modal .empty-zone-message {\r\n  grid-column: 1 / -1; /* Span all columns */\r\n  text-align: center;\r\n  font-size: 1rem;\r\n  color: #adb5bd;\r\n  margin: auto; /* Center vertically and horizontally */\r\n  position: absolute; /* Center within the grid */\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: calc(100% - 30px); /* Account for padding */\r\n}\r\n\r\n/* --- Loading State --- */\r\n.loading {\r\n  margin: auto; /* Center loading text */\r\n  font-size: 1.5rem;\r\n  color: #adb5bd;\r\n}\r\n\r\n/* --- General Card Wrapper --- */\r\n.card-wrapper {\r\n  position: relative; /* Base for absolute positioned elements like badges */\r\n  line-height: 0; /* Prevent extra space below images */\r\n}\r\n\r\n/* --- Responsive Styles --- */\r\n@media (max-width: 1200px) {\r\n  .playtest-content {\r\n      width: 98vw;\r\n      height: 98vh;\r\n      padding: 15px;\r\n  }\r\n  .expanded-zone { width: 90vw; }\r\n  .library-search-modal { width: 90vw; }\r\n  .initial-draw .card-image { width: 100px; }\r\n  .battlefield-card { width: 90px; } /* Adjust battlefield card width */\r\n  .hand-zone .card-image { width: 80px; }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .top-row { height: 120px; }\r\n  .bottom-row { height: 150px; }\r\n  .library { width: 120px; }\r\n  .library-image { width: 65px; }\r\n  .draw-button { width: 90%; font-size: 0.8rem; padding: 5px 8px; }\r\n  .initial-draw .card-image { width: 80px; }\r\n  .battlefield-card { width: 75px; } /* Adjust battlefield card width */\r\n  .hand-zone .card-image { width: 70px; }\r\n  .hand-cards { gap: 5px; }\r\n  .expanded-zone { width: 95vw; height: 75vh; }\r\n  .expanded-zone .card-image { width: 100px; }\r\n  .library-search-modal { width: 95vw; }\r\n  .search-results { grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 0.8rem; }\r\n  .action-button { padding: 8px 15px; font-size: 0.9rem; }\r\n  .modal-content { padding: 20px; max-width: 90%; }\r\n  .modal-content h3 { font-size: 1.3rem; }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .playtest-content { padding: 10px; }\r\n  .popup-header h2 { font-size: 1.5rem; }\r\n  .close-btn { font-size: 1.8rem; }\r\n  .top-row { height: 100px; gap: 8px; }\r\n  .top-row h3 { font-size: 0.8rem; }\r\n  .card-image.small { width: 40px; }\r\n  .bottom-row { height: 130px; gap: 8px; }\r\n  .library { width: 100px; padding: 8px; }\r\n  .library-image { width: 55px; }\r\n  .initial-draw .card-image { width: 70px; }\r\n  .battlefield-card { width: 65px; } /* Adjust battlefield card width */\r\n  .hand-zone .card-image { width: 60px; }\r\n  .counter-badge { width: 16px; height: 16px; font-size: 0.7rem; }\r\n  .pt-indicator { font-size: 0.7rem; padding: 1px 3px; }\r\n  .quantity-badge { width: 16px; height: 16px; font-size: 0.7rem; }\r\n  .action-buttons { gap: 10px; }\r\n  .action-button { padding: 6px 12px; font-size: 0.8rem; }\r\n  .modal-buttons { gap: 8px; }\r\n  .modal-buttons button { padding: 7px 14px; font-size: 0.85rem; }\r\n  .search-results { grid-template-columns: repeat(auto-fill, minmax(75px, 1fr)); gap: 0.5rem; }\r\n  .search-result-card span { font-size: 0.75rem; }\r\n  .modal-content { max-width: 95%; }\r\n}\r\n</style>\r\n","import { render } from \"./PlaytestPopup.vue?vue&type=template&id=c1372b88&scoped=true\"\nimport script from \"./PlaytestPopup.vue?vue&type=script&lang=js\"\nexport * from \"./PlaytestPopup.vue?vue&type=script&lang=js\"\n\nimport \"./PlaytestPopup.vue?vue&type=style&index=0&id=c1372b88&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c1372b88\"]])\n\nexport default __exports__","import { render } from \"./DeckSidebar.vue?vue&type=template&id=08cd79c7&scoped=true\"\nimport script from \"./DeckSidebar.vue?vue&type=script&lang=js\"\nexport * from \"./DeckSidebar.vue?vue&type=script&lang=js\"\n\nimport \"./DeckSidebar.vue?vue&type=style&index=0&id=08cd79c7&lang=css\"\nimport \"./DeckSidebar.vue?vue&type=style&index=1&id=08cd79c7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08cd79c7\"]])\n\nexport default __exports__","import { render } from \"./CardSearch.vue?vue&type=template&id=39f4df0a&scoped=true\"\nimport script from \"./CardSearch.vue?vue&type=script&lang=js\"\nexport * from \"./CardSearch.vue?vue&type=script&lang=js\"\n\nimport \"./CardSearch.vue?vue&type=style&index=0&id=39f4df0a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39f4df0a\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=71168038\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=71168038&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport 'mana-font/css/mana.min.css';\nimport './assets/global.css';\nimport Notifications from '@kyvg/vue3-notification'\n\nconst app = createApp(App)\napp.use(Notifications)\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmtg_frontend\"] = self[\"webpackChunkmtg_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(719); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","_createVNode","_component_CardSearch","class","key","_createElementVNode","src","require","alt","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_cache","$event","$data","query","onInput","args","$options","debouncedSearch","onKeyup","_withKeys","submitSearch","placeholder","onClick","_createTextVNode","results","length","_createBlock","_component_CardAutocomplete","onSelectCard","showCardDetails","_createCommentVNode","showFilterPopup","_component_FilterPopup","isOpen","allSets","currentFilters","activeFilters","onClosePopup","onApplyFilters","handleApplyFilters","_hoisted_7","cards","_component_CardGrid","onAddToDeck","addCardToDeck","hasSearched","_hoisted_8","hasMore","page","_hoisted_9","_hoisted_10","fetchCards","disabled","_hoisted_11","_hoisted_12","_toDisplayString","_hoisted_13","_component_DeckSidebar","ref","selectedCard","onResetSelectedCard","onViewCard","onDeckSaved","_component_CardDetailsPopup","card","onClose","$props","_withModifiers","_Fragment","_renderList","_ctx","$emit","name","mana_cost","innerHTML","formatManaCost","props","Array","methods","closeDropdown","this","manaCost","replace","match","symbol","cssClass","toLowerCase","includes","mounted","document","addEventListener","beforeUnmount","removeEventListener","__exports__","getCardImageUrl","handleImageClick","handleAddToDeck","title","type","required","card_faces","image_uris","normal","console","log","close","_component_CardFlip","canBeFlipped","addToDeckAndClose","displayManaCost","formatColorIdentity","colors","power","toughness","_hoisted_14","_hoisted_15","_hoisted_16","type_line","set_name","_hoisted_17","_hoisted_18","_hoisted_19","displayOracleText","_hoisted_20","flipCard","_normalizeClass","flipped","isFlipped","frontImage","backImage","Object","data","computed","components","CardFlip","Boolean","face1","face2","cost1","cost2","map","face","oracle_text","filter","join","text","test","colorMap","color","closePopup","setSearchQuery","filterSets","filteredSets","set","code","value","filters","sets","toUpperCase","colorOptions","selected","style","_normalizeStyle","backgroundColor","background","toggleColor","rarityOptions","rarity","rarities","toggleRarity","image","typeOptions","types","toggleType","_hoisted_21","supertypeOptions","supertype","supertypes","toggleSupertype","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","min","max","number","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","operator","_hoisted_30","_hoisted_31","_hoisted_32","clearFilters","applyFilters","default","JSON","parse","stringify","watch","handler","newSets","immediate","newFilters","deep","trim","index","indexOf","push","splice","firebaseStatus","statusMessage","lastSyncTime","formatTime","activeDeck","backToDecks","promptDeleteDeck","isRenaming","tempDeckName","confirmRenaming","cancelRenaming","onBlur","startRenaming","showExportModal","formatColors","totalCards","showDeckStats","showStatsPopup","_component_StatsPopup","toggleStatsPopup","commander","viewCardDetails","small","sortedCards","isColorIdentityValid","isLegalInCommander","getCardBorderStyle","count","_hoisted_33","canHaveMultipleCopies","addOneCard","_hoisted_34","removeCard","_hoisted_35","_hoisted_36","saveDeck","openPlaytest","decks","deck","loadDeck","getDeckCardCount","showCreateDeckModal","showImportModal","_hoisted_37","_hoisted_38","for","newDeckName","_hoisted_39","searchCommanderCards","selectedCommander","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","createDeck","_hoisted_45","showCommanderSearch","_hoisted_46","_hoisted_47","commanderQuery","_hoisted_48","commanderResults","selectCommander","_hoisted_50","_hoisted_51","_hoisted_49","_hoisted_52","showDeleteConfirmation","_hoisted_53","deckToDelete","_hoisted_54","confirmDeleteDeck","_component_ImportPopup","onImport","handleDeckImport","_component_ExportPopup","showStatsModal","showPlaytestPopup","_component_PlaytestPopup","firebaseConfig","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","app","initializeApp","db","getFirestore","async","setDoc","doc","loadDecks","querySnapshot","getDocs","collection","docs","deleteDeck","deckId","deleteDoc","$setup","deckName","accept","onChange","handleFileUpload","processing","error","showCommanderSelection","potentialCommanders","selectedCommanderIndex","onMouseenter","hoveredCommanderIndex","onMouseleave","cancelCommanderSelection","confirmCommanderSelection","emits","setup","emit","skippedCards","fileInputRef","pendingDeckData","parseCardLine","line","trimmedLine","regex","groups","quantity","parseInt","setCode","undefined","isPotentialCommander","cardData","typeLine","isLegendary","isCreature","isPlaneswalker","canBeCommander","findPotentialCommanders","commanders","response","axios","get","params","q","unique","originalName","verifyImport","originalText","importedCards","originalLines","split","trimmed","missingCards","originalCardNames","forEach","some","c","processDeckList","lines","skipped","hasCommanderHeader","commanderLine","commanderData","Error","isCommander","processedCards","processedCardNames","Set","Promise","resolve","setTimeout","has","add","fallbackResponse","file","event","target","files","deckData","completeImport","err","message","slice","alert","color_identity","created","Date","toISOString","cardsWithoutCommander","resetCommanderSelection","formattedDecklist","exportDecklist","reduce","total","cardGroups","keys","sort","a","b","localeCompare","decklist","concat","blob","Blob","url","URL","createObjectURL","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","viewCard","commanderImage","_component_bar_chart","manaCurveChartData","options","manaCurveOptions","avgManaValue","toFixed","lowCostCards","_component_pie_chart","cardTypeChartData","pieChartOptions","height","landCount","basicLandCount","nonbasicLandCount","landColors","identity","getColorName","colorIdentityChartData","totalDeckPrice","avgCardPrice","mostExpensiveCard","mostExpensiveCardPrice","budgetChartData","budgetChartOptions","creatureTypeChartData","keywordChartData","keywordChartOptions","ChartJS","register","Title","Tooltip","Legend","BarElement","CategoryScale","LinearScale","ArcElement","BarChart","Bar","PieChart","Pie","typeColors","colorPalette","responsive","maintainAspectRatio","plugins","legend","position","tooltip","callbacks","label","context","raw","dataset","percentage","Math","round","scales","y","beginAtZero","ticks","stepSize","precision","grid","display","x","barPercentage","categoryPercentage","indexAxis","totalMV","cmc","curve","datasets","labels","zeroIndex","oneIndex","twoIndex","toString","values","filteredTypes","entries","t","isLand","isBasicLand","produces","getLandColors","colorCounts","filteredColors","getColorHex","typeParts","creatureTypesPart","creatureTypes","topTypes","_","i","getColorForIndex","keywords","keywordList","oracleText","isInstant","isSorcery","keyword","keywordLower","topKeywords","k","price","parseFloat","prices","usd","maxPrice","expensiveCard","under1","oneToFive","overFive","names","isInitialized","phase","selectAndLoadDeck","loading","initialHand","selectedCards","toggleCardSelect","getCardImage","draggable","keepHand","mulligan","drawCard","onDrop","dropCard","onDragover","isZoneExpanded","command","toggleZoneExpansion","commandZone","commanderTax","onDragstart","dragStart","onContextmenu","openCardMenu","graveyard","exile","exileZone","battlefield","gameId","tapped","onMousedown","startDrag","onMouseup","stopDrag","onMousemove","throttledHandleDrag","counters","addToken","library","defaultCardBack","searchLibrary","hand","groupedHand","cardGroup","findCardIndexInHand","showContextMenu","contextCard","top","contextMenuPosition","left","contextZone","moveToZone","isToken","moveToTopOfLibrary","moveToBottomOfLibrary","increaseCommanderTax","tapCard","addCounter","removeCounter","setPowerToughness","createTokenCopy","showTokenModal","cancelTokenCreation","tokenName","tokenQuantity","tokenImageUrl","createToken","showPTModal","cancelPT","_hoisted_55","newPower","newToughness","_hoisted_56","savePT","showLibrarySearch","closeLibrarySearch","librarySearchQuery","searchLibraryCards","_hoisted_57","librarySearchResults","moveSearchedCardToHand","_hoisted_59","_hoisted_58","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","shuffleLibrary","_hoisted_64","throttle","func","limit","inThrottle","arguments","apply","selectedDeckId","draggedCard","draggedFromZone","draggedFromIndex","isDraggingBattlefieldCard","draggedBattlefieldCardIndex","dragStartOffset","contextIndex","contextMenuCloseHandler","mulliganCount","defaultTokenImage","cardMap","Map","group","handleDrag","$nextTick","closest","closeContextMenu","cleanup","find","d","libraryCards","isArray","cardIndex","now","warn","shuffleDeck","drawInitialHand","handSize","pop","idx","newHandSize","drawnCard","j","floor","random","zone","removeCardFromZone","zoneName","zoneArray","getZoneArray","dataTransfer","setData","cardId","effectAllowed","targetZone","preventDefault","getData","sourceZone","cardToMove","actualSourceIndex","sourceArray","findIndex","targetArray","battlefieldRect","currentTarget","getBoundingClientRect","clientX","clientY","e","button","cardRect","battlefieldCardsRect","$el","querySelector","newX","newY","stopPropagation","actualIndex","clickX","clickY","viewportHeight","window","innerHeight","estimatedMenuHeight","spaceBelow","padding","yPos","xPos","moveCardFromContext","libraryPosition","getCardFromContext","sourceIndex","removedCard","unshift","Number","imageUrl","newToken","reverse","movedCard","large","cardToFind","ImportPopup","ExportPopup","StatsPopup","PlaytestPopup","showAddLandsModal","selectedLand","connectionInterval","selectedDeckForPlaytest","deckCardCounts","acc","sum","checkConnection","startTime","date","toLocaleTimeString","hour","minute","checkDataSource","firebaseDecks","localDecks","localStorage","getItem","groupEnd","setItem","newDeck","loadDecksFromStorage","gradientStops","allowsMultiples","commanderColors","cardColors","every","legalities","unseriousSets","border_color","frame_effects","padStart","confirmAdd","confirm","existingIndex","newCard","$forceUpdate","cardElement","classList","remove","encodeURIComponent","fetch","json","storedDecks","$refs","renameInput","focus","handleDeckExport","format","setInterval","clearInterval","CardAutocomplete","CardGrid","CardDetailsPopup","FilterPopup","DeckSidebar","selectedCardForDeck","DeckmoorLogo","fetchSets","debounce","fetchAutocomplete","newPage","mana_min","mana_max","power_value","power_operator","toughness_value","toughness_operator","has_more","deckSidebar","CardSearch","render","createApp","App","use","Notifications","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","r","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","baseURI","self","location","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}